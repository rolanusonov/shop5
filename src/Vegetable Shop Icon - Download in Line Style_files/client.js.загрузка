/**
 * crisp-client
 * @version v2.7.0 b554d3d
 * @author Crisp IM SAS
 * @date 4/14/2022
 */
(function(){try{var x={},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};x.Library=(H.prototype.t=function(){try{this.i()}catch(t){}},H.prototype.i=function(){try{this.dom.fn.extend({safe_css_text:function(s,c){if(s)return"object"===(void 0===s?"undefined":r(s))||c?(this.each(function(t){var i={};"object"===(void 0===s?"undefined":r(s))?i=s:i[s]=c;var n,e="";for(n in i)i.hasOwnProperty(n)&&(e+=n+": "+i[n]+" !important;");t.style.cssText=e}),this):this[0].style.cssText;this.each(function(t){t.style.cssText=""})}})}catch(t){}},new H),x.Polyfill=(J.prototype.reset=function(){try{this.c()}catch(t){}},J.prototype.schedule_warn_incompatible=function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{null!==this.a&&clearTimeout(this.a),this.a=setTimeout(function(){!(t.a=null)!==x.Pipeline.o&&t.h()},!0===i?0:this.u)}catch(t){}},J.prototype.l=function(){try{this.d()}catch(t){}},J.prototype.d=function(){try{Function.prototype.p=function(t){var i,n=void 0,e=void 0,s=void 0;if("function"!=typeof this)throw new TypeError("Function.prototype.__crisp_bind - not callable");return n=Array.prototype.slice.call(arguments,1),s=function(){},i=function(){return e.apply(this instanceof s?this:t,n.concat(Array.prototype.slice.call(arguments)))},(e=this).prototype&&(s.prototype=this.prototype),i.prototype=new s,i}}catch(t){}},J.prototype.h=function(){try{var t=window;if(t&&t.console&&"function"==typeof t.console.warn&&"function"==typeof Function.prototype.toString){for(var i,n,e,s=[[null,t,["eval","escape","unescape","decodeURI","encodeURI","decodeURIComponent","encodeURIComponent","setTimeout","clearTimeout","setInterval","clearInterval","parseInt","parseFloat","RTCPeerConnection","MutationObserver","XMLHttpRequest","AudioContext","WebSocket"]],[null,t,["Array","Object","String","Date","Function","RegExp","Event","Error"]],["Array.prototype",t.Array.prototype,["push","pop","indexOf","includes","sort","splice","slice","shift","unshift","map","forEach"]],["Object",t.Object,["keys","values"]],["Object.prototype",t.Object.prototype,["hasOwnProperty"]],["String",t.String,["fromCharCode"]],["String.prototype",t.String.prototype,["indexOf","charAt","charCodeAt","trim","toLowerCase","toUpperCase","slice","replace","match"]],["Math",t.Math,["random","round","floor","ceil","abs"]],["Date",t.Date,["now"]],["Date.prototype",t.Date.prototype,["getTime","toISOString"]],["Function.prototype",t.Function.prototype,["bind","apply","call"]],["RegExp.prototype",t.RegExp.prototype,["test","exec"]],["Event.prototype",t.Event.prototype,["preventDefault","stopPropagation"]],["document",t.document,["createElement","addEventListener","removeEventListener"]],["JSON",t.JSON,["stringify","parse"]],["localStorage",t.localStorage,["setItem","getItem","removeItem"]],["sessionStorage",t.sessionStorage,["setItem","getItem","removeItem"]]],c=[],a=0;a<s.length;a++)if(void 0===(n=(i=s[a])[1]))c.push(i[0]||"[root]");else for(var r=i[2]||[],o=0;o<r.length;o++)void 0===(e=n[r[o]])||this.v.test(""+e)||(null!==i[0]?c.push(i[0]+"."+r[o]):c.push(r[o]));0<c.length&&console.warn('[WARNING] Crisp found shims of native JavaScript methods. This can alter the chatbox behavior and break things. Make sure not to override listed functions to ensure your chatbox works as expected. You may be looking for other JavaScript libraries in use on this page.\n\nYou can disable this warning by adding: $crisp.push(["safe", true]) to your page JavaScript.\n\nMethods to check:',c)}}catch(t){}},J.prototype.c=function(){try{this.a=null}catch(t){}},new J),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x.Utility=(P.prototype.reset=function(){try{this.c()}catch(t){}},P.prototype.get_or_fallback=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=t;try{e=null!==n?(void 0===t?"undefined":r(t))!==n?i:t:t||i}catch(t){}finally{return e}},P.prototype.lower_string_first=function(t){var i=t;try{t&&(i=""+t.charAt(0).toLowerCase()+t.slice(1))}catch(t){}finally{return i}},P.prototype.pad_number=function(t){var i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"00",e=n;try{0<=t&&(i=n.length-Math.ceil((t+1)/10),e=t?n.substr(0,i)+t:n)}catch(t){}finally{return e}},P.prototype.filter_link_safe=function(t){var i="#";try{t&&!1===this.m.test(t)&&(i=t)}catch(t){}finally{return i}},P.prototype.filter_image_url_resize=function(t,i,n){var e="";try{e=t.substring(0,x.Base._.length)===x.Base._?t:x.Base._+"/process/resize/?url="+encodeURIComponent(t)+"&width="+i+"&height="+n}catch(t){}finally{return e}},P.prototype.to_hashcode=function(t){var i=0;try{if(0<t.length)for(var n=0;n<t.length;n++)i=(i<<5)-i+t.charCodeAt(n),i&=i}catch(t){}finally{return i}},P.prototype.is_empty=function(t){var i=!0;try{0<this.keys(t).length&&(i=!1)}catch(t){}finally{return i}},P.prototype.is_equal=function(t,i){var n=!0;try{var e,s=-1,c=void 0;if((void 0===t?"undefined":r(t))!==(void 0===i?"undefined":r(i)))n=!1;else if(t&&"object"===(void 0===t?"undefined":r(t))&&i&&"object"===(void 0===i?"undefined":r(i)))for(t instanceof Array||i instanceof Array?(c=this.union(t,i),t.length===c.length&&i.length===c.length||(n=!1)):c=this.union(this.keys(t),this.keys(i));++s<c.length&&!0===n;)e=c[s],n=this.is_equal(t[e],i[e]);else n=t===i&&!0}catch(t){}finally{return n}},P.prototype.keys=function(t){var i=[];try{"object"===(void 0===t?"undefined":r(t))&&t&&(i=Object.keys(t))}catch(t){}finally{return i}},P.prototype.clone=function(t){var i=void 0;try{var n,e=void 0,i=Array.isArray(t)?[]:{};for(e in t)n=t[e],i[e]="object"===(void 0===n?"undefined":r(n))?this.clone(n):n}catch(t){}finally{return i}},P.prototype.intersect=function(t,i){var n=[];try{for(var e=0;e<t.length;e++)-1!==i.indexOf(t[e])&&n.push(t[e])}catch(t){}finally{return n}},P.prototype.union=function(t,i){var n=[];try{for(var e=0;e<t.length;e++)-1===n.indexOf(t[e])&&n.push(t[e]);for(var s=0;s<i.length;s++)-1===n.indexOf(i[s])&&n.push(i[s])}catch(t){}finally{return n}},P.prototype.extract=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,s=i||n||"";try{var c=(i||"").trim().match(t),s=c&&c[e]?c[e]:n||""}catch(t){}finally{return s}},P.prototype.compare_rule=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:".",e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:".",s=!1;try{s=-1!==(i=!0===this.g.test(i)?(i=i.replace(this.g,this.w)).replace(this.b,""):i).indexOf("*")?(i=(i=(i=(i=i.replace(this.k,this.F)).replace(this.j,this.q)).replace(this.z,e+"*")).replace(this.C,n+"*"),new RegExp("^"+i+"$").test(t)&&!0):t===i&&!0}catch(t){}finally{return s}},P.prototype.compare_rules=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:".",s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:".",c=!1,a=!1,r=!1;try{if(0<i.length){for(var o=0;o<i.length&&!0!==a;)a=this.compare_rule(t,i[o],e,s),o++;!1===a&&(c=!0)}if(!1===a&&0<n.length){for(var h=0;h<n.length&&!0!==r;)r=this.compare_rule(t,n[h],e,s),h++;c=r}}catch(t){}finally{return c}},P.prototype.normalize_url_path=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",e="";try{i?1<i.length&&"/"!==i[i.length-1]&&"*"!==i[i.length-1]&&(i+="/"):i="/",e=""+n+t+i}catch(t){}finally{return e}},P.prototype.compare_page_rules=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=!1;try{if(0<i.length){var s,c=[],a=[],r=[];null===n&&(n=x.Base.A);for(var o=0;o<i.length;o++){var h=(i[o]||"").trim();h&&((s=(h=!1===this.S.test(h)?this.normalize_url_path(n,h):h).match(this.S))?c.push(this.normalize_url_path(s[2],s[3],s[1])):c.push(""+n+h))}for(var u=t.match(this.S),l=u?this.normalize_url_path(u[2],u[3],u[1]):null,f=0;f<c.length;f++)(!0===this.g.test(c[f])?a:r).push(c[f]);!0===this.compare_rules(l,a,r,"[^/]",".")&&(e=!0)}}catch(t){}finally{return e}},P.prototype.play_media=function(t){try{var i=t.play();void 0!==i&&"function"==typeof i.catch&&i.catch(function(t){})}catch(t){}},P.prototype.acquire_channel_url_regex=function(t,i){var n,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",s=null;try{x.Base.I.channels[t]&&((s=(this.D[t]||{})[i])||(n=x.Chat.Interface.R("helpdesk"),s=new RegExp("^"+x.Library.crisp.web.Parse.escape_regex(n)+e+"$"),this.D[t]=this.D[t]||{},this.D[t][i]=s))}catch(t){}finally{return s}},P.prototype.set_timeout=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=null;try{if(!x.Library.crisp.client.Schedule)throw new Error("Could not set timeout after "+i+"ms, as the schedule wrapper is not yet available");n=x.Library.crisp.client.Schedule.set_timeout(t,i)}catch(t){}finally{return n}},P.prototype.clear_timeout=function(t){try{if(!x.Library.crisp.client.Schedule)throw new Error("Could not clear timeout #"+t+", as the schedule wrapper is not yet available");x.Library.crisp.client.Schedule.clear_timeout(t)}catch(t){}},P.prototype.set_interval=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=null;try{if(!x.Library.crisp.client.Schedule)throw new Error("Could not set interval every "+i+"ms, as the schedule wrapper is not yet available");n=x.Library.crisp.client.Schedule.set_interval(t,i)}catch(t){}finally{return n}},P.prototype.clear_interval=function(t){try{if(!x.Library.crisp.client.Schedule)throw new Error("Could not clear interval #"+t+", as the schedule wrapper is not yet available");x.Library.crisp.client.Schedule.clear_interval(t)}catch(t){}},P.prototype.add_event_listener=function(t,i,n,e){var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};try{if(!x.Library.crisp.client.Listener)throw new Error("Could not add event listener '"+n+"' to '"+i+"' instance, as the listener wrapper is not yet available");x.Library.crisp.client.Listener.add_event(t,i,n,e,s)}catch(t){}},P.prototype.remove_event_listener=function(t,i,n){try{if(!x.Library.crisp.client.Listener)throw new Error("Could not remove event listener '"+n+"' from '"+i+"' instance, as the listener wrapper is not yet available");x.Library.crisp.client.Listener.remove_event(t,i,n)}catch(t){}},P.prototype.reset_instance_children=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{var n,e=null!==i?i:t,s=[];for(n in t){var c=t[n];c!==e&&c&&"object"===(void 0===c?"undefined":r(c))&&"function"==typeof c.reset&&c.reset(s)}for(;0<s.length;)s.shift()()}catch(t){}},P.prototype.c=function(){try{this.D={}}catch(t){}},new P),x.Feature=(L.prototype.reset=function(){try{this.c()}catch(t){}},L.prototype.has_screen_touch=function(){try{return this.B}catch(t){}},L.prototype.has_css_animations=function(){try{return this.O}catch(t){}},L.prototype.has_html_audio=function(){try{return null!==this.U&&!0}catch(t){}},L.prototype.html_audio_format=function(){try{return this.U}catch(t){}},L.prototype.M=function(t){var i=!1;try{i=!!(t in window)}catch(t){}finally{return i}},L.prototype.T=function(t){var i=!1;try{var n=document.documentElement.style,e=["Khtml","Ms","O","Moz","Webkit"],s=e.length;if(t in n)i=!0;else for(t=t.replace(/^[a-z]/,function(t){return t.toUpperCase()});s--;)if(e[s]+t in n){i=!0;break}}catch(t){}finally{return i}},L.prototype.N=function(){var i=this;try{this.B=(this.M("ontouchstart")||0<navigator.maxTouchPoints)&&!0,window.addEventListener("touchstart",function t(){i.B=!0,window.removeEventListener("touchstart",t)},!1)}catch(t){}},L.prototype.L=function(){var t=null;try{var i=document.createElement("audio"),n=!(!i.canPlayType||!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,"")),e=!(!i.canPlayType||!i.canPlayType('audio/mp4; codecs="mp4a.40.2"').replace(/no/,"")),s=!(!i.canPlayType||!i.canPlayType("audio/mpeg;").replace(/no/,""));1==n?t="oga":1==e?t="m4a":1==s&&(t="mp3")}catch(t){}finally{return t}},L.prototype.c=function(){try{this.O=this.T("animation"),this.U=this.L(),this.N()}catch(t){}},new L),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x.Action=(N.prototype.reset=function(){try{void 0===x.Base.P.__spool.pending_actions&&(x.Base.P.__spool.pending_actions=[])}catch(t){}},N.prototype.do_chat_open=function(){!0===x.Chat.J?x.Chat.Interface.H():x.Minimized.Interface.V()},N.prototype.do_chat_close=function(){!0===x.Chat.J&&x.Chat.Interface.W()},N.prototype.do_chat_toggle=function(){!0===this.is_chat_closed()?this.do_chat_open():this.do_chat_close()},N.prototype.do_chat_show=function(){!0===this.is_chat_hidden()&&null!==x.Base.G&&(x.Base.G.safe_css_text("display","block"),x.Chat.Interface.Y())},N.prototype.do_chat_hide=function(){!0===this.is_chat_visible()&&null!==x.Base.G&&x.Base.G.safe_css_text("display","none")},N.prototype.do_helpdesk_search=function(){if(!0!==x.Chat.Interface.K())throw new Error("Helpdesk search is unavailable");this.do_chat_show()},N.prototype.do_helpdesk_article_open=function(t,i){if("string"!=typeof t||!t)throw new Error("Invalid article locale");if("string"!=typeof i||!i)throw new Error("Invalid article slug");if(!0!==x.Chat.Interface.X(t,i))throw new Error("Helpdesk article is unavailable");this.do_chat_show()},N.prototype.do_helpdesk_query=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";x.Base.Z(function(){x.Library.crisp.client.Helpdesk.get_article_search(t,x.Locale.code())})},N.prototype.do_message_send=function(n,e){var s=this;x.Base.Z(function(){var t=s.Q(n,e);if(null!==t.type&&null!==t.content){var i=!0===x.Chat.Message.tt()?s.it:0;switch(t.type){case"text":x.Library.crisp.client.Message.send_text_message(t.content,i);break;case"file":x.Library.crisp.client.Message.send_file_message(t.content.name,t.content.url,t.content.type,i);break;case"animation":x.Library.crisp.client.Message.send_animation_message(t.content.url,t.content.type,i);break;case"audio":x.Library.crisp.client.Message.send_audio_message(t.content.url,t.content.type,t.content.duration,i);break;case"picker":x.Library.crisp.client.Message.send_picker_message(t.content.id,t.content.text,t.content.choices,i);break;case"field":x.Library.crisp.client.Message.send_field_message(t.content.id,t.content.text,t.content.explain,i)}x.Chat.nt()}})},N.prototype.do_message_show=function(i,n){var e=this,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,c=3<arguments.length&&void 0!==arguments[3]&&arguments[3];x.Base.Z(function(){var t=e.Q(i,n);null!==t.type&&null!==t.content&&x.Chat.Message.et(t.type,t.content,s,c)})},N.prototype.do_message_read=function(){!0===x.Chat.J&&x.Library.crisp.client.Message.mark_messages_as_read()},N.prototype.do_message_thread_start=function(t){if("string"!=typeof t||!t)throw new Error("Invalid message thread start text");if(!0!==x.Chat.J)throw new Error("Chat must be active for message thread to start");x.Base.Z(function(){x.Library.crisp.client.Message.send_message_thread("start",t)})},N.prototype.do_message_thread_end=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(t&&("string"!=typeof t||!t))throw new Error("Invalid message thread end text");if(!0!==x.Chat.J)throw new Error("Chat must be active for message thread to end");x.Base.Z(function(){x.Library.crisp.client.Message.send_message_thread("end",t||"")})},N.prototype.do_session_reset=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];x.Base.st(!1,!0),x.Library.crisp.client.Session.reset(),!1===t?(x.Base.ct(),x.Base.reset(),x.Base.at()):document.location.reload(!1)},N.prototype.do_trigger_run=function(t){if(!0!==x.Trigger.rt(t))throw new Error("Trigger does not exist")},N.prototype.is_chat_opened=function(){return!(!0!==x.Chat.Interface.ot||!0!==x.Chat.J)},N.prototype.is_chat_closed=function(){return!1===this.is_chat_opened()&&!0},N.prototype.is_chat_visible=function(){return!1===this.is_chat_hidden()&&!0},N.prototype.is_chat_hidden=function(){return(null===x.Base.G||"none"===x.Base.G.css("display"))&&!0},N.prototype.is_chat_small=function(){return!1===x.Base.ht()&&!0},N.prototype.is_chat_large=function(){return!1===this.is_chat_small()&&!0},N.prototype.is_session_ongoing=function(){return(!0===x.Chat.Message.ut||!0===x.Chat.Message.lt)&&!0},N.prototype.is_website_available=function(){return x.Availability.ft&&!0},N.prototype.get_chat_unread_count=function(){return x.Chat.Notification.dt||0},N.prototype.get_message_text=function(){return!0===x.Chat.J&&x.Chat.Selector.get("form_textarea_message").val()||""},N.prototype.get_session_identifier=function(){return x.Broker.pt||null},N.prototype.get_session_data=function(){return x.Library.crisp.client.Session.get_data(0<arguments.length&&void 0!==arguments[0]?arguments[0]:null)||null},N.prototype.get_user_email=function(){return x.Library.crisp.client.Session.get_email()||null},N.prototype.get_user_phone=function(){return x.Library.crisp.client.Session.get_phone()||null},N.prototype.get_user_nickname=function(){return x.Library.crisp.client.Session.get_nickname()||null},N.prototype.get_user_avatar=function(){return x.Library.crisp.client.Session.get_avatar()||null},N.prototype.get_user_company=function(){var t=x.Library.crisp.client.Session.get_company()||null;return((t||{}).employment||{}).title&&(t.employment=[t.employment.title,t.employment.role]),((t||{}).geolocation||{}).country&&(t.geolocation=[t.geolocation.country,t.geolocation.city||null]),t},N.prototype.set_message_text=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if("string"!=typeof t)throw new Error("Invalid message text");var i=x.Chat.Selector.get("form_textarea_message");i&&!0!==i.is(":disabled")&&(i.val(t),i.trigger("keypress"))},N.prototype.set_session_data=function(c,a){x.Base.Z(function(){for(var t,i=c instanceof Array&&c[0]instanceof Array?c:[[c,a]],n={},e=0;e<i.length;e++){var s=i[e][1];s&&"string"==typeof s&&("false"===s?s=!1:"true"===s?s=!0:!1===isNaN(s)&&(s=Number(s))),n[i[e][0]]=s}if(!0!==x.Validate.is_data(n))throw new Error("Invalid data");for(t in x.Library.crisp.client.Session.set_data(n),n)x.Trigger.vt("user_data",{key:t,value:n[t]})},!0)},N.prototype.set_session_segments=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];x.Base.Z(function(){if(!t||!0!==x.Validate.are_segments(t))throw new Error("Invalid segments value");x.Library.crisp.client.Session.set_segments(t,i)},!0)},N.prototype.set_session_event=function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;x.Base.Z(function(){var t=n instanceof Array&&n[0]instanceof Array?n:[[n,e,s]];if(!0!==x.Validate.are_events(t))throw new Error("Invalid event text or data");x.Library.crisp.client.Session.send_event(t);for(var i=0;i<t.length;i++)x.Trigger.vt("user_event",{text:t[i][0]})},!0)},N.prototype.set_user_email=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(!t||!0!==x.Validate.is_email(t))throw new Error("Invalid email");if(null!==i&&!0!==this.yt.test(i))throw new Error("Invalid verify signature (should be lowercase HMAC-SHA256)");x.Library.crisp.client.Session.set_email(t,!1,i),this.mt(),this._t("user:email:changed",t)},N.prototype.set_user_phone=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(!(t="number"==typeof t?""+t:t)||!0!==x.Validate.is_phone(t))throw new Error("Invalid phone");x.Library.crisp.client.Session.set_phone(t),this.mt(),this._t("user:phone:changed",t)},N.prototype.set_user_nickname=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if("string"!=typeof t||!t)throw new Error("Invalid nickname");x.Library.crisp.client.Session.set_nickname(t),this._t("user:nickname:changed",t)},N.prototype.set_user_avatar=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(!t||!0!==x.Validate.is_avatar(t))throw new Error("Invalid avatar");x.Library.crisp.client.Session.set_avatar(t),this._t("user:avatar:changed",t)},N.prototype.set_user_company=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw new Error("Invalid company name");var n={name:t};if(i.url){if("string"!=typeof i.url)throw new Error("Invalid URL");n.url=i.url}if(i.description){if("string"!=typeof i.description)throw new Error("Invalid description");n.description=i.description}if((i.employment||[])[0]){if("string"!=typeof i.employment[0]||"string"!=typeof i.employment[1])throw new Error("Invalid employment");n.employment={title:i.employment[0],role:i.employment[1]}}if((i.geolocation||[])[0]){if("string"!=typeof i.geolocation[0]||i.geolocation[1]&&"string"!=typeof i.geolocation[1])throw new Error("Invalid geolocation");n.geolocation={country:i.geolocation[0],city:i.geolocation[1]||null}}x.Library.crisp.client.Session.set_company(n)},N.prototype.config_availability_tooltip=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];x.Base.gt("availability_tooltip",t),!0===t&&!0!==x.Base.ht()&&x.Minimized.Interface.wt()},N.prototype.config_hide_vacation=function(){x.Base.gt("hide_vacation",0<arguments.length&&void 0!==arguments[0]&&arguments[0])},N.prototype.config_hide_on_away=function(){x.Base.gt("hide_on_away",0<arguments.length&&void 0!==arguments[0]&&arguments[0])},N.prototype.config_hide_on_mobile=function(){x.Base.gt("hide_on_mobile",0<arguments.length&&void 0!==arguments[0]&&arguments[0])},N.prototype.config_position_reverse=function(){x.Base.gt("position_reverse",0<arguments.length&&void 0!==arguments[0]&&arguments[0])},N.prototype.config_sound_mute=function(){x.Sound.mute(0<arguments.length&&void 0!==arguments[0]&&arguments[0])},N.prototype.config_color_theme=function(){x.Base.bt({color:{theme:0<arguments.length&&void 0!==arguments[0]?arguments[0]:null}})},N.prototype.config_container_index=function(){x.Base.bt({other:{container_index:0<arguments.length&&void 0!==arguments[0]?arguments[0]:null}})},N.prototype.config_show_operator_count=function(){x.Base.bt({other:{show_operator_count:!(0<arguments.length&&void 0!==arguments[0])||arguments[0]}})},N.prototype.kt=function(t,i){if("function"!=typeof i)throw new Error("Handler must be a function");this.xt[t]=i},N.prototype.Ft=function(t){void 0!==this.xt[t]&&delete this.xt[t]},N.prototype._t=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(-1===this.jt.indexOf(t))throw new Error("Event namespace not recognized: "+t);if("function"==typeof this.xt[t])try{this.xt[t].apply(window,i instanceof Array?i:void 0!==i?[i]:[])}catch(t){}},N.prototype.qt=function(){try{var t=x.Base.P.__spool.pending_actions;if(delete x.Base.P.__spool.pending_actions,t&&0<t.length)for(var i=0;i<t.length;i++)try{x.Pipeline.push(t[i])}catch(t){}}catch(t){}},N.prototype.mt=function(){!0===x.Chat.J&&(!0===x.Chat.Message.ut&&x.Chat.Alert.zt("wait_reply","show"),x.Chat.Alert.zt("warn_reply","hide"),x.Chat.Alert.zt("email_invalid","hide"),x.Chat.Intent.zt("identity",!1))},N.prototype.Q=function(t,i){var n={type:null,content:null};switch(t){case"text":if("string"!=typeof i||!i)throw new Error("Invalid text message");n.type="text",n.content=i;break;case"file":if("object"!==(void 0===i?"undefined":r(i))||!i.name||!i.url||!i.type)throw new Error("Invalid file message");n.type="file",n.content={name:i.name,url:i.url,type:i.type};break;case"animation":if("object"!==(void 0===i?"undefined":r(i))||!i.url||!i.type)throw new Error("Invalid animation message");n.type="animation",n.content={url:i.url,type:i.type};break;case"audio":if("object"!==(void 0===i?"undefined":r(i))||!i.url||!i.type||!i.duration)throw new Error("Invalid audio message");n.type="audio",n.content={url:i.url,type:i.type,duration:i.duration};break;case"picker":if("object"!==(void 0===i?"undefined":r(i))||!i.id||!i.text||0===(i.choices||[]).length)throw new Error("Invalid picker message");n.type="picker",n.content={id:i.id,text:i.text,choices:i.choices};break;case"field":if("object"!==(void 0===i?"undefined":r(i))||!i.id||!i.text||!i.explain)throw new Error("Invalid field message");n.type="field",n.content={id:i.id,text:i.text,explain:i.explain}}return n},new N),x.Pipeline=(T.prototype.reset=function(){try{this.c()}catch(t){}},T.prototype.push=function(t){void 0!==((window.$crisp||{}).__spool||{}).pending_actions?window.$crisp.__spool.pending_actions.push(t):t[0]&&void 0!==t[1]&&-1!==this.Et.indexOf(t[0])&&"function"==typeof this[t[0]]&&this[t[0]](t[1],t[2]||[])},T.prototype.get=function(t){return this.Ct("get",t,this.At(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]))},T.prototype.set=function(t){return this.Ct("set",t,this.At(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]))},T.prototype.is=function(t){return this.Ct("is",t)},T.prototype.do=function(t){return this.Ct("do",t,this.At(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]))},T.prototype.on=function(t,i){return this.St("on",t,[t,i])},T.prototype.off=function(t){return this.St("off",t,[t])},T.prototype.config=function(t){return this.Ct("config",t,this.At(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]))},T.prototype.safe=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];if("boolean"!=typeof t)throw new Error("Safe mode value must be 'true' or 'false'.");this.o=t},T.prototype.help=function(){var t,i=[];for(t in x.Action){var n=t.split("_");1<n.length&&-1!==this.Et.indexOf(n[0])&&"function"==typeof x.Action[t]&&i.push("$crisp."+n[0]+"('"+n.slice(1).join(":")+"')")}for(var e=0;e<this.It.length;e++)for(var s=0;s<x.Action.jt.length;s++)i.push("$crisp."+this.It[e]+"('"+x.Action.jt[s]+"')");return i},T.prototype.At=function(t){return t?t instanceof Array?t:[t]:[]},T.prototype.Ct=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];try{var e=t+"_"+(i||"").replace(/:/g,"_");if("function"==typeof x.Action[e])return x.Action[e].apply(x.Action,n);this.Dt(i)}catch(t){if(!0!==this.o)throw t}},T.prototype.St=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];try{var e=x.Action.Rt[t];if("function"!=typeof e)throw new Error("No such event method for action: "+t);if(-1!==x.Action.jt.indexOf(i))return e.apply(x.Action,n);this.Dt(i)}catch(t){if(!0!==this.o)throw t}},T.prototype.Dt=function(t){throw new Error("No such namespace: "+t+" - Call $crisp.help() for a list of available actions.")},T.prototype.c=function(){try{this.o=!1}catch(t){}},new T),x.Validate=(M.prototype.is_email=function(t){var i=!1;try{t.match(this.Bt)&&(i=!0)}catch(t){}finally{return i}},M.prototype.is_phone=function(t){var i=!1;try{t.match(this.Ot)&&(i=!0)}catch(t){}finally{return i}},M.prototype.is_avatar=function(t){var i=!1;try{t.match(this.Ut)&&(i=!0)}catch(t){}finally{return i}},M.prototype.is_data=function(t){var i=!1;try{if(t instanceof Object)for(var n in i=0<x.Utility.keys(t).length&&!0,t){var e=t[n];("string"!=typeof n||!0!==this.$t.test(n)||"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e)&&(i=!1)}}catch(t){}finally{return i}},M.prototype.are_events=function(t){var i=!1;try{if(t instanceof Array)for(var i=0<t.length&&!0,n=0;n<t.length;n++)"string"==typeof t[n][0]&&t[n][0]&&(!1!==x.Utility.is_empty(t[n][1])||!1!==this.is_data(t[n][1]))||(i=!1)}catch(t){}finally{return i}},M.prototype.are_segments=function(t){var i=!1;try{if(t instanceof Array)for(var i=!0,n=[],e=0;e<t.length;e++){var s=(t[e]||"").trim();if(!s||s.length>this.Mt||-1!==n.indexOf(s)){i=!1;break}n.push(s)}}catch(t){}finally{return i}},new M),x.Date=($.prototype.timestamp_to_iso=function(t){try{return new Date(t).toISOString()}catch(t){}},$.prototype.iso_to_timestamp=function(t){try{return new Date(t).getTime()}catch(t){}},$.prototype.timestamp_to_properties=function(t){var i,n,e,s={day:"none",month:"none",year:"none",title:null};try{0<t&&(i=new Date(t),n=x.Locale.text("days",this.Tt[i.getDay()]),e=x.Locale.text("months",this.Nt[i.getMonth()]),s.day=""+i.getDate(),s.month=""+(i.getMonth()+1),s.year=""+i.getFullYear(),s.title=n+", "+i.getDate()+" "+e,(new Date).getYear()!==i.getYear()&&(s.title+=" ("+s.year+")"))}catch(t){}finally{return s}},$.prototype.seconds_in_timestamp=function(t){var i=0;try{if(isNaN(t))throw new Error("Timestamp is not a number");i=Math.floor(parseInt(t,10)/this.Lt)}catch(t){}finally{return i}},$.prototype.timestamp=function(){try{return(new Date).getTime()}catch(t){}},$.prototype.difference=function(t,i){var n=-1;try{n=this.iso_to_timestamp(t)-this.iso_to_timestamp(i)}catch(t){}finally{return n}},$.prototype.equal=function(t,i){var n=!1;try{n=0===this.difference(t,i)&&!0}catch(t){}finally{return n}},$.prototype.format_time=function(t){var i,n,e,s=1<arguments.length&&void 0!==arguments[1]&&arguments[1],c="0:00";try{0<=t&&(t=Math.round(t),i=Math.floor(t/this.Pt),n=Math.floor(t%this.Pt/this.Jt),e=t%this.Jt%this.Pt,c=0<i||!0===s?i+":"+x.Utility.pad_number(n,"00")+":"+x.Utility.pad_number(e,"00"):n+":"+x.Utility.pad_number(e,"00"))}catch(t){}finally{return c}},$.prototype.format_date=function(t){var i=null;try{var n=new Date,e=new Date(t),s=n.getTime()-e.getTime(),c=this.Ht(s);if(c.type||(c.type="far_away",c.data={date_full:e.toLocaleDateString()}),!(i=x.Library.dom(x.Template.render("date_"+c.type,c.data)).text()))throw new Error("Empty parsed date for ISO string: "+t)}catch(t){}finally{return i}},$.prototype.format_duration=function(t){var i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=null;try{var e=this.Ht(t,i);if(e.type||(e.type="days"),!(n=x.Library.dom(x.Template.render("duration_"+e.type,e.data)).text()))throw new Error("Empty parsed duration for duration: "+t)}catch(t){}finally{return n}},$.prototype.digest=function(){var s=this;try{null!==x.Base.G&&x.Base.G.find('[data-date-iso][data-date-watch="true"]').each(function(t,i,n){var e=n.eq(i),n=e.attr("data-date-iso"),i=e.attr("data-date-format"),n=s.format_date(n);i&&(n=x.Library.crisp.web.Parse.replace(i,[x.Utility.lower_string_first(n)])),e.text(n)})}catch(t){}},$.prototype.watch=function(){var t=this;try{x.Utility.set_timeout(function(){try{t.digest(),t.watch()}catch(t){}},this.Vt*this.Lt)}catch(t){}},$.prototype.Ht=function(t){var i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n={};try{var e=Math.round(t/this.Lt);e<10&&!0===i?n.type="now":e<this.Jt?n.type="seconds":e<this.Pt?(n.type="minutes",n.data={minutes:Math.floor(e/this.Jt)}):e<this.Wt&&(n.type="hours",n.data={hours:Math.floor(e/this.Pt)})}catch(t){}finally{return n}},new $),x.Theme=(U.prototype.colors=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n={};try{var e,s=!0!==i?x.Plugin.get_customization("color","chatbox"):{},c=this.Gt[t]||this.Gt[this.Yt];for(e in this.Kt(s,c),s)n[e]={hex:s[e],rgba:this.Xt.p(this,s[e])}}catch(t){}finally{return n}},U.prototype.Kt=function(t,i){try{for(var n in i)t[n]||(t[n]=i[n])}catch(t){}},U.prototype.Xt=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n="rgba(0, 0, 0, 1)";try{var e=[0,0,0],s=t.match(this.Zt);s&&(e[0]=parseInt(s[1],this.Qt),e[1]=parseInt(s[2],this.Qt),e[2]=parseInt(s[3],this.Qt)),n="rgba("+e[0]+", "+e[1]+", "+e[2]+", "+i+")"}catch(t){}finally{return n}},new U),x.Plugin=(O.prototype.get_triggers=function(){var t={};try{t=((x.Base.I.plugins["urn:crisp.im:triggers:0"]||{}).settings||{}).triggers||{}}catch(t){}finally{return t}},O.prototype.get_customization=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=null;try{e=(((x.Base.I.plugins["urn:crisp.im:customization:0"]||{}).settings||{})[t]||{})[i]||{},n&&(e=e[n]||null)}catch(t){}finally{return e}},new O),x.Sound=(B.prototype.reset=function(){try{this.stop(),this.c()}catch(t){}},B.prototype.allow=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];try{this.ti=t}catch(t){}},B.prototype.mute=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];try{this.ii=t}catch(t){}},B.prototype.initialize=function(t){try{if(!1===this.ti)return;this.ni[t]=this.ni[t]||{};for(var i=this.ei[t],n=0;n<i.length;n++)void 0===this.ni[t][i[n]]&&this.si(t,i[n])}catch(t){}},B.prototype.start=function(n,e){var s=this,c=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:50;try{if(!1===this.ti)return;if(!0===x.Feature.has_html_audio()&&!0===this.ci(n)){var t=this.ei[n];if(void 0===t)throw new Error("Subset does not exist: "+n);if(-1===t.indexOf(e))throw new Error("Sound does not exist: "+e+" in subset "+n);this.stop(),this.si(n,e,function(t){var i;null!==s.ai&&("suspended"===s.ai.state&&s.ai.resume(),(i=s.ai.createGain()).gain.setValueAtTime(a/100,0),i.connect(s.ai.destination),s.ri=s.ai.createBufferSource(),s.ri.buffer=t,s.ri.loop=c,s.ri.connect(i),s.ri.start(),s.oi=n,s.hi=e)},function(t){})}}catch(t){}},B.prototype.stop=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;try{null===this.ri||null!==t&&t!==this.oi||null!==i&&i!==this.hi||(this.ri.stop(),this.ri=null,this.oi=null,this.hi=null)}catch(t){}},B.prototype.si=function(i,n){var t,e,s=this,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){};try{this.ni[i]=this.ni[i]||{},this.ui[i]=this.ui[i]||{},void 0===this.ui[i][n]?(this.ui[i][n]={success:[c],error:[a]},void 0!==this.ni[i][n]?this.li("success",i,n,this.ni[i][n]):(t=this.fi(i,n))&&((e=new XMLHttpRequest).open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){null===s.ai&&(s.ai=s.di()),null!==s.ai?s.ai.decodeAudioData(e.response,function(t){s.ni[i][n]=t,s.li("success",i,n,t)},function(t){s.li("error",i,n,t)}):s.li("error",i,n)},e.onerror=function(t){s.li("error",i,n,t)},e.send())):(this.ui[i][n].success.push(c),this.ui[i][n].error.push(a))}catch(t){}},B.prototype.li=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=(this.ui[i]||{})[n];if(void 0!==s){for(var c=0;c<s[t].length;c++)s[t][c](e);delete this.ui[i][n]}},B.prototype.fi=function(t,i){var n=null;try{var e=x.Feature.html_audio_format();null!==e&&(n=x.Base.pi+"/static/sounds/"+t+"/"+i+"."+e+"?"+x.Base.vi)}catch(t){}finally{return n}},B.prototype.di=function(){var t=null;try{try{!0===x.Event.yi&&("function"==typeof AudioContext?t=new AudioContext:"function"==typeof webkitAudioContext&&(t=new webkitAudioContext))}catch(t){}}catch(t){}finally{return t}},B.prototype.ci=function(t){var i=!0;try{var n=!this.ii&&!0,e="call"===t||!0!==x.Library.crisp.client.Call.is_ongoing(),i=n&&e&&!0}catch(t){}finally{return i}},B.prototype.c=function(){try{this.ti=!0,this.ii=!1,this.ai=null,this.ri=null,this.oi=null,this.hi=null,this.ni={},this.ui={}}catch(t){}},new B),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x.Locale=(R.prototype.reset=function(){try{this.c()}catch(t){}},R.prototype.detect=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=this.mi;try{var n=void 0,e=void 0,s=[];for(t.length&&(this._i=x.Utility.intersect(t,this.gi),0<this._i.length&&-1===this._i.indexOf(i)&&(i=this.mi=this._i[0])),n=0;n<x.Base.wi.length;n++)(e=x.Base.wi[n])&&(s.push(e.toLowerCase()),-1!==e.indexOf("-")&&(e=e.split("-")[0])&&s.push(e.toLowerCase()));for(n=0;n<s.length;n++)if(-1!==this._i.indexOf(s[n])){i=s[n];break}}catch(t){}finally{return i}},R.prototype.load=function(t,i){var n=this;try{var e=t;-1===this._i.indexOf(t)&&(e=this.mi),null!==this.bi&&this.bi.ki.locale_code!==t&&(this.bi=null),null===this.bi?x.Base.xi("locale","locales/"+e+".js",function(t){try{n.Fi(e,t,i)}catch(t){}}):"function"==typeof i&&i()}catch(t){}},R.prototype.name=function(){var t=null;try{if(null===this.bi)throw new Error("Cannot get locale name, locale data not loaded");t=this.bi.ki.locale_name}catch(t){}finally{return t}},R.prototype.code=function(){var t=null;try{if(null===this.bi)throw new Error("Cannot get locale code, locale data not loaded");t=this.bi.ki.locale_code}catch(t){}finally{return t}},R.prototype.direction=function(){var t=null;try{if(null===this.bi)throw new Error("Cannot get locale direction, locale data not loaded");t=this.bi.ki.locale_direction,-1===this.ji.indexOf(t)&&(t=this.qi)}catch(t){}finally{return t}},R.prototype.text=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],e=null;try{var s=void 0,c=void 0;if("object"===(void 0===i?"undefined":r(i))?(s=i[0],c=i[1]):s=c=i,null===this.bi)throw new Error("Cannot get locale text, locale data not loaded");if(void 0===this.bi.zi[t])throw new Error("Locale text group not found: "+t);if(void 0===this.bi.zi[t][c])throw new Error("Locale text namespace not found in group: "+c+" in "+t);e=x.Plugin.get_customization("text",t,s)||this.bi.zi[t][c],e=x.Library.crisp.web.Parse.replace(e,n),e=this.Ei(e)}catch(t){}finally{return e}},R.prototype.Fi=function(t,i,n){try{if(null!==this.bi)throw new Error("Locale has already been loaded (double requested handled?)");if("object"!==(void 0===i?"undefined":r(i)))throw new Error("Did not receive a proper locale data file");if(i.ki.locale_code!==t)throw new Error("Received a mismatching locale code, expected: "+t);this.bi=i,"function"==typeof n&&n()}catch(t){}finally{return null}},R.prototype.Ei=function(i){var n=null;try{try{n=decodeURIComponent(escape(i))}catch(t){n=i}}catch(t){}finally{return n}},R.prototype.c=function(){try{this.bi=null}catch(t){}},new R),x.Avatar=(D.prototype.url=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s="";try{s=e?e.substring(0,x.Base._.length)===x.Base._?e:x.Base._+"/process/thumbnail/?url="+encodeURIComponent(e)+"&width="+t+"&height="+t+"&"+x.Base.I.website.buster:x.Base._+"/avatar/"+i+"/"+(n||"default")+"/"+t+"/?"+x.Base.I.website.buster}catch(t){}finally{return s}},D.prototype.active_operators=function(t,i){var n=[];try{var e=i.website.active_operators;if(0<e.length)for(var s=0;s<e.length;s++)s<this.Ci&&n.push({type:"operator",identifier:e[s].user_id,avatar:e[s].avatar,name:x.Library.crisp.web.Name.parse_first_name(e[s].nickname)});else n.push({type:"website",identifier:t,name:i.website.name})}catch(t){}finally{return n}},D.prototype.count_other_operators=function(t){var i=0;try{var n=(t.website.active_operators||[]).length||0;t.website.count_operators>n&&(i=Math.min(this.Ai,t.website.count_operators-n))}catch(t){}finally{return i}},new D),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x.Template=(I.prototype.render=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e="";try{if("function"!=typeof x.Library.jade.client[t])throw new Error("No such template: "+t);if("object"!==(void 0===i?"undefined":r(i)))throw new Error("Object argument is not an object");if(i._e=x.Locale.text.p(x.Locale),i._f=x.Library.crisp.web.Parse.format.p(x.Library.crisp.web.Parse),i._n=x.Library.crisp.web.Name.parse_first_name.p(x.Library.crisp.web.Name),i._a=x.Avatar.url.p(x.Avatar),!1===x.Utility.is_empty(n))for(var s in n)void 0===i[s]&&(i[s]=n[s]);e=x.Library.jade.client[t](i).trim()}catch(t){}finally{return e}},new I),x.Broker=(S.prototype.init=function(t,i,n,e,s,c,a,r,o,h,u,l,f,d){var p=!(14<arguments.length&&void 0!==arguments[14])||arguments[14];try{x.Library.crisp.client.init({environment:t,url_relay_client:i,url_relay_stream:n,url_go:e,website_domain:s,website_id:c,token_id:a,cookie_expire:r,cookie_domain:o,useragent:h,timezone:u,capabilities:l,locales:f,runtime_configuration:d,connect_socket:p,platform_name:"crisp-client",platform_signature_key:"25/2z/2h/3e/33/34/2g/20/2i/1v/2t/24/24/3c/2s/22"}),this.Si=x.Library.crisp.client.event,x.Base.Ii(),this.Di(),this.Ri(),this.Bi(),this.Oi(),this.Ui(),this.$i(),this.Mi(),this.Ti(),this.Ni(),this.Li(),this.Pi(),this.Ji(),this.Hi(),this.Vi(),this.Wi(),this.Gi(),this.Yi(),this.Ki(),this.Xi(),this.Zi(),this.Qi(),this.tn(),this.in(),this.nn(),this.en(),this.sn(),this.cn(),this.an(),this.rn(),this.hn(),this.un(),this.ln(),this.dn(),this.pn(),this.vn(),this.yn(),this.mn(),this.gn(),this.wn(),this.bn(),this.kn(),this.xn(),this.Fn(),this.jn(),this.qn(),this.zn(),this.En(),this.Cn(),this.An()}catch(t){}},S.prototype.reset=function(){try{this.c()}catch(t){}},S.prototype.Di=function(){var n=this;try{this.Si.subscribe("socket:state",function(t,i){!0!==x.Chat.J||i.connected===n.Sn&&i.failed_reconnect===n.In||(n.Sn=i.connected||!1,n.In=i.failed_reconnect||!1,x.Chat.Interface.Dn(n.Sn,n.In),!0===n.Sn&&x.Event.check_activity_autokill())})}catch(t){}},S.prototype.Ri=function(){var n=this;try{this.Si.subscribe("session:created",function(t,i){i.error?"invalid_website_id"===i.error&&x.Base.run_error():i.session_id&&(n.Rn=!0)})}catch(t){}},S.prototype.Bi=function(){var n=this;try{this.Si.subscribe("session:joined",function(t,i){i.error?"invalid_session"===i.error&&++n.Bn<=n.On&&x.Library.crisp.client.Session.reset(function(){x.Library.crisp.client.Session.create()},function(){}):(n.pt=i.session_id||null,n.Un=i.session_hash||null,!1===i.socket&&!0!==i.initiated&&x.Base.st(!0),!0===n.$n?(n.$n=!1,x.Base.Mn(i,function(t,i,n){!0!==n&&(x.Base.spawn_client(t),x.Library.crisp.client.Website.get_users_available())})):!0===x.Chat.J&&x.Chat.Message.Tn())})}catch(t){}},S.prototype.Oi=function(){var e=this;try{this.Si.subscribe("session:state",function(t,i){if(1===e.Nn&&(e.Nn++,e.Ln=!0),!1===x.Chat.J){if(null!==e.Pn.master){e.Pn.master(x.Utility.is_empty(i)?null:i);for(var n=0;n<e.Pn.actions.length;n++)e.Pn.actions[n]();e.Pn.master=null,e.Pn.actions=[]}else x.Utility.is_empty(i)?(x.Minimized.init(!0,e.Rn),x.Library.crisp.client.Session.get_request_initiate()):x.Chat.init(i);x.Base.Jn()}else!0===x.Chat.J&&x.Chat.State.receive(i);e.Hn()})}catch(t){}},S.prototype.Ui=function(){try{this.Si.subscribe("session:error",function(t,i){"email:invalid_format"===i.type&&x.Chat.Alert.zt({warn_reply:"hide",wait_reply:"hide",email_invalid:"show"})})}catch(t){}},S.prototype.$i=function(){try{this.Si.subscribe("session:request:initiate",function(t,i){})}catch(t){}},S.prototype.Mi=function(){try{this.Si.subscribe("session:request:purge",function(t,i){x.Action.do_session_reset()})}catch(t){}},S.prototype.Ti=function(){var n=this;try{this.Si.subscribe("website:users:available",function(t,i){x.Availability.receive(i.available,i.changed),0===n.Nn?(n.Nn++,x.Library.crisp.client.Session.get_state()):x.Availability.apply()})}catch(t){}},S.prototype.Ni=function(){var n=this;try{this.Si.subscribe("message:received",function(t,i){n.Vn(i)})}catch(t){}},S.prototype.Li=function(){var n=this;try{this.Si.subscribe("message:received:local",function(t,i){n.Vn(i)})}catch(t){}},S.prototype.Pi=function(){try{this.Si.subscribe("message:send",function(t,i){!0===x.Chat.J&&x.Chat.Message.sent(i)})}catch(t){}},S.prototype.Ji=function(){try{this.Si.subscribe("message:sent",function(t,i){!0===x.Chat.J&&x.Chat.Message.sent_acknowledgement(i),x.Action._t("message:sent",i)})}catch(t){}},S.prototype.Vi=function(){try{this.Si.subscribe("message:compose:send",function(t,i){x.Action._t("message:compose:sent",i)})}catch(t){}},S.prototype.Wi=function(){try{this.Si.subscribe("message:acknowledge:pending",function(t,i){})}catch(t){}},S.prototype.Gi=function(){try{this.Si.subscribe("message:acknowledge:read:send",function(t,i){x.Chat.Message.Wn(i)})}catch(t){}},S.prototype.Yi=function(){try{this.Si.subscribe("message:acknowledge:read:received",function(t,i){})}catch(t){}},S.prototype.Ki=function(){try{this.Si.subscribe("message:thread",function(t,i){})}catch(t){}},S.prototype.Hi=function(){try{this.Si.subscribe("message:compose:received",function(t,i){if(!0===x.Chat.J&&!0!==x.Base.I.chat.operator_privacy)switch(i.type){case"start":x.Chat.Message.Gn(i.timestamp);break;case"stop":x.Chat.Message.Yn()}x.Action._t("message:compose:received",i)})}catch(t){}},S.prototype.Xi=function(){try{this.Si.subscribe("history:message:received",function(t,i){!0===x.Chat.J&&x.Chat.Message.received_from_history(i)})}catch(t){}},S.prototype.Zi=function(){try{this.Si.subscribe("history:message:sent",function(t,i){!0===x.Chat.J&&x.Chat.Message.sent_from_history(i)})}catch(t){}},S.prototype.Qi=function(){try{this.Si.subscribe("call:request:initiate",function(t,i){x.Library.crisp.client.Call.init({ice:x.Base.Kn,call_id:i.call_id,mode:i.mode,has_support:i.has_support},function(){x.Call.ring(i)},function(){})})}catch(t){}},S.prototype.tn=function(){try{this.Si.subscribe("call:action:stopped",function(t,i){x.Call.stop(i)})}catch(t){}},S.prototype.in=function(){try{this.Si.subscribe("call:peer:local:error",function(t,i){x.Call.error("peer_local")})}catch(t){}},S.prototype.nn=function(){try{this.Si.subscribe("call:peer:remote:error",function(t,i){x.Call.error("peer_remote")})}catch(t){}},S.prototype.en=function(){try{this.Si.subscribe("call:media:local:success",function(t,i){x.Call.success("media_local")})}catch(t){}},S.prototype.sn=function(){try{this.Si.subscribe("call:media:local:error",function(t,i){x.Call.error("media_local")})}catch(t){}},S.prototype.cn=function(){try{this.Si.subscribe("call:media:remote:success",function(t,i){x.Call.success("media_remote")})}catch(t){}},S.prototype.an=function(){try{this.Si.subscribe("call:track:local:started",function(t,i){x.Call.toggle_media_status(i.media,!0)})}catch(t){}},S.prototype.rn=function(){try{this.Si.subscribe("call:track:local:ended",function(t,i){x.Call.toggle_media_status(i.media,!1)})}catch(t){}},S.prototype.hn=function(){var n=this;try{this.Si.subscribe("browsing:request:initiate",function(t,i){n.Xn.push(function(){x.Base.xi("browsing","browsing.js",function(t){try{x.Library.crisp.client.Browsing.init({resume:i.resume||!1,deps:{tree_mirror:t.TreeMirrorClient}},function(){},function(){})}catch(t){}})}),n.Hn()})}catch(t){}},S.prototype.un=function(){try{this.Si.subscribe("browsing:assist:started",function(t,i){x.Browsing.Assist.start()})}catch(t){}},S.prototype.ln=function(){try{this.Si.subscribe("browsing:assist:stopped",function(t,i){x.Browsing.Assist.stop()})}catch(t){}},S.prototype.dn=function(){try{this.Si.subscribe("browsing:assist:mouse",function(t,i){x.Browsing.Assist.Zn(i)})}catch(t){}},S.prototype.pn=function(){try{this.Si.subscribe("browsing:assist:scroll",function(t,i){x.Browsing.Assist.Qn(i)})}catch(t){}},S.prototype.vn=function(){try{this.Si.subscribe("browsing:assist:click",function(t,i){x.Browsing.Assist.te(i)})}catch(t){}},S.prototype.yn=function(){var n=this;try{this.Si.subscribe("bucket:url:upload:generate",function(t,i){n.ie.bucket_url_upload_generate=i.id})}catch(t){}},S.prototype.mn=function(){var c=this;try{this.Si.subscribe("bucket:url:upload:generated",function(t,i){var n,e,s;c.ie.bucket_url_upload_generate===i.id&&"preparing"===x.Chat.Selector.get("form_button_attach").attr("data-state")&&(n=x.Chat.Selector.get("form_message"),e=(i.url||{}).signed||"",s=(i.url||{}).resource||"",i=(i.policy||{}).size_limit||0,e&&s?(n.attr("data-action",e),n.attr("data-resource",s),n.attr("data-size-limit",i)):(n.removeAttr("data-action"),n.removeAttr("data-resource"),n.removeAttr("data-size-limit")),n.trigger("event:attach"))})}catch(t){}},S.prototype.gn=function(){var n=this;try{this.Si.subscribe("media:animation:list",function(t,i){n.ie.media_animation_list=i.id})}catch(t){}},S.prototype.wn=function(){var n=this;try{this.Si.subscribe("media:animation:listed",function(t,i){n.ie.media_animation_list===i.id&&x.Chat.Picker.ne(i.results)})}catch(t){}},S.prototype.bn=function(){var n=this;try{this.Si.subscribe("helpdesk:article:search",function(t,i){n.ie.helpdesk_article_search=i.id})}catch(t){}},S.prototype.kn=function(){var r=this;try{this.Si.subscribe("helpdesk:article:searched",function(t,i){if(r.ie.helpdesk_article_search===i.id){var n=!(!i.search.query&&0===i.results.length);x.Chat.Interface.ee(i.results,i.search,n);var e=x.Chat.Interface.R("helpdesk");if(e){for(var s,c=[],a=0;a<i.results.length;a++)s=i.results[a],c.push({title:s.title,url:""+e+s.locale+"/article/"+s.slug+"/"});x.Action._t("helpdesk:queried",{query:i.search.query,results:c})}}})}catch(t){}},S.prototype.xn=function(){var n=this;try{this.Si.subscribe("helpdesk:article:suggest",function(t,i){n.ie.helpdesk_article_suggest=i.id})}catch(t){}},S.prototype.Fn=function(){var n=this;try{this.Si.subscribe("helpdesk:article:suggested",function(t,i){n.ie.helpdesk_article_suggest===i.id&&x.Chat.Interface.se(i.results)})}catch(t){}},S.prototype.jn=function(){try{this.Si.subscribe("helpdesk:article:report",function(t,i){})}catch(t){}},S.prototype.qn=function(){try{this.Si.subscribe("storage:sync:update",function(t,i){})}catch(t){}},S.prototype.zn=function(){try{this.Si.subscribe("storage:sync:updated",function(t,i){})}catch(t){}},S.prototype.En=function(){try{this.Si.subscribe("trigger:fired",function(t,i){})}catch(t){}},S.prototype.Cn=function(){try{this.Si.subscribe("issue:report",function(t,i){})}catch(t){}},S.prototype.An=function(){try{this.Si.subscribe("window:history",function(t,i){x.Base.ce=i.page_url,x.Base.ae=i.page_domain,i=x.Base.re(),null!==x.Base.G&&(x.Base.G.attr("data-blocked",!0===i?"true":"false"),!0===x.Chat.J&&!1===i&&x.Chat.Interface.Y()),x.Trigger.oe()})}catch(t){}},S.prototype.Vn=function(t){try{x.Chat.he();var i="network"===t.origin&&!0;x.Chat.Message.received(t,i,i,!0,!1),x.Action._t("message:received",t)}catch(t){}},S.prototype.Hn=function(){try{if(!0===this.Ln)for(;0<this.Xn.length;)this.Xn.shift()()}catch(t){}},S.prototype.c=function(){try{this.pt=null,this.Un=null,this.Sn=!0,this.ie={},this.Pn={master:null,actions:[]},this.Si=null,this.Rn=!1,this.$n=!0,this.In=!1,this.Nn=0,this.Ln=!1,this.Xn=[],this.Bn=0}catch(t){}},new S),x.Availability=(A.prototype.init=function(){},A.prototype.reset=function(){try{this.c()}catch(t){}},A.prototype.receive=function(){var t,i,n=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{this.ft=n,!0===e&&(t=x.Date.timestamp(),x.Base.I.website.last_available=t,(i=x.Chat.Selector.get("header_status_type_away"))&&i.attr("data-date-iso",x.Date.timestamp_to_iso(t)),x.Date.digest()),x.Action._t("website:availability:changed",this.ft)}catch(t){}},A.prototype.apply=function(){try{var t=!0===this.ft?"online":"away";null!==x.Base.G&&(x.Base.G.attr("data-availability",t),!1===this.ue&&"online"==t&&(this.ue=!0,x.Base.G.attr("data-was-availability-online","true")))}catch(t){}},A.prototype.c=function(){try{this.ft=!1,this.ue=!1}catch(t){}},new A),x.Event=(C.prototype.init=function(t){try{this.le()}catch(t){}},C.prototype.reset=function(){try{this.c()}catch(t){}},C.prototype.trigger_interacted=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{this.yi=!0,this.fe(),!0===t&&this.de()}catch(t){}},C.prototype.check_activity_autokill=function(){try{null===this.pe&&this.ve(),null===this.ye&&this.me()}catch(t){}},C.prototype.le=function(){try{this.ge(),this.we(),this.be()}catch(t){}},C.prototype.ge=function(){try{x.Utility.add_event_listener(this.ns,"window","resize",function(){try{!0===x.Chat.J?x.Chat.Interface.Y():x.Base.ke()}catch(t){}})}catch(t){}},C.prototype.we=function(){try{this.fe(),x.Utility.add_event_listener(this.ns,"window","click",this.xe.p(this),this.Fe),x.Utility.add_event_listener(this.ns,"window","touchend",this.xe.p(this),this.Fe),x.Utility.add_event_listener(this.ns,"window","touchmove",this.xe.p(this),this.Fe),x.Utility.add_event_listener(this.ns,"window","keydown",this.xe.p(this),this.Fe),x.Utility.add_event_listener(this.ns,"window","mousemove",this.fe.p(this),this.Fe),x.Utility.add_event_listener(this.ns,"window","focus",this.fe.p(this),this.Fe),x.Utility.add_event_listener(this.ns,"window","blur",this.fe.p(this),this.Fe)}catch(t){}},C.prototype.be=function(){try{this.de()}catch(t){}},C.prototype.xe=function(){try{this.trigger_interacted()}catch(t){}},C.prototype.fe=function(){var t=this;try{null!==this.pe&&x.Utility.clear_timeout(this.pe),this.pe=x.Utility.set_timeout(function(){t.pe=null,t.ve()},this.je),!0===this.qe&&!1===this.ze&&x.Library.crisp.client.socket.connect(),this.qe=!1,x.Library.crisp.client.Session.mark_active()}catch(t){}},C.prototype.ve=function(){try{!0===x.Library.crisp.client.socket.connected&&(this.qe=!0,x.Library.crisp.client.socket.disconnect())}catch(t){}},C.prototype.de=function(){var t=this;try{null!==this.ye&&x.Utility.clear_timeout(this.ye),this.ye=x.Utility.set_timeout(function(){t.ye=null,t.me()},this.Ee),!0===this.ze&&x.Library.crisp.client.socket.connect(),this.ze=!1}catch(t){}},C.prototype.me=function(){try{!0!==x.Library.crisp.client.socket.connected&&!0!==this.qe||(this.ze=!0)===x.Library.crisp.client.socket.connected&&x.Library.crisp.client.socket.disconnect()}catch(t){}},C.prototype.c=function(){try{this.yi=!1,this.qe=!1,this.ze=!1,this.pe=null,this.ye=null}catch(t){}},new C);var p=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var n=[],e=!0,s=!1,c=void 0;try{for(var a,r=t[Symbol.iterator]();!(e=(a=r.next()).done)&&(n.push(a.value),!i||n.length!==i);e=!0);}catch(t){s=!0,c=t}finally{try{!e&&r.return&&r.return()}finally{if(s)throw c}}return n}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function h(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}if(x.Trigger=(E.prototype.init=function(t){try{this.Ce=t,this.Ae()}catch(t){}},E.prototype.reset=function(){try{this.c()}catch(t){}},E.prototype.rt=function(t){var i=!1;try{var n=(this.Ce||{})[t];n&&!0===n.enabled&&(this.Et(t,n),i=!0)}catch(t){}finally{return i}},E.prototype.vt=function(t,i){try{for(var n=this.Se[t]||[],e=0;e<n.length;e++)n[e](i)}catch(t){}},E.prototype.Ie=function(t){try{-1===x.Trigger.De.indexOf(t)&&x.Trigger.De.push(t),x.Library.crisp.client.Storage.set_stamp_local(this.Re,[x.Base.Be,"status",t],this.Oe)}catch(t){}},E.prototype.oe=function(){try{var t,i,n,e;for(e in this.Ce)if(!0===(t=this.Ce[e]).enabled&&(i=t.events))for(var s in i)"page"===s&&!0===(n=i[s]).enabled&&this.Ue(e,t,i,n.settings||{})}catch(t){}},E.prototype.Ae=function(){try{var t,i,n,e,s=void 0,c=!1;for(e in this.Ce)if(!0===(t=this.Ce[e]).enabled&&(i=t.events))for(var a in i)!0===(n=i[a]).enabled&&"function"==typeof(s=this.$e[a])&&(s.p(this)(e,t,i,n.settings||{}),c=!0);!0===c&&this.Me()}catch(t){}},E.prototype.Et=function(s,c){var t,a=this;try{!0===this.Te(c)&&!1===this.Ne(s)&&((t=x.Utility.clone(this.De)).push(s),this.Le(function(){x.Chat.State.propagate("trigger",t,!1,function(t){if(!0===t&&!0===a.Te(c)&&c.actions){var i,n,e=void 0;for(n in c.actions)!0===(i=c.actions[n]).enabled&&"function"==typeof(e=a.Pe[n])&&(e.p(a)(s,c,i.settings||{}),x.Library.crisp.client.Trigger.fired(s,c.name))}})}))}catch(t){}},E.prototype.Le=function(t){var i=this;try{x.Base.Z(function(){!0!==i.Je&&(i.Je=!0,x.Chat.he()),t()})}catch(t){}},E.prototype.Te=function(t){var i=!1;try{if(i=!1===x.Base.He(),!0===this.Ve(t,"if_website_online")&&(i=!0===x.Action.is_website_available()&&i),!0===this.Ve(t,"if_first_visit")&&(i="1"===x.Library.crisp.client.Storage.get_stamp_local(this.Re,this.We("count"))&&i),!0===this.Ve(t,"if_trigger_sole")&&(i=!0!==x.Chat.Message.Ge&&i),!0===this.Ve(t,"if_countries")){var n=!1,e=(t.behaviors.if_countries||{}).settings;if(e)for(var s in e)s===x.Base.I.chat.country&&(n=!0);i=!0===n&&i}!1===x.Base.ht()&&!1===this.Ye(t,"desktop")&&(i=!1),!0===x.Base.ht()&&!1===this.Ye(t,"mobile")&&(i=!1)}catch(t){}finally{return i}},E.prototype.Ke=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=100;try{!0===t&&i.after&&0<i.after&&(n=i.after*this.Lt)}catch(t){}finally{return n}},E.prototype.Xe=function(t,i,n,e){try{if(e.after&&0<e.after){var s,c=!1;for(s in n)if("delay"!==s&&!0===n[s].enabled){c=!0;break}!1===c&&this.Ze(t,i,{enabled:!0,settings:e})}}catch(t){}},E.prototype.Qe=function(i,n,e,t){var s=this;try{for(var c=!0,a=0;a<this.ts.length;a++){var r=this.ts[a];if(!0===(e[r]||{}).enabled&&!1===(c=this.es[r].p(this)(e)))break}!0===c&&(x.Utility.add_event_listener(this.ns,"window","mouseout",function(t){try{!0===s.ss&&!t.relatedTarget&&!t.toElement&&t.clientY<=s.cs&&(s.ss=!1,null===s.as&&(s.as=s.Ze(i,n,e.delay)))}catch(t){}}),x.Utility.add_event_listener(this.ns,"window","mouseover",function(){try{!0!==s.ss&&(s.ss=!0,null!==s.as&&(x.Utility.clear_timeout(s.as),s.as=null))}catch(t){}}))}catch(t){}},E.prototype.rs=function(a,r,o,h){var u=this;try{h.ids&&0<h.ids.length&&x.Utility.add_event_listener(this.ns,"document","click",function(t){try{if(t&&t.target&&"a"===(t.target.nodeName||"").toLowerCase())for(var i=0;i<h.ids.length;i++){var n=document.getElementById(h.ids[i]),e="function"==typeof document.querySelectorAll?document.querySelectorAll(h.ids[i]):null,s=!1;if(e&&0<e.length)for(var c=0;c<e.length;c++)if(e[c]===t.target){s=!0;break}if(n===t.target||!0===s){u.Ze(a,r,o.delay);break}}}catch(t){}})}catch(t){}},E.prototype.Ue=function(t,i,n,e){try{!0!==(n.leave||{}).enabled&&!0===this.os(n)&&this.Ze(t,i,n.delay)}catch(t){}},E.prototype.hs=function(t,i,n,e){try{!0!==(n.leave||{}).enabled&&!0===this.us(n)&&this.Ze(t,i,n.delay)}catch(t){}},E.prototype.ls=function(i,n,e,s){var c=this;try{s.points&&0<x.Utility.keys(s.points).length&&this.ds("user_data",function(t){t.key&&t.value&&s.points[t.key]===t.value&&c.Ze(i,n,e.delay)})}catch(t){}},E.prototype.ps=function(i,n,e,s){var c=this;try{s.texts&&0<s.texts.length&&this.ds("user_event",function(t){-1!==s.texts.indexOf(t.text)&&c.Ze(i,n,e.delay)})}catch(t){}},E.prototype.vs=function(t,i,n){var e,s,c;try{!n||(e=(n[x.Locale.code()]||n.default||"").trim())&&(s=x.Utility.to_hashcode("trigger/"+t),!(c=!1)===this.Ve(i,"show_as_website")&&(c=!0),x.Action.do_message_show("text",e,s,c))}catch(t){}},E.prototype.ys=function(t,i,n){try{x.Action.do_chat_open()}catch(t){}},E.prototype._s=function(t,i,n){try{x.Sound.start("events","chat-message-receive")}catch(t){}},E.prototype.os=function(t){var i=!1;try{var n=(t.page||{}).settings;n&&n.urls&&0<n.urls.length&&(i=x.Utility.compare_page_rules(x.Base.ce,n.urls))}catch(t){}finally{return i}},E.prototype.us=function(t){var i=!1;try{var n=(t.url_parameter||{}).settings||{};if(0<x.Utility.keys(n.parameters||{}).length){for(var e,s=document.location.search||"",c=s.slice(s.indexOf("?")+1).split("&"),a={},r=0;r<c.length;r++){var o=c[r].split("="),h=p(o,2),u=h[0],l=h[1];u&&(a[u.toLowerCase()]=decodeURIComponent(l||"").toLowerCase())}for(e in n.parameters){var f=e.toLowerCase(),d=n.parameters[f].toLowerCase()+"";if(a[f]===d){i=!0;break}}}}catch(t){}finally{return i}},E.prototype.Ze=function(t,i){var n=this,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=null;try{s=x.Utility.set_timeout(function(){n.Et(t,i)},this.Ke((e||{}).enabled,(e||{}).settings))}catch(t){}finally{return s}},E.prototype.ds=function(t,i){try{this.Se[t]=this.Se[t]||[],this.Se[t].push(i)}catch(t){}},E.prototype.Ve=function(t,i){var n=!1;try{!0===((t.behaviors||{})[i]||{}).enabled&&(n=!0)}catch(t){}finally{return n}},E.prototype.Ne=function(t){var i=!1;try{1!=(i=-1!==this.De.indexOf(t)&&!0)&&(i=x.Library.crisp.client.Storage.get_stamp_local(this.Re,[x.Base.Be,"status",t])===this.Oe&&!0)}catch(t){}finally{return i}},E.prototype.Ye=function(t,i){var n=!0;try{!1===((t.platforms||{})[i]||{}).enabled&&(n=!1)}catch(t){}finally{return n}},E.prototype.Me=function(){try{var t=this.We("last"),i=this.We("count"),n=parseInt(x.Library.crisp.client.Storage.get_stamp_local(this.Re,t)||"0",10),e=parseInt(x.Library.crisp.client.Storage.get_stamp_local(this.Re,i)||"0",10),s=x.Date.timestamp();(isNaN(n)||isNaN(e)||e<=0||s-n>=this.gs)&&(e+=1,n=s,x.Library.crisp.client.Storage.set_stamp_local(this.Re,i,""+e)),x.Library.crisp.client.Storage.set_stamp_local(this.Re,t,""+s)}catch(t){}},E.prototype.We=function(t){var i=[];try{i=[x.Base.Be,"visit",t]}catch(t){}finally{return i}},E.prototype.c=function(){try{this.De=[],this.Ce=null,this.Je=!1,this.ss=!1,this.as=null,this.cs=10,this.Se={}}catch(t){}},new E),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x.Base=(z.prototype.init=function(){var i=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};try{!1===this.J&&(this.J=!0,this.P=t.dollar_crisp||null,this.bs=t.project_name||null,this.ks=t.url_relay_client||null,this.xs=t.url_relay_stream||null,this.Fs=t.url_website||null,this.js=t.url_go||null,this._=t.url_image||null,this.qs=t.url_game||null,this.pi=t.url_assets||null,this.Kn=t.rtc_ice||null,this.zs=t.client_environment||null,this.vi=t.client_revision||null,this.A=t.website_domain||null,this.Be=t.website_id||null,this.Es=t.token_id||null,this.Cs=t.cookie_expire||null,this.As=t.cookie_domain||null,this.ce=t.page_url||null,this.ae=t.page_domain||null,this.Ss=t.browser_useragent||null,this.Is=t.browser_timezone||null,this.Ds=t.browser_capabilities||null,this.wi=t.browser_locales||null,this.Rs=t.ready_trigger||null,this.Bs=t.reset_handler||null,this.Os=t.runtime_configuration||{},x.Polyfill.schedule_warn_incompatible(!1),this.Us(function(t){i.$s=t.socket,i.Ms=t.buster||1,!0===(t=!1==(t=-1===document.cookie.indexOf(i.Ts(!0))&&!1!==i.$s&&!0)&&!0===i.Os.lock_maximized||t)?i.Ns():i.Ls(),x.Event.init()},function(t){"invalid_website_id"===t&&i.run_error()}))}catch(t){}},z.prototype.reset=function(){try{var t=this.Bs;x.Utility.reset_instance_children(x,this),this.c(),this.Ps(),this.Bs=t}catch(t){}},z.prototype.spawn_client=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{this.Js(),this.I=t,x.Library.crisp.web.init({template:x.Template,config:{url:{crisp_image:this._},runtime:this.Os}}),!0!==i&&(x.Library.crisp.client.Config.set_ignore_privacy(this.I.chat.ignore_privacy),x.Library.crisp.client.Config.set_visitor_compose(this.I.chat.visitor_compose)),x.Trigger.init(x.Plugin.get_triggers());var n=this.re();this.Hs=x.Library.dom(x.Template.render("client",{lang:x.Locale.code(),direction:x.Locale.direction(),blocked:n||!1,lock_maximized:this.Os.lock_maximized||!1,last_operator_face:!0===this.I.chat.last_operator_face&&0<this.I.website.active_operators.length,availability_tooltip:this.I.chat.availability_tooltip,hide_vacation:this.I.chat.hide_vacation,hide_on_away:this.I.chat.hide_on_away,hide_on_mobile:this.I.chat.hide_on_mobile,position_reverse:this.I.chat.position_reverse,full_view:this.ht(),small_view:this.Vs(),large_view:this.Ws()})),this.Gs=this.Hs.find(".cc-l3zb"),this.G=this.Hs.find(".cc-kv6t"),this.bt(),this.Ys()}catch(t){}},z.prototype.run_error=function(){var t=this;try{x.Locale.load(x.Broker.Ks.chat.locale,function(){t.spawn_client(x.Broker.Ks,!0),x.Minimized.init(!0,!1,!0)})}catch(t){}},z.prototype.ke=function(){try{null!==this.G&&(this.G.attr("data-full-view",!0===this.ht()?"true":"false"),this.G.attr("data-small-view",!0===this.Vs()?"true":"false"),this.G.attr("data-large-view",!0===this.Ws()?"true":"false"))}catch(t){}},z.prototype.ht=function(){try{return!0===this.Os.lock_full_view||window.innerHeight<window.innerWidth&&window.innerHeight<this.Xs||window.innerWidth<this.Xs}catch(t){}},z.prototype.Ws=function(){try{return window.innerHeight<window.innerWidth&&window.innerHeight>=this.Zs||window.innerWidth<window.innerHeight&&window.innerWidth>=this.Zs}catch(t){}},z.prototype.Vs=function(){try{return window.innerHeight<window.innerWidth&&window.innerHeight<this.Qs||window.innerWidth<window.innerHeight&&window.innerWidth<this.Qs}catch(t){}},z.prototype.He=function(){try{if(!0!==this.Os.lock_maximized&&(!0!==x.Chat.Message.Ge||!0===this.tc())){if(!0===this.ic())return!0;if(!0===this.I.chat.hide_vacation)return!0;if(!0===this.I.chat.hide_on_away&&!1===x.Availability.ue&&!0!==x.Availability.ft)return!0;if(!0===this.I.chat.hide_on_mobile&&!0===this.Vs())return!0}return!1}catch(t){}},z.prototype.ic=function(){try{return(!0===this.nc||!0===this.ec)&&!0}catch(t){}},z.prototype.tc=function(){try{return 0<x.Chat.Message.sc&&x.Date.timestamp()-x.Chat.Message.sc>=this.cc}catch(t){}},z.prototype.re=function(){try{var t=x.Locale.code();return this.nc=!(!(0<this.I.chat.allowed_pages.length)||x.Utility.compare_page_rules(this.ce,this.I.chat.allowed_pages))||x.Utility.compare_page_rules(this.ce,this.I.chat.blocked_pages)&&!0,this.ec=-1!==this.I.chat.blocked_locales.indexOf(t),this.ic()||!1}catch(t){}},z.prototype.Jn=function(){try{if("function"==typeof this.Rs)try{this.Rs(),this.Rs=null}catch(t){}x.Action.qt(),x.Action._t("session:loaded",x.Broker.pt),x.Polyfill.schedule_warn_incompatible(!0)}catch(t){}},z.prototype.st=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{var n=this.Ts(t),e=void 0,e=!0===i?new Date(0):new Date((new Date).getTime()+(!0===t?this.ac:this.rc));document.cookie=n+"; expires="+e.toUTCString()+"; path=/; samesite=lax;"}catch(t){}},z.prototype.gt=function(t){var i,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{r((this.I.chat||{})[t])===(void 0===n?"undefined":r(n))&&(this.I.chat[t]=n,null!==this.G&&(i=t.replace(this.oc,"-"),this.G.attr("data-"+i,!0===n?"true":"false")))}catch(t){}},z.prototype.bt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};try{var i,n=this.hc;for(i in t)if(t.hasOwnProperty(i)){n[i]=n[i]||{};var e=t[i];if(null!==e)for(var s in e)e.hasOwnProperty(s)&&(n[i][s]=e[s])}this.Gs.empty(),this.Gs.append(x.Library.dom(x.Template.render("style_color",{colors:x.Theme.colors(n.color.theme||this.I.chat.theme,!!n.color.theme)}))),this.Gs.append(x.Library.dom(x.Template.render("style_other",{container_index:("number"==typeof n.other.container_index?n:this.uc).other.container_index,show_operator_count:("boolean"==typeof n.other.show_operator_count?n:this.uc).other.show_operator_count})));var c=x.Plugin.get_customization("position","chatbox");x.Utility.is_empty(c)||this.Gs.append(x.Library.dom(x.Template.render("style_position",{position:c})))}catch(t){}},z.prototype.xi=function(t,i,n){var e=this,s=3<arguments.length&&void 0!==arguments[3]&&arguments[3],c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;try{var a,r=t+"_handler",o=document.createElement("script");o.type="text/javascript",o.async=1,!0===s?(a=i+"?callback="+encodeURIComponent("window.$crisp.__spool."+r),c&&(a+="&"+encodeURIComponent(c)),o.src=a):o.src=[this.pi+"/static/javascripts/"+i,"?"+this.vi].join(""),this.P.__spool[r]=function(t){o.parentNode.removeChild(o),delete e.P.__spool[r],"function"==typeof n&&n(t)};var h=document.getElementsByTagName("head");h&&h[0]&&h[0].appendChild(o)}catch(t){}},z.prototype.Mn=function(e,s){var c=this,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;try{this.xi("website",[this.pi+"/settings/website/",encodeURIComponent(this.Be)+"/"].join(""),function(t){var i=!(t&&!t.error);(t=t||{}).settings=t.settings||{};var n={website:{name:t.website||"",domain:x.Utility.extract(c.lc,t.domain,c.A,1),mailer:t.mailer||"",buster:e.buster||1,count_operators:e.count_operators||0,active_operators:e.active_operators||t.operators||[],response_metrics:e.response_metrics||{},last_available:e.last_available||x.Date.timestamp(),status:e.status||null,trial:t.trial||!1},channels:t.channels||{},plugins:t.plugins||{},chat:{country:x.Utility.get_or_fallback((e.context||{}).country,null),locale:x.Locale.detect(t.settings.locale?[t.settings.locale]:[]),theme:x.Utility.get_or_fallback(t.settings.color_theme,"default"),allowed_pages:x.Utility.get_or_fallback(t.settings.allowed_pages,[]),blocked_pages:x.Utility.get_or_fallback(t.settings.blocked_pages,[]),blocked_locales:x.Utility.get_or_fallback(t.settings.blocked_locales,[]),tile:x.Utility.get_or_fallback(t.settings.tile,"default","string"),last_operator_face:x.Utility.get_or_fallback(t.settings.last_operator_face,!1,"boolean"),ongoing_operator_face:x.Utility.get_or_fallback(t.settings.ongoing_operator_face,!0,"boolean"),activity_metrics:x.Utility.get_or_fallback(t.settings.activity_metrics,!0,"boolean"),operator_privacy:x.Utility.get_or_fallback(t.settings.operator_privacy,!1,"boolean"),availability_tooltip:x.Utility.get_or_fallback(t.settings.availability_tooltip,!0,"boolean"),hide_vacation:x.Utility.get_or_fallback(t.settings.hide_vacation,!1,"boolean"),hide_on_away:x.Utility.get_or_fallback(t.settings.hide_on_away,!1,"boolean"),hide_on_mobile:x.Utility.get_or_fallback(t.settings.hide_on_mobile,!1,"boolean"),position_reverse:x.Utility.get_or_fallback(t.settings.position_reverse,!1,"boolean"),email_visitors:x.Utility.get_or_fallback(t.settings.email_visitors,!0,"boolean"),phone_visitors:x.Utility.get_or_fallback(t.settings.phone_visitors,!0,"boolean"),force_identify:x.Utility.get_or_fallback(t.settings.force_identify,!1,"boolean"),ignore_privacy:x.Utility.get_or_fallback(t.settings.ignore_privacy,!1,"boolean"),visitor_compose:x.Utility.get_or_fallback(t.settings.visitor_compose,!0,"boolean"),file_transfer:x.Utility.get_or_fallback(t.settings.file_transfer,!0,"boolean"),helpdesk_link:x.Utility.get_or_fallback(t.settings.helpdesk_link,!0,"boolean"),status_health_dead:x.Utility.get_or_fallback(t.settings.status_health_dead,!0,"boolean"),wait_game:x.Utility.get_or_fallback(t.settings.wait_game,!1,"boolean"),theme_text:x.Utility.get_or_fallback(t.settings.text_theme,"default"),theme_welcome:x.Utility.get_or_fallback(t.settings.welcome_message,"default")}};x.Locale.load(n.chat.locale,function(){s(n,t,i)})},!0,t||e.buster)}catch(t){}},z.prototype.Z=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!0===x.Library.crisp.client.socket.connected?t():!1!==this.$s&&(x.Broker.Pn.actions.push(t),null===x.Broker.Pn.master&&(x.Broker.Pn.master=function(){!0===i&&x.Minimized.init(!0,!1,!1,!1)}),x.Library.crisp.client.socket.connect())},z.prototype.Ii=function(){var s=this;try{"production"===this.zs&&(x.Library.crisp.client.Issue.configure({project:this.bs,revision:this.vi,environment:this.zs,useragent:this.Ss,page:this.ce}),x.Library.logger.set_log_sink(function(t,i,n){var e;"error"===t&&("object"===r((s.P||{}).__spool)&&(s.P.__spool.error_last={ns:i,value:n}),(e=x.Date.timestamp())-s.fc>=s.dc&&(s.fc=e,x.Library.crisp.client.Issue.report(t,i,n)))}))}catch(t){}},z.prototype.ct=function(){try{"MutationObserver"in window&&(this.pc("html"),this.pc("body")),x.Library.crisp.client.socket.disconnect(),this.Js()}catch(t){}},z.prototype.at=function(){try{"function"==typeof this.Bs&&this.Bs()}catch(t){}},z.prototype.Us=function(n,e){var s=this;try{var t=new Date,i=t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate()+"-"+t.getHours()+"-"+t.getMinutes();this.xi("website",[this.pi+"/settings/website/",encodeURIComponent(this.Be)+"/prelude/"].join(""),function(t){var i=t&&t.error?t.error:null;i?e(i):n(t||s.vc)},!0,i)}catch(t){}},z.prototype.Ys=function(){try{this.yc(),"MutationObserver"in window&&(this.mc(document.documentElement),this._c(document.body))}catch(t){}},z.prototype.yc=function(){try{var t=x.Library.dom("body")||[];0<t.length&&t.append(this.Hs)}catch(t){}},z.prototype.Js=function(){try{null!==this.Hs&&(this.Hs.remove(),this.Hs=null)}catch(t){}},z.prototype.Ns=function(){try{this.gc(!0)}catch(t){}},z.prototype.Ls=function(){var e=this;try{this.gc(!1),this.Mn({},function(t,i,n){!0!==n&&x.Availability.receive(i.online||!1,!1),e.spawn_client(t),x.Minimized.init(!1,!1,n),e.Jn()},this.Ms)}catch(t){}},z.prototype.gc=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{x.Broker.init(this.zs,this.ks,this.xs,this.js,this.A,this.Be,this.Es,this.Cs,this.As,this.Ss,this.Is,this.Ds,this.wi,this.Os,t)}catch(t){}},z.prototype.mc=function(t){var c=this;try{this.pc("html"),this.wc.html=new MutationObserver(function(t){for(var i=0;i<(t||[]).length;i++){var n=t[i];if("childList"===n.type&&n.addedNodes)for(var e=0;e<n.addedNodes.length;e++){var s=n.addedNodes[e];if("body"===(s.tagName||"").toLowerCase()){c._c(s),c.bc();break}}}}),this.wc.html.observe(t,this.kc)}catch(t){}},z.prototype._c=function(t){var s=this;try{this.pc("body"),this.wc.body=new MutationObserver(function(t){for(var i=0;i<(t||[]).length;i++){var n=t[i];if("childList"===n.type&&n.removedNodes)for(var e=0;e<n.removedNodes.length;e++)if(n.removedNodes[e]===s.Hs[0]){s.bc();break}}}),this.wc.body.observe(t,this.kc)}catch(t){}},z.prototype.pc=function(t){try{var i=this.wc[t];void 0!==i&&(i.disconnect(),delete this.wc[t])}catch(t){}},z.prototype.bc=function(){var t=this;try{null===this.xc&&(this.xc=x.Utility.set_timeout(function(){t.xc=null,t.yc()},this.Fc))}catch(t){}},z.prototype.Ts=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],i=null;try{i=encodeURIComponent("crisp-client/socket/"+this.Be)+"="+encodeURIComponent(!0===t?"0":"1")}catch(t){}finally{return i}},z.prototype.Ps=function(){try{this.Hs=null,this.Gs=null,this.G=null}catch(t){}},z.prototype.c=function(){try{this.J=!1,this.I={},this.P=null,this.bs=null,this.ks=null,this.xs=null,this.Fs=null,this.js=null,this._=null,this.qs=null,this.pi=null,this.Kn=null,this.zs=null,this.vi=null,this.A=null,this.Be=null,this.Es=null,this.Cs=null,this.As=null,this.ce=null,this.ae=null,this.Ss=null,this.Is=null,this.Ds=null,this.wi=null,this.Ms=1,this.$s=!0,this.nc=!1,this.ec=!1,this.Rs=null,this.Bs=null,this.Os={},this.fc=0,this.xc=null,this.hc={color:{},other:{}},this.wc={}}catch(t){}},new z),x.Minimized=(q.prototype.init=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],e=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];try{this.jc(n),this.qc(i,n,t,e),this.J=!0}catch(t){}},q.prototype.reset=function(){try{x.Utility.reset_instance_children(x.Minimized),this.c()}catch(t){}},q.prototype.jc=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{for(var i=void 0,n=[x.Minimized.Interface,x.Minimized.Selector,x.Minimized.Event],i=0;i<n.length;i++)n[i].init(t)}catch(t){}},q.prototype.qc=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],e=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];try{!0!==i?x.Minimized.Interface.zc(t,n,e):x.Minimized.Interface.Ec(t,e),!0===x.Base.Os.lock_maximized&&x.Minimized.Interface.V()}catch(t){}},q.prototype.c=function(){try{this.J=!1}catch(t){}},new q),x.Minimized.Event=(j.prototype.init=function(){},j.prototype.Cc=function(t){try{x.Minimized.Selector.Ac.on("click",function(t){try{var i,n=t.target?x.Library.dom(t.target):null,e=n?n.attr("data-pop"):null;!n||e||(i=n.parents("[data-pop]"))&&i[0]&&(e=i.attr("data-pop")||null),e?"spotlight"===e&&x.Action.do_helpdesk_search():n&&n.is(".cc-g0ak")?x.Minimized.Interface.Sc():x.Minimized.Interface.V()}catch(t){}finally{return!1}}),x.Minimized.Selector.Ac[0].onclick=function(){return!1}}catch(t){}},new j),x.Minimized.Interface=(F.prototype.init=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{this.qc(t)}catch(t){}},F.prototype.reset=function(){try{this.c()}catch(t){}},F.prototype.zc=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=this,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];try{var s=!1,c={conceal_general_entice:!1,helpdesk:{url:null}};!0===x.Base.I.chat.availability_tooltip&&(c.conceal_general_entice=x.Library.crisp.client.Storage.get_stamp_local(this.Ic,[x.Base.Be,"general_entice","conceal"])===this.Dc&&!0),!0===x.Base.I.chat.helpdesk_link&&x.Base.I.channels.helpdesk&&x.Base.ae!==x.Base.I.channels.helpdesk&&!0===x.Library.crisp.client.socket.connected&&(c.helpdesk.url=x.Chat.Interface.R("helpdesk")),this.Rc("minimized_authorized",!0,t,i,c),this.V=function(){var i;!1===s&&(!(s=!0)===e?(n.Bc(!0),x.Event.trigger_interacted(!0),i=x.Utility.set_timeout(function(){x.Broker.pt||(alert(x.Locale.text("chat","minimized_connect_alert_failure")),x.Library.crisp.client.socket.disconnect(),n.Bc(!1),x.Action.do_chat_hide())},n.Oc),x.Broker.Pn.master=function(t){x.Utility.clear_timeout(i),x.Chat.init(t)},x.Library.crisp.client.socket.connect()):x.Chat.init())},x.Availability.apply(),x.Minimized.Event.Cc()}catch(t){}},F.prototype.Ec=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{this.Rc("minimized_unauthorized",!1,t,i),this.V=function(){},x.Minimized.Event.Cc()}catch(t){}},F.prototype.wt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{var i=null!==t?t:x.Minimized.Selector.Uc.find([".cc-1bue",'[data-id="general_entice"]'].join(""));i&&i.safe_css_text("display","block")}catch(t){}},F.prototype.Sc=function(){try{var t=x.Minimized.Selector.Uc.find([".cc-1bue",'[data-id="general_entice"]'].join(""));t&&t.attr("data-is-concealed","true"),x.Library.crisp.client.Storage.set_stamp_local(this.Ic,[x.Base.Be,"general_entice","conceal"],this.Dc)}catch(t){}},F.prototype.Rc=function(t){var i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],e=this,s=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};try{var a,r,o=x.Base.I,h={configuration:o,methods:{active_operators:x.Avatar.active_operators.p(x.Avatar)},website:{id:x.Base.Be}};for(a in c)h[a]=c[a];x.Minimized.Selector.$c=x.Library.dom(x.Template.render(t,h)),x.Base.G.empty(),x.Base.G.append(x.Minimized.Selector.$c),x.Minimized.Selector.Mc(),!0===i&&(r=!0!==x.Base.ht()&&!0===o.chat.availability_tooltip?x.Minimized.Selector.Uc.find([".cc-1bue",'[data-id="general_entice"]'].join("")):null,!0===s&&x.Feature.has_css_animations()?(!0===n&&(x.Minimized.Selector.Ac.addClass("cc-9axk"),x.Utility.set_timeout(function(){x.Minimized.Selector.Ac.removeClass("cc-9axk")},this.Tc)),null!==r&&x.Utility.set_timeout(function(){e.wt(r);var t=!0===n?"cc-z74s":"cc-phpq";r.addClass(t),x.Utility.set_timeout(function(){r.removeClass(t)},e.Nc)},this.Lt*(!0===n?this.Lc:this.Pc))):null!==r&&this.wt(r))}catch(t){}},F.prototype.Bc=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];try{var i=!0===t?"none":"block",n=!0===t?"block":"none";x.Minimized.Selector.Ac.find(".cc-15mo").safe_css_text("display",i),x.Minimized.Selector.Ac.find(".cc-1yxw").safe_css_text("display",n)}catch(t){}},F.prototype.qc=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{!0!==t&&x.Library.crisp.client.Message.get_message_history()}catch(t){}},F.prototype.c=function(){try{this.V=function(){}}catch(t){}},new F),x.Minimized.Selector=(k.prototype.init=function(){},k.prototype.reset=function(){try{this.c()}catch(t){}},k.prototype.Mc=function(){try{this.Jc(),this.Hc()}catch(t){}},k.prototype.Jc=function(){try{this.Ac=this.$c.find(".cc-unoo")}catch(t){}},k.prototype.Hc=function(){try{this.Uc=this.Ac.find(".cc-1c9v")}catch(t){}},k.prototype.c=function(){try{this.$c=null,this.Ac=null,this.Uc=null}catch(t){}},new k),x.Chat=(b.prototype.init=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{this.jc(),null!==t&&x.Chat.State.Vc(t),null===t&&x.Action._t("chat:initiated"),this.qc(),x.Base.st(!1),this.J=!0}catch(t){}},b.prototype.reset=function(){try{x.Utility.reset_instance_children(x.Chat),this.c()}catch(t){}},b.prototype.he=function(){try{this.Wc(!1)}catch(t){}},b.prototype.nt=function(){try{this.Wc(!0)}catch(t){}},b.prototype.Wc=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{!0!==this.J&&(this.init({maximized:t}),x.Chat.State.propagate("maximized",t,!0))}catch(t){}},b.prototype.jc=function(){try{for(var t=void 0,i=[x.Chat.Alert,x.Chat.Intent,x.Chat.Field,x.Chat.Interface,x.Chat.Message,x.Chat.Misc,x.Chat.Notification,x.Chat.Scroll,x.Chat.State,x.Chat.Selector,x.Chat.Event,x.Chat.Viewport],t=0;t<i.length;t++)i[t].init()}catch(t){}},b.prototype.qc=function(){try{x.Chat.Interface.Gc(),x.Chat.Field.Yc(),x.Availability.apply(),x.Library.crisp.client.Socket.get_state(),x.Sound.initialize("events"),x.Chat.Message.Vc(),x.Date.watch()}catch(t){}},b.prototype.c=function(){try{this.J=!1}catch(t){}},new b),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x.Chat.Alert=(w.prototype.init=function(){},w.prototype.reset=function(){try{this.c()}catch(t){}},w.prototype.zt=function(t,i){try{var n,e=void 0,s=void 0,c=void 0;"object"===(void 0===t?"undefined":r(t))?e=t:(e={})[t]=i;var a=x.Utility.clone(this.Kc);for(s in e)e.hasOwnProperty(s)&&(n=e[s],c=!1,void 0!==this.Kc[s]&&this.Kc[s]===n&&(c=!0),!1===(c="lock"===this.Kc[s]&&"unlock"!==n||c)&&(a[s]=n));x.Chat.State.propagate("alert",a)}catch(t){}},w.prototype.Xc=function(t){var i=!1;try{i=("show"===this.Kc[t]||"unlock"===this.Kc[t])&&!0}catch(t){}finally{return i}},w.prototype.Zc=function(t,i){try{var n=this.Qc[i];"function"==typeof n&&n.p(this)(t)}catch(t){}},w.prototype.ta=function(t){try{this.ia(t)}catch(t){}},w.prototype.na=function(t){try{this.ia(t)}catch(t){}},w.prototype.ia=function(t){try{"show"===t?x.Chat.Message.ea():x.Chat.Message.sa()}catch(t){}},w.prototype.c=function(){try{this.Kc={}}catch(t){}},new w),x.Chat.Intent=(g.prototype.init=function(){},g.prototype.reset=function(){try{this.c()}catch(t){}},g.prototype.zt=function(t){var i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",e=2<arguments.length&&void 0!==arguments[2]&&arguments[2];try{if(-1===this.ca.indexOf(t))throw new Error("Unknown intent: "+t);!0!==e&&!1===this.Kc[t]||(i=x.Utility.clone(this.Kc),n||!1===n?i[t]=n:delete i[t],x.Chat.State.propagate("intent",i))}catch(t){}},g.prototype.aa=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{for(var i,n=void 0,n=0;n<this.ca.length;n++)i=this.ca[n],(t||this.Kc)[i]||this.ra(i,null)}catch(t){}},g.prototype.ra=function(t){var i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default",e=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];try{-1===this.ca.indexOf(t)||"function"==typeof(i=this.oa[t])&&i.p(this)(n,e)}catch(t){}},g.prototype.ha=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default",i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{t?"default"===t?x.Chat.Message.ua(i):x.Chat.Message.la(t,i):x.Chat.Message.fa()}catch(t){}},g.prototype.da=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default",i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{t?x.Chat.Message.pa(i):x.Chat.Message.va()}catch(t){}},g.prototype.c=function(){try{this.Kc={}}catch(t){}},new g),x.Chat.Picker=(_.prototype.init=function(){},_.prototype.reset=function(){try{this.c()}catch(t){}},_.prototype.ya=function(){var t=!1;try{t=null!==this.ma&&!0}catch(t){}finally{return t}},_.prototype.ra=function(t){try{var i,n=x.Chat.Selector.get("pickers").find([".cc-5ftt",'[data-type="'+t+'"]'].join(""));0<n.length&&(i=this.ya(),this.ga(),x.Chat.Selector.get("pickers").attr("data-has-animation",!1===i?"true":"false"),this.wa(t,n),x.Chat.Field.Yc())}catch(t){}},_.prototype.ga=function(){try{(this.ba=null)!==this.ma&&(x.Chat.Selector.get("pickers_inner_one").safe_css_text("display","none"),x.Chat.Selector.get("content").removeAttr("data-has-picker-"+this.ma),x.Chat.Selector.get("pickers_selector_one").removeClass("cc-1ada"),x.Chat.Selector.get("pickers_selector_one").addClass("cc-183m"),x.Library.dom([".cc-dnqb",'[data-removable="true"]'].join("")).remove(),this.ma=null)}catch(t){}},_.prototype.ka=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";try{if(null!==x.Chat.Event.xa&&(x.Utility.clear_timeout(x.Chat.Event.xa),x.Chat.Event.xa=null),this.ba!==t){this.ba=t;var i=x.Chat.Selector.get("pickers_gif").find(".cc-yb0h"),n=x.Chat.Selector.get("pickers_gif").find(".cc-1ydc"),e=x.Template.render("chat_picker_gif_item");i.empty(),n.safe_css_text("display","none"),i.safe_css_text("display","block"),x.Chat.Selector.get("pickers_gif").attr("data-has-search",t?"true":"false"),x.Chat.Selector.get("pickers_search_input").val()!==t&&x.Chat.Selector.get("pickers_search_input").val(t||"");for(var s=0;s<this.Fa;s++)i.append(e);x.Chat.Event.ja(i),x.Library.crisp.client.Media.get_animation_list(t)}}catch(t){}},_.prototype.ne=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];try{var t=x.Chat.Selector.get("pickers_gif").find(".cc-dnqb"),s=0;t&&0<t.length&&(t.each(function(t,i,n){n=n.eq(i),e[i]&&e[i].type&&e[i].url?(n.attr("data-type",e[i].type),n.attr("data-url",e[i].url),n.safe_css_text("background-image","url('"+x.Base._+"/process/original/?url="+encodeURIComponent(e[i].url)+"')"),n.removeAttr("data-loading"),s++):n.remove()}),0===s&&(x.Chat.Selector.get("pickers_gif").find(".cc-yb0h").safe_css_text("display","none"),x.Chat.Selector.get("pickers_gif").find(".cc-1ydc").safe_css_text("display","block")))}catch(t){}},_.prototype.wa=function(t,i){try{i.safe_css_text("display","block"),x.Chat.Selector.get("content").attr("data-has-picker-"+t,"true");var n=x.Chat.Selector.get("pickers").find([".cc-mxq4",'[data-type="'+t+'"]'].join(""));n.removeClass("cc-183m"),n.addClass("cc-1ada"),this.ma=t;var e=this.qa[t];"function"==typeof e&&e.p(this)()}catch(t){}},_.prototype.za=function(){try{this.ka()}catch(t){}},_.prototype.c=function(){try{this.ma=null,this.ba=null}catch(t){}},new _),x.Chat.Event=(m.prototype.init=function(){},m.prototype.reset=function(){try{this.c()}catch(t){}},m.prototype.Mc=function(){try{this.Ea(),this.Ca(),this.Aa(),this.Sa(),this.Ia(),this.Da(),this.Ra(),this.Ba(),this.Oa(),this.Ua(),this.$a(),this.Ma(),this.Ta(),this.Na(),this.La(),this.Pa(),this.Ja(),this.Ha()}catch(t){}},m.prototype.Va=function(t){var e,i;try{x.Base.I.channels.helpdesk&&x.Base.ae!==x.Base.I.channels.helpdesk&&!0!==x.Feature.has_screen_touch()&&(null===(e=x.Utility.acquire_channel_url_regex("helpdesk","article","([^/]+)/article/([^/]+)/.*"))||0<(i=t.find("a[href]")||[]).length&&i.each(function(t){var i,n=t.getAttribute("href");!n||(i=n.match(e))&&i[1]&&i[2]&&(t.onclick=function(){return x.Action.do_helpdesk_article_open(i[1],i[2]),!1})}))}catch(t){}},m.prototype.Wa=function(t){try{var i=t.find('.cc-djxv[data-target="helpdesk"]')||[];0<i.length&&i.each(function(t){t.onclick=function(){return x.Event.trigger_interacted(!0),x.Action.do_helpdesk_search(),!1}})}catch(t){}},m.prototype.Ga=function(t){try{var i=t.find('.cc-djxv[data-type="embed"], .cc-1fry')||[];if(0<i.length){i.on("click",function(t){try{var i=t.target?x.Library.dom(t.target):[];0<(i=i.is("a[href]")?i:i.parents("a[href]")).length&&x.Chat.Interface.Ya("embed",i.attr("href"))}catch(t){}finally{return!1}}),this.Ka(i);for(var n=0;n<i.length;n++)i[n].onclick=function(){return!1}}}catch(t){}},m.prototype.Xa=function(t){try{var i=t.find(".cc-17m8")||[];0<i.length&&(i.on("click",function(){try{x.Chat.Interface.Ya(i.attr("data-action"),i.attr("href"),i.attr("data-name"),t.attr("data-fingerprint"))}catch(t){}finally{return!1}}),this.Ka(i),i[0].onclick=function(){return!1})}catch(t){}},m.prototype.Za=function(t,n){try{var i,e=!1,s=t.find(".cc-1qf4")||[],c=t.find(".cc-784v")||[],a=t.find(".cc-u2t4")||[],r=t.find(".cc-cccw")||[],o=t.find(".cc-1ep3")||[];0<r.length&&(i=r.find("source")||[],0<s.length&&(r[0].addEventListener("play",function(){s.attr("data-state","loading")}),r[0].addEventListener("pause",function(){s.attr("data-state","paused")}),r[0].addEventListener("canplay",function(){s.attr("data-state","playing")}),r[0].addEventListener("stalled",function(){s.attr("data-state","none")})),0<i.length&&i.each(function(t){t.addEventListener("error",function(){r[0].paused||r[0].pause(),e=!0,alert(x.Locale.text("chat","chat_message_audio_play_error"))})}),0<o.length&&0<a.length&&r[0].addEventListener("timeupdate",function(t){var i;t.target&&(t=0===(i=(i=Math.ceil(t.target.currentTime/t.target.duration*100))<100?i:0)?n.content.duration||0:Math.floor(t.target.currentTime),a.text(x.Date.format_time(t)),o.safe_css_text("width",i+"%"))})),0<c.length&&(c.on("click",function(){try{0<r.length&&(r[0].paused?(!0===e&&(r[0].load(),e=!1),x.Utility.play_media(r[0])):r[0].pause())}catch(t){}finally{return!1}}),this.Ka(c),c[0].onclick=function(){return!1})}catch(t){}},m.prototype.Qa=function(r,o,h){try{var t=r.find(".cc-1u43")||[];if(0<t.length){t.on("click",function(t){try{if(t.stopPropagation(),"from"===o){var i=t.target?x.Library.dom(t.target):null;if(i){for(var n=i.attr("data-value"),e=!1,s=null,c=0;c<h.content.choices.length;c++){var a=h.content.choices[c];a.value===n?!0!==a.selected&&(e=a.selected=!0,s=a.handler):a.selected=!1}!0===e&&("function"==typeof s?s(r):x.Library.crisp.client.Message.update_message(h.fingerprint,h.content))}}}catch(t){}finally{return!1}}),this.Ka(t);for(var i=0;i<t.length;i++)t[i].onclick=function(){return!1}}}catch(t){}},m.prototype.tr=function(t,i){try{var n,e=t.find(".cc-hp1x")||[],s=t.find(".cc-1t9k")||[],c=t.find(".cc-fosr")||[];if(0<e.length&&0<s.length&&(n=function(){var t=s.val().trim();t&&(i.content.value=t,"function"==typeof i.content.handler?i.content.handler(t):x.Library.crisp.client.Message.update_message(i.fingerprint,i.content))},e.on("submit",function(){try{n()}catch(t){}finally{return!1}}),c.on("click",function(t){try{t.stopPropagation(),n()}catch(t){}finally{return!1}}),this.Ka(c),e[0].onsubmit=function(){return!1},c[0].onclick=function(){return!1}),i.content.previous){var a=t.find(".cc-2t7n")||[];if(0<a.length){a.on("click",function(t){try{t.stopPropagation(),x.Chat.Intent.zt(i.content.previous)}catch(t){}finally{return!1}}),this.Ka(a);for(var r=0;r<a.length;r++)a[r].onclick=function(){return!1}}}}catch(t){}},m.prototype.ir=function(i,n){try{var t=i.find(".cc-pus6");t.on("click",function(t){try{t.stopPropagation(),!0===x.Chat.Message.nr()&&(x.Chat.Message.er(i),x.Action.do_message_send(n.type,n.content))}catch(t){}finally{return!1}}),this.Ka(t),t[0].onclick=function(){return!1}}catch(t){}},m.prototype.sr=function(t){try{var i=t.find(".cc-1h0y"),n=t.find(".cc-1shm");i.on("load",function(){try{t.attr("data-loaded","true")}catch(t){}}),n.on("click",function(){try{x.Chat.Game.stop()}catch(t){}finally{return!1}}),this.Ka(n),n[0].onclick=function(){return!1}}catch(t){}},m.prototype.cr=function(i){try{function e(){i.remove(),x.Chat.Field.Yc()}i.find(".cc-q2us").on("load",function(t){try{i.attr("data-state","loaded")}catch(t){}}),i.on("keydown",function(t){try{27===t.keyCode&&e()}catch(t){}}),i[0].onclick=function(t){var i=!0;try{var n=t.target?x.Library.dom(t.target):null;n&&(n.is(".cc-k0ox")||n.is(".cc-ikw0")||n.is(".cc-12ru")||n.is(".cc-1o7o"))&&(i=!1,e())}catch(t){}finally{return i}},this.Ka(i)}catch(t){}},m.prototype.ar=function(n){var e=this;try{function s(){o(),n.remove(),x.Chat.Interface.rr=null,x.Chat.Field.Yc()}var c="",a=null,r=n.find(".cc-tdrg"),o=function(){null!==a&&(x.Utility.clear_timeout(a),a=null),null!==x.Chat.Interface.or&&(x.Utility.clear_timeout(x.Chat.Interface.or),x.Chat.Interface.or=null)};r.on("keyup",function(t){try{var i=(t.target.value||"").trim();i!==c&&(o(),i?(n.attr("data-state","loading"),a=x.Utility.set_timeout(function(){var t;a=null,c=i,x.Action.do_helpdesk_query(i),!i||(t=i.substring(i.lastIndexOf(" ")+1).trim())&&t.length>=e.hr&&x.Library.crisp.client.Helpdesk.get_article_suggest(t,x.Locale.code())},e.ur)):(delete x.Broker.ie.helpdesk_article_search,delete x.Broker.ie.helpdesk_article_suggest,c="",x.Chat.Interface.ee([],{},!1),x.Chat.Interface.se([])))}catch(t){}}),n[0].onkeydown=function(t){var i=!0;try{switch(t.keyCode){case 27:s(),i=!1;break;case 13:x.Chat.Interface.lr(n),i=!1;break;case 38:x.Chat.Interface.fr(n,-1),i=!1;break;case 40:x.Chat.Interface.fr(n,1),i=!1;break;case 9:x.Chat.Interface.dr(n,r),i=!1;break;default:!0!==t.shiftKey&&!0!==t.metaKey&&!0!==t.ctrlKey&&!0!==t.altKey&&x.Chat.Interface.se([])}}catch(t){}finally{return i}},n[0].onclick=function(t){var i=!0;try{var n=t.target?x.Library.dom(t.target):null;n&&(n.is(".cc-1qlo")||n.is(".cc-1pql")||n.is(".cc-1o4r")?(i=!1,s()):!1===n.is("a")&&r[0].focus())}catch(t){}finally{return i}},this.Ka(n.find(".cc-1o4r"))}catch(t){}},m.prototype.pr=function(n){try{function e(t){0!==t&&(i[0].scrollTop+=t)}var i=n.find(".cc-1u0c"),t=i.find(".cc-1h5e"),s=0;i.on("wheel",function(t){try{e(t.deltaY||0)}catch(t){}}),i.on("touchstart",function(t){try{s=((t.touches||[])[0]||{}).pageY||0}catch(t){}}),i.on("touchmove",function(t){try{var i=((t.touches||[])[0]||{}).pageY||0;e(s-i),s=i}catch(t){}}),t.on("mouseenter",function(t){try{x.Chat.Interface.vr(n,t.target,!0)}catch(t){}}),t.on("mouseleave",function(t){try{x.Chat.Interface.vr(n,t.target,!1)}catch(t){}}),t.on("click",function(t){try{var i;!0!==x.Feature.has_screen_touch()&&(t.preventDefault(),0<(i=x.Library.dom(t.target).parents(".cc-7rhc")||[]).length&&(x.Action.do_helpdesk_article_open(i.attr("data-locale"),i.attr("data-slug")),n.remove(),x.Chat.Interface.rr=null))}catch(t){}finally{return!1}}),i[0].onscroll=function(t){t.preventDefault(),t.stopPropagation()},i[0].ontouchmove=function(t){t.stopPropagation()}}catch(t){}},m.prototype.yr=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};try{function s(){i.remove(),x.Chat.Field.Yc()}function c(t){!(t=n[t])||0<(t=x.Chat.Selector.get("flow_messages").find([".cc-b3wa",'[data-fingerprint="'+t+'"]'].join(""))||[]).length&&0<(t=t.find(".cc-17m8")||[]).length&&t[0].click()}var e=i.find(".cc-z6hh");i.on("keydown",function(t){try{switch(t.keyCode){case 27:s();break;case 37:c("previous");break;case 39:c("next")}}catch(t){}}),e.on("video"===t?"loadeddata":"load",function(){try{i.attr("data-state","loaded")}catch(t){}}),i[0].onclick=function(t){var i=!1;try{var n=null,e=t.target?x.Library.dom(t.target):null;switch(n=e&&e.is(".cc-12xv")?e.attr("data-action"):n){case"download":i=!0;break;case"next":case"previous":c(n);break;default:e&&e.is("video, iframe")||s()}}catch(t){}finally{return i}},this.Ka(i)}catch(t){}},m.prototype.ja=function(t){try{var i=t.find(".cc-dnqb")||[];if(0<i.length){i.on("click",function(t){try{var i,n,e;t.stopPropagation(),!0!==x.Chat.Message.nr()||(i=t.target?x.Library.dom(t.target):null)&&(n=i.attr("data-type"),(e=i.attr("data-url"))&&n&&(x.Action.do_message_send("animation",{type:n,url:e}),x.Chat.Picker.ga()))}catch(t){}finally{return!1}}),this.Ka(i);for(var n=0;n<i.length;n++)i[n].onclick=function(){return!1}}}catch(t){}},m.prototype.Ea=function(){try{x.Chat.Selector.mr.find(".cc-qqzz").on("click",function(t){try{var i=t.target?x.Library.dom(t.target):null;i&&!i.is(".cc-1lut")&&0===i.parents(".cc-1lut").length&&x.Chat.Field.Yc()}catch(t){}})}catch(t){}},m.prototype.Ca=function(){try{x.Chat.Selector.mr.on("keydown",function(t){try{27===t.keyCode&&x.Action.do_chat_close()}catch(t){}}),x.Chat.Selector.get("header").on("click",function(){try{x.Action.do_chat_close()}catch(t){}finally{return!1}}),this.Ka(x.Chat.Selector.get("header")),x.Chat.Selector.get("header")[0].onclick=function(){return!1}}catch(t){}},m.prototype.Aa=function(){try{x.Chat.Selector.Ac.on("click",function(t){try{var i=t.target?x.Library.dom(t.target):null;i&&i.is(".cc-6uue")?x.Action.do_message_read():x.Action.do_chat_toggle()}catch(t){}finally{return!1}}),this.Ka(x.Chat.Selector.Ac),x.Chat.Selector.Ac[0].onclick=function(){return!1}}catch(t){}},m.prototype.Sa=function(){var n=this;try{var e=null;x.Chat.Selector.get("flow").on("scroll",function(){try{var t=x.Chat.Selector.get("flow")[0].scrollTop;(Math.abs(t-(x.Chat.Scroll._r||0))>=n.gr||null!==e)&&(x.Chat.Scroll._r=t,i=x.Chat.Scroll._r,null!==e&&x.Utility.clear_timeout(e),e=x.Utility.set_timeout(function(){e=null,x.Chat.State.propagate("scroll",i)},n.wr)),x.Chat.Notification.br()}catch(t){}var i}),x.Chat.Selector.get("alerts_new_messages").on("click",function(){try{x.Chat.Scroll.kr()}catch(t){}finally{return!1}}),this.Ka(x.Chat.Selector.get("alerts_new_messages")),x.Chat.Selector.get("alerts_new_messages")[0].onclick=function(){return!1},x.Chat.Selector.get("flow")[0].onscroll=function(t){t.preventDefault(),t.stopPropagation()},x.Chat.Selector.get("flow")[0].ontouchmove=function(t){t.stopPropagation()}}catch(t){}},m.prototype.Ia=function(){try{var t=x.Chat.Selector.get("header_channel"),i=t.filter('[data-channel="spotlight"]')||[];t.on("click",function(t){try{t.stopPropagation();var i=t.target?x.Library.dom(t.target):null;i&&i.is([".cc-1qlt",'[data-channel="spotlight"]'].join(""))&&(x.Event.trigger_interacted(!0),x.Action.do_helpdesk_search())}catch(t){}}),i[0]&&(i[0].onclick=function(){return!1})}catch(t){}},m.prototype.Da=function(){try{var t=x.Chat.Selector.get("pickers_selector_one");x.Chat.Selector.get("pickers").on("click",function(t){try{var i=t.target?x.Library.dom(t.target):null;i&&0===i.parents(".cc-1tha").length&&x.Chat.Picker.ga()}catch(t){}}),t.on("click",function(t){try{var i,n=t.target?x.Library.dom(t.target):null;n&&((i=n.attr("data-type"))?x.Chat.Picker.ra(i):x.Chat.Picker.ga())}catch(t){}finally{return!1}}),this.Ka(t);for(var i=0;i<t.length;i++)t[i].onclick=function(){return!1}}catch(t){}},m.prototype.Ra=function(){try{var t=x.Chat.Selector.get("pickers_smiley").find(".cc-dnqb");x.Chat.Selector.get("form_button_smiley").on("click",function(){try{!1===x.Chat.Picker.ya()?(x.Event.trigger_interacted(!0),x.Chat.Picker.ra("smiley")):x.Chat.Picker.ga()}catch(t){}}),t.on("click",function(t){try{var i,n,e,s,c=t.target?x.Library.dom(t.target):null,a=c?c.attr("data-value"):null;a&&(s=void 0,n=x.Chat.Selector.get("form_textarea_message"),e=n[0].selectionStart,(s=x.Action.get_message_text())&&(0<e&&" "!==s[e-1]&&(a=" "+a),e<s.length&&" "!==s[e]&&(a+=" ")),i=s.substr(0,e)+a+s.substr(e),x.Action.set_message_text(i),n.trigger("keyup"),x.Utility.set_timeout(function(){e+=a.length,n[0].selectionStart=n[0].selectionEnd=e},0)),x.Chat.Picker.ga(),x.Chat.Field.Yc()}catch(t){}finally{return!1}}),this.Ka(t);for(var i=0;i<t.length;i++)t[i].onclick=function(){return!1}}catch(t){}},m.prototype.Ba=function(){var t=this;try{var i=x.Chat.Selector.get("pickers_gif").find(".cc-1k8e")||[];x.Chat.Selector.get("pickers_search_input").on("keyup",function(){try{null!==t.xa&&x.Utility.clear_timeout(t.xa),t.xa=x.Utility.set_timeout(function(){var t=x.Chat.Selector.get("pickers_search_input").val().trim();x.Chat.Picker.ka(t)},t.xr)}catch(t){}}),0<i.length&&(i.on("click",function(){try{x.Chat.Picker.ka()}catch(t){}finally{return!1}}),this.Ka(i),i[0].onclick=function(){return!1})}catch(t){}},m.prototype.Oa=function(){try{x.Chat.Selector.get("alerts_warn_reply").on("click",function(){try{!0===x.Base.I.chat.phone_visitors&&!0!==x.Base.I.chat.email_visitors?x.Chat.Intent.zt("identity","phone"):x.Chat.Intent.zt("identity","email")}catch(t){}finally{return!1}}),this.Ka(x.Chat.Selector.get("alerts_warn_reply")),x.Chat.Selector.get("alerts_warn_reply")[0].onclick=function(){return!1}}catch(t){}},m.prototype.Ua=function(){try{x.Chat.Selector.get("alerts_email_invalid").on("click",function(){try{x.Chat.Intent.zt("identity","email",!0)}catch(t){}finally{return!1}}),this.Ka(x.Chat.Selector.get("alerts_email_invalid")),x.Chat.Selector.get("alerts_email_invalid")[0].onclick=function(){return!1}}catch(t){}},m.prototype.$a=function(){try{function i(){x.Event.trigger_interacted(!0),x.Chat.Message.send()}var t=x.Chat.Selector.get("form_textarea_message");t.on("keydown",function(t){try{if(13===t.keyCode&&!t.shiftKey)return i(),!1;if(70===t.keyCode&&t.ctrlKey&&x.Base.I.channels.helpdesk&&x.Base.ae!==x.Base.I.channels.helpdesk)return x.Action.do_helpdesk_search(),!1;x.Event.trigger_interacted()}catch(t){}}),x.Chat.Selector.get("form_button_send").on("click",function(){try{i()}catch(t){}finally{return!1}}),this.Ka(x.Chat.Selector.get("form_button_send")),t[0].onkeydown=function(t){if(t.stopPropagation(),13===t.keyCode&&!t.shiftKey)return!1},x.Chat.Selector.get("form_message")[0].onsubmit=function(){return!1},x.Chat.Selector.get("form_button_send")[0].onclick=function(){return!1}}catch(t){}},m.prototype.Ma=function(){var c=this;try{function i(t){try{var i,n,e,s;_textarea_val="",null!==t&&13===t.keyCode&&!t.shiftKey||(_textarea_val=x.Action.get_message_text(),o(),_textarea_val?(i=8.5*_textarea_val.length/x.Chat.Interface.Fr,i+=(_textarea_val.match(c.jr)||[]).length,((n=Math.ceil(i))-i<c.qr||n!==a)&&(a=i=n,e=x.Chat.Interface.zr-x.Chat.Interface.Er+x.Chat.Interface.Er*i,s=x.Chat.Interface.Er*(i-1),x.Chat.Selector.get("form_textarea_message").attr("rows",r+(i-1)),e<x.Chat.Interface.Cr+x.Chat.Interface.zr-c.Ar&&(x.Chat.Field.Sr(s),x.Chat.Selector.get("form_container").safe_css_text("height",e+"px"))),x.Chat.Selector.get("form_container").attr("data-has-value","true")):(x.Chat.Selector.get("form_container").safe_css_text(null),x.Chat.Selector.get("form_container").attr("data-has-value","false"),x.Chat.Selector.get("form_textarea_message").attr("rows",r),x.Chat.Field.Sr(0))),x.Library.crisp.client.Message.send_message_compose(_textarea_val?"start":"stop",_textarea_val||null)}catch(t){}}var a=1,t=null,r=parseInt(x.Chat.Selector.get("form_textarea_message").attr("rows"),10),o=function(){null!==t&&x.Utility.clear_timeout(t),t=x.Utility.set_timeout(function(){x.Chat.State.propagate("textarea",x.Action.get_message_text())},c.Ir)};x.Chat.Selector.get("form_textarea_message").on("keypress",function(t){try{i(t)}catch(t){}}),x.Chat.Selector.get("form_textarea_message").on("keyup",function(t){try{i(t)}catch(t){}}),x.Chat.Selector.get("form_textarea_message").on("paste",function(){try{x.Utility.set_timeout(function(){i(null)},0)}catch(t){}})}catch(t){}},m.prototype.Ta=function(){var i,n=this;try{!0===x.Base.I.chat.file_transfer&&(i=function(t){t.preventDefault(),t.stopPropagation()},x.Chat.Selector.get("content").on("dragover",function(t){i(t),x.Chat.Selector.get("content").attr("data-has-drop-zone","true")}),x.Chat.Selector.get("drop_over").on("dragleave",function(t){i(t),x.Chat.Selector.get("content").removeAttr("data-has-drop-zone")}),x.Chat.Selector.get("drop_over").on("drop",function(t){return i(t),x.Chat.Selector.get("content").removeAttr("data-has-drop-zone"),t.dataTransfer&&t.dataTransfer.files&&0<t.dataTransfer.files.length&&n.Dr(t.dataTransfer.files),!1}))}catch(t){}},m.prototype.Na=function(){var c=this;try{!0===x.Base.I.chat.file_transfer&&x.Chat.Selector.get("form_textarea_message").on("paste",function(t){try{var i=(t.clipboardData||t.originalEvent.clipboardData||{}).items||[];if(0<i.length){for(var n,e=[],s=0;s<i.length;s++)"file"!==i[s].kind||(n=i[s].getAsFile())&&n.type&&-1!==n.type.indexOf("image/")&&e.push(n);0<e.length&&(t.preventDefault(),!0===confirm(x.Locale.text("chat","chat_form_attach_confirm_upload"))&&c.Dr(e))}}catch(t){}})}catch(t){}},m.prototype.La=function(){var o=this;try{!0===x.Base.I.chat.file_transfer&&x.Chat.Selector.get("form_message").on("event:attach",function(){try{function t(){0<o.Rr.length&&s&&x.Utility.set_timeout(function(){x.Action.do_message_send("file",{url:s,name:o.Rr[0].name||o.Br,type:o.Rr[0].type||o.Or}),c()},o.Ur)}function i(){0<o.Rr.length&&alert(x.Locale.text("chat","chat_form_attach_alert_error")),c()}function n(t){x.Chat.Selector.get("form_button_attach").attr("data-state","uploading")}var e=void 0,s=void 0,c=function(){e&&(e.removeEventListener("progress",n,!1),e.removeEventListener("error",i,!1),e.removeEventListener("abort",i,!1),e.removeEventListener("load",t,!1)),x.Chat.Selector.get("form_input_attach")[0].value=null,x.Chat.Selector.get("form_button_attach").attr("data-state","none"),o.Rr.shift(),0<o.Rr.length&&o.Dr(o.Rr)},a=x.Chat.Selector.get("form_message").attr("data-action"),s=x.Chat.Selector.get("form_message").attr("data-resource"),r=parseInt(x.Chat.Selector.get("form_message").attr("data-size-limit"),10);if(!o.Rr[0])return void c();if(!a||!s)return alert(x.Locale.text("chat","chat_form_attach_alert_quota")),void c();if(o.Rr[0].size>=r)return alert(x.Locale.text("chat","chat_form_attach_alert_size")),void c();(e=new XMLHttpRequest).file=o.Rr[0],e.addEventListener("progress",n,!1),e.addEventListener("error",i,!1),e.addEventListener("abort",i,!1),e.addEventListener("load",t,!1),e.open("PUT",a,!0),e.setRequestHeader("Content-Disposition","attachment"),e.send(o.Rr[0])}catch(t){}finally{return!1}})}catch(t){}},m.prototype.Pa=function(){var i=this;try{!0===x.Base.I.chat.file_transfer&&x.Chat.Selector.get("form_input_attach").on("change",function(t){return!!(t.target.files&&0<t.target.files.length)&&(x.Event.trigger_interacted(!0),i.Dr(t.target.files))})}catch(t){}},m.prototype.Ja=function(){try{x.Utility.add_event_listener(this.ns,"document","wheel",function(t){try{var i,n,e=t.target?x.Library.dom(t.target):null;e&&"number"==typeof t.wheelDelta&&!0===x.Action.is_chat_opened()&&(0<e.parents(".crisp-client").length||e.is(".crisp-client"))&&((i=x.Chat.Selector.get("flow"))&&i[0]&&(0<e.parents(".cc-1v5j").length||e.is(".cc-1v5j"))&&(n=i[0].scrollTop-t.wheelDelta,i[0].scrollTop=0<=n?n:0),t.stopPropagation(),t.preventDefault(),t.returnValue=!1)}catch(t){}},{passive:!1})}catch(t){}},m.prototype.Ha=function(){try{x.Utility.add_event_listener(this.ns,"window","beforeunload",function(t){var i,n=null;if(!0===x.Library.crisp.client.Message.is_sending_messages()&&(n=x.Locale.text("chat","chat_message_send_abort_warn")),!0===x.Base.I.chat.file_transfer&&(i=x.Chat.Selector.get("form_button_attach").attr("data-state"),-1!==["preparing","uploading"].indexOf(i)&&(n=x.Locale.text("chat","chat_form_attach_abort_warn"))),n=!0===x.Library.crisp.client.Call.is_ongoing()?x.Locale.text("call","call_abort_warn"):n)return t.returnValue=n})}catch(t){}},m.prototype.Ka=function(t){try{t.on("touchstart",function(t){try{t.preventDefault()}catch(t){}}),t.on("touchend",function(t){try{t.preventDefault(),t.target&&"function"==typeof t.target.click&&t.target.click()}catch(t){}})}catch(t){}},m.prototype.Dr=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];try{if(!0===x.Chat.Message.nr()){var i=x.Chat.Selector.get("form_button_attach").attr("data-state");if(0<t.length&&"none"===i){this.Rr=[];for(var n=0;n<t.length;n++)this.Rr.push(t[n]);x.Chat.Selector.get("form_button_attach").attr("data-state","preparing"),x.Library.crisp.client.Bucket.get_url_upload(t[0].name||this.Br,t[0].type||this.Or)}}}catch(t){}finally{return!1}},m.prototype.c=function(){try{this.Rr=[],this.xa=null}catch(t){}},new m),x.Chat.Field=(y.prototype.init=function(){},y.prototype.reset=function(){try{this.c()}catch(t){}},y.prototype.Yc=function(){var t,i,n,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{!0!==e&&x.Feature.has_screen_touch()||!x.Chat.Interface.$r()||(t=x.Chat.Selector.get("flow_messages"))&&(n=null,(n=0<(i=t.find(".cc-1t9k")).length?i:!0===x.Chat.Picker.ya()?x.Chat.Selector.get("pickers_search_input"):x.Chat.Selector.get("form_textarea_message"))&&0<n.length&&n[0].focus())}catch(t){}},y.prototype.Mr=function(){try{for(var t=x.Base.G.find("input"),i=0;i<t.length;i++)t[i].blur()}catch(t){}},y.prototype.Sr=function(t){try{x.Chat.Selector.mr.find([".cc-1pvj",".cc-1mtf",".cc-1tha"].join(", ")).safe_css_text("margin-bottom",t+"px")}catch(t){}},y.prototype.c=function(){try{this.Tr=""}catch(t){}},new y),x.Chat.Game=(v.prototype.reset=function(){try{this.c()}catch(t){}},v.prototype.start=function(){try{null===this.Nr&&(this.Nr=x.Library.dom(x.Template.render("chat_game",{environment:{url:{crisp_game:x.Base.qs}}})),x.Chat.Event.sr(this.Nr),x.Chat.Selector.mr.append(this.Nr))}catch(t){}},v.prototype.stop=function(){try{null!==this.Nr&&(this.Nr.remove(),this.Nr=null)}catch(t){}},v.prototype.c=function(){try{this.Nr=null}catch(t){}},new v),x.Chat.Interface=(d.prototype.init=function(){try{this.Lr()}catch(t){}},d.prototype.reset=function(){try{this.c()}catch(t){}},d.prototype.Pr=function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"pane",i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{function n(t){var i="close"===t?"maximize":"minimize",n="close"===t?"minimize":"maximize";null!==e.Jr&&x.Utility.clear_timeout(e.Jr),x.Chat.Selector.Ac&&(x.Chat.Selector.Ac.removeClass(e.Hr.minimized[i]),x.Chat.Selector.Ac.addClass(e.Hr.minimized[n])),x.Chat.Selector.Vr&&(x.Chat.Selector.Vr.removeClass(e.Hr.shade[i]),x.Chat.Selector.Vr.addClass(e.Hr.shade[n])),x.Chat.Selector.mr&&(x.Chat.Selector.mr.removeClass(e.Hr.chat[i]),x.Chat.Selector.mr.addClass(e.Hr.chat[n])),e.Jr=x.Utility.set_timeout(function(){c(t)},e.Wr)}var s="chat"===t?"true":"false",c=function(t){var i=!(t&&"close"!==t);1==!(t&&"open"!==t)&&(x.Chat.Selector.Ac&&(x.Chat.Selector.Ac.attr("data-maximized","true"),x.Chat.Selector.Ac.removeClass(e.Hr.minimized.maximize)),x.Chat.Selector.Vr&&x.Chat.Selector.Vr.removeClass(e.Hr.shade.maximize),x.Chat.Selector.mr&&x.Chat.Selector.mr.removeClass(e.Hr.chat.maximize)),1==i&&(x.Chat.Selector.Vr&&x.Chat.Selector.Vr.attr("data-visible","false"),x.Chat.Selector.mr&&x.Chat.Selector.mr.attr("data-visible","false"),x.Chat.Selector.Ac&&x.Chat.Selector.Ac.removeClass(e.Hr.minimized.minimize),x.Chat.Selector.Vr&&x.Chat.Selector.Vr.removeClass(e.Hr.shade.minimize),x.Chat.Selector.mr&&x.Chat.Selector.mr.removeClass(e.Hr.chat.minimize))};this.ot="pane"!==t,this.Gr(),this.Yr("true"==s),!0===i&&x.Feature.has_css_animations()?"pane"===t?(x.Chat.Selector.Ac&&x.Chat.Selector.Ac.attr("data-maximized",s),n("close")):(x.Chat.Selector.Vr&&x.Chat.Selector.Vr.attr("data-visible",s),x.Chat.Selector.mr&&x.Chat.Selector.mr.attr("data-visible",s),n("open")):(c(),x.Chat.Selector.Vr&&x.Chat.Selector.Vr.attr("data-visible",s),x.Chat.Selector.mr&&x.Chat.Selector.mr.attr("data-visible",s),x.Chat.Selector.Ac&&x.Chat.Selector.Ac.attr("data-maximized",s))}catch(t){}},d.prototype.Dn=function(){var n=this,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],s=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{null!==this.Kr&&x.Utility.clear_timeout(this.Kr),this.Kr=x.Utility.set_timeout(function(){n.Kr=null,!1===e?x.Chat.Selector.get("content").attr("data-has-offline","true"):x.Chat.Selector.get("content").removeAttr("data-has-offline");var t,i={failed:s,inactive:x.Event.qe||x.Event.ze||!1};for(t in i)!0===i[t]?x.Chat.Selector.get("offline").attr("data-reconnect-"+t,"true"):x.Chat.Selector.get("offline").removeAttr("data-reconnect-"+t)},!0===e?0:this.Xr)}catch(t){}},d.prototype.W=function(){try{!0!==x.Base.Os.lock_maximized&&x.Chat.State.propagate("maximized",!1)}catch(t){}},d.prototype.H=function(){try{x.Chat.State.propagate("maximized",!0,!1,function(){x.Chat.Scroll.kr()})}catch(t){}},d.prototype.$r=function(){var t=!0;try{t=this.ot}catch(t){}finally{return t}},d.prototype.Gc=function(){try{var t=x.Base.I||{},i=t.website||{};x.Chat.Selector.$c=x.Library.dom(x.Template.render("chat",{activity:{metrics:i.response_metrics&&i.response_metrics.mean&&i.response_metrics.mean>=this.Zr&&i.response_metrics.mean<this.Qr?{format:x.Utility.lower_string_first(x.Date.format_duration(i.response_metrics.mean,!1)),raw:i.response_metrics.mean}:null,last:i.last_available&&0<i.last_available?{format:x.Utility.lower_string_first(x.Date.format_date(x.Date.timestamp_to_iso(i.last_available))),raw:x.Date.timestamp_to_iso(i.last_available)}:null},configuration:t,environment:{smileys:this.no,url:{crisp_web:x.Base.Fs}},methods:{active_operators:x.Avatar.active_operators.p(x.Avatar),count_other_operators:x.Avatar.count_other_operators.p(x.Avatar),generate_channel_link:this.R.p(this)},website:{id:x.Base.Be,domain:x.Base.I.website.domain,name:x.Base.I.website.name},chatbox:{blocked:x.Base.ic(),runtime:x.Base.Os,helpdesk:{search:x.Base.I.chat.helpdesk_link&&x.Base.I.channels.helpdesk&&x.Base.ae!==x.Base.I.channels.helpdesk&&!0}},status:{url:this.R("status")}})),x.Base.G.empty(),x.Base.G.append(x.Chat.Selector.$c),x.Chat.Selector.Mc(),x.Chat.Event.Mc(),this.Y(!0),this.eo(),x.Chat.State.so(["intent"])}catch(t){}},d.prototype.R=function(t){var i="";try{var n=x.Base.I.channels[t]||null;switch(t){case"email":var e,s,c=x.Broker.Un;c?(e=x.Base.I.website.name,s="s."+c+".i@"+x.Base.I.website.mailer,i="mailto:",e&&(i+='"'+encodeURI(e)+'"'),i+="<"+encodeURI(s)+">"):n&&(i="mailto:"+n);break;case"phone":n&&(i="tel:"+n);break;case"messenger":n&&(i="https://m.me/"+encodeURI(n));break;case"telegram":n&&(i="https://telegram.me/"+encodeURI(n));break;case"twitter":n&&(i="https://twitter.com/"+encodeURI(n));break;case"helpdesk":case"status":n&&(i=("production"===x.Base.zs?"https":"http")+"://"+n+"/")}}catch(t){}finally{return i}},d.prototype.Y=function(){var t,i,n,e,s,c=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{!0===x.Action.is_chat_visible()&&(!0===x.Base.Ws()?(this.co=this.ao,this.ro=this.oo):!0===x.Base.Vs()?(this.co=this.ho,this.ro=this.uo):(this.co=this.lo,this.ro=this.fo),x.Base.ke(),!0===x.Base.ht()&&(this.co=window.innerHeight,this.ro=window.innerWidth,this.co-=x.Chat.Selector.get("header").height()),!0!==x.Chat.J&&!0!==c||(t="rtl"===x.Locale.direction()?"right":"left",i="rtl"===x.Locale.direction()?"left":"right",n=parseInt(x.Chat.Selector.get("form_textarea_message").css(t).replace("px",""),10),e=parseInt(x.Chat.Selector.get("form_act").css(i).replace("px",""),10),s=this.ro-this.po-n-e-x.Chat.Selector.get("form_act")[0].offsetWidth,x.Chat.Selector.mr.safe_css_text("width",this.ro+"px"),x.Chat.Selector.get("content").safe_css_text("height",this.co+"px"),x.Chat.Selector.get("form_textarea_message").safe_css_text("width",s+"px"),this.Cr=x.Chat.Selector.get("flow").height(),this.Fr=x.Chat.Selector.get("form_textarea_message").width(),0===this.zr&&(this.zr=x.Chat.Selector.get("form_container").height()),0===this.Er&&(this.Er=parseInt(x.Chat.Selector.get("form_textarea_message").css("line-height").replace("px",""),10)),x.Chat.Scroll.vo=this.Cr,x.Base.ht()&&!0===this.$r()?x.Chat.Viewport.yo():x.Chat.Viewport.mo(),x.Chat.Selector.get("form_textarea_message").trigger("keyup")),x.Sound.allow(!x.Base.ht()||!x.Feature.has_screen_touch()))}catch(t){}},d.prototype._o=function(){try{return this.go&&this.$r()&&!0}catch(t){}},d.prototype.X=function(t,i){var n=!1;try{var e,s,c=this.R("helpdesk");c&&(n=!0,e=x.Base.G.find(".cc-k0ox"),s=x.Library.dom(x.Template.render("article",{frame:{url:""+c+t+"/article/"+i}})),x.Chat.Event.cr(s),0===e.length?x.Base.G.append(s):e[0].parentNode.replaceChild(s[0],e[0]),x.Utility.set_timeout(function(){s[0].focus()},this.wo))}catch(t){}finally{return n}},d.prototype.K=function(){var i=this,t=!1;try{var n=this.R("helpdesk");n&&(t=!0,null===this.rr&&(this.rr=x.Library.dom(x.Template.render("spotlight",{url:n})),x.Chat.Event.ar(this.rr),x.Base.G.append(this.rr),x.Action.do_helpdesk_query(""),x.Utility.set_timeout(function(){var t=i.rr.find(".cc-tdrg");t&&t[0]&&t[0].focus()},this.bo)))}catch(t){}finally{return t}},d.prototype.Ya=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;try{var s=x.Base.G.find(".cc-1nn0"),c=x.Chat.Message.ko(-1!==this.xo.indexOf(t)?e:null),a=x.Library.dom(x.Template.render("magnify",{type:t,source:i,name:n,fingerprints:c}));x.Chat.Event.yr(t,a,c),0===s.length?x.Base.G.append(a):s[0].parentNode.replaceChild(a[0],s[0]),x.Utility.set_timeout(function(){a[0].focus()},this.Fo)}catch(t){}},d.prototype.dr=function(t,i){try{var n=(t.find(".cc-4wnb").text()||"").trim();n&&(i.val(""+(i.val()||"")+n),this.se([]))}catch(t){}},d.prototype.lr=function(t){try{var i=t.find(".cc-1h5e[data-active='true']");i&&0<i.length&&i[0].click()}catch(t){}},d.prototype.fr=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;try{var n=t.find(".cc-1h5e")||[];if(0<n.length){for(var e=-1,s=0;s<n.length;s++)if("true"===x.Library.dom(n[s]).attr("data-active")){e=s;break}(e+=i)<0?e=n.length-1:e>=n.length&&(e=0),-1<e&&this.vr(t,n[e],!0)}}catch(t){}},d.prototype.vr=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];try{t.find(".cc-1h5e").attr("data-active","false"),null!==i&&x.Library.dom(i).attr("data-active",!0===n?"true":"false")}catch(t){}},d.prototype.ee=function(){var t,i,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=this,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},c=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];try{null!==this.rr&&((t=this.rr.find(".cc-1u0c"))&&t.remove(),!0===c&&(i=x.Library.dom(x.Template.render("spotlight_results",{base_url:this.R("helpdesk"),results:n,has_active:!x.Feature.has_screen_touch()&&!0})),this.rr.find(".cc-16io").prepend(i),x.Chat.Event.pr(this.rr)),null!==this.or&&x.Utility.clear_timeout(this.or),s.query&&(this.or=x.Utility.set_timeout(function(){e.or=null;var t=(s.query||"").trim(),i=s.locale||null;(i=n[0]&&n[0].locale?n[0].locale:i)&&t&&x.Library.crisp.client.Helpdesk.report_article_search(i,t)},this.jo)),this.rr.attr("data-state","loaded"),this.rr.attr("data-has-results",!0===c?"true":"false"))}catch(t){}},d.prototype.se=function(){var t,i,n,e,s,c,a,r,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];try{null!==this.rr&&(t=this.rr.find(".cc-4wnb"),i=(o[0]||"").toLowerCase(),e=n=null,!i||(s=(e=this.rr.find(".cc-tdrg").val()||"").substring(e.lastIndexOf(" ")+1).trim().toLowerCase())&&s.length<i.length&&i.substring(0,s.length)===s&&(n=i.substring(s.length)),n&&e?((a=this.rr.find(".cc-16kz")).text(e),t.text(n),r="rtl"===x.Locale.direction()?"right":"left",t.safe_css_text((h(c={},r,a[0].offsetWidth+"px"),h(c,"display","block"),c))):(t.safe_css_text("display","none"),t.empty()))}catch(t){}},d.prototype.Yr=function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{null!==this.qo&&(x.Utility.clear_timeout(this.qo),this.qo=null),!0===x.Base.ht()&&window.scroll&&(!0===i?!0===x.Base.ht()&&(this.qo=x.Utility.set_timeout(function(){!(t.qo=null)===t.$r()&&(-1===t.zo&&(t.zo=window.scrollY),window.scroll(window.scrollX,document.body.scrollHeight))},this.Eo)):-1<this.zo&&(window.scroll(window.scrollX,this.zo),this.zo=-1))}catch(t){}},d.prototype.Gr=function(){try{var t=this._o();x.Library.crisp.client.Message.set_messages_in_view(t)}catch(t){}},d.prototype.Lr=function(){var t=this;try{this.go=(!window.hasFocus||window.hasFocus())&&!0,x.Utility.add_event_listener(this.ns,"window","focus",function(){t.go=!0,t.Gr()},{capture:!1}),x.Utility.add_event_listener(this.ns,"window","blur",function(){t.go=!1,t.Gr()},{capture:!1})}catch(t){}},d.prototype.eo=function(){try{this.ot=!1,x.Chat.Selector.Vr.attr("data-visible","false"),x.Chat.Selector.mr.attr("data-visible","false")}catch(t){}},d.prototype.c=function(){try{this.ot=!0,this.Cr=0,this.zr=0,this.Fr=0,this.Er=0,this.Co=40,this.rr=null,this.or=null,this.Kr=null,this.Jr=null,this.ro=0,this.co=0,this.zo=-1,this.qo=null,this.go=!0}catch(t){}},new d),p=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var n=[],e=!0,s=!1,c=void 0;try{for(var a,r=t[Symbol.iterator]();!(e=(a=r.next()).done)&&(n.push(a.value),!i||n.length!==i);e=!0);}catch(t){s=!0,c=t}finally{try{!e&&r.return&&r.return()}finally{if(s)throw c}}return n}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},x.Chat.Message=(f.prototype.init=function(){try{this.Ao()}catch(t){}},f.prototype.reset=function(){try{this.c()}catch(t){}},f.prototype.send=function(){var t;try{!0!==this.nr()||(t=(t=x.Action.get_message_text()).trim())&&(x.Action.do_message_send("text",t),x.Action.set_message_text(""),x.Chat.Selector.get("form_textarea_message").trigger("keyup"))}catch(t){}},f.prototype.received=function(t){var i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],e=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],s=4<arguments.length&&void 0!==arguments[4]&&arguments[4];try{var c=this.wa("from",t),a=p(c,2),r=a[0],o=a[1];!0===i&&!1===x.Chat.Interface._o()&&x.Sound.start("events","chat-message-receive"),!0===e&&x.Chat.Scroll.So("from"),!0===n&&!1===o&&this.Io(r),t.user&&-1===this.Do.indexOf(t.user.source)&&x.Chat.Misc.Ro(t.user),!1===s&&x.Chat.Game.stop(),this.Bo&&0<t.timestamp&&this.Bo<t.timestamp&&this.Yn()}catch(t){}},f.prototype.sent=function(t){var i=this;try{var n,e,s,c,a=this.wa("to",t),r=p(a,2),o=r[0],h=r[1];x.Chat.Scroll.So("to"),!1===h&&this.Io(o),this.Oo(t.fingerprint),x.Chat.Event.ir(o,t),x.Chat.Intent.Kc.identity||!1===x.Chat.Intent.Kc.identity||(n=x.Action.get_user_email(),e=x.Action.get_user_phone(),s=x.Base.I.chat.email_visitors,c=x.Base.I.chat.phone_visitors,(n||!0!==s)&&(e||!0!==c)||n||e?x.Chat.Alert.zt("wait_reply","show"):(null!==this.Uo&&x.Utility.clear_timeout(this.Uo),this.Uo=x.Utility.set_timeout(function(){i.Uo=null;var t="default";!1===(s&&c)&&(!0===s?t="email":!0===c&&(t="phone")),x.Chat.Intent.zt("identity",t),x.Chat.Alert.zt("warn_reply","show")},this.$o)))}catch(t){}},f.prototype.sent_acknowledgement=function(t){try{var i=this.Mo.indexOf(t.fingerprint);-1!==i&&this.Mo.splice(i,1),this.wa("to",t),this.To(),x.Chat.Scroll.So("to")}catch(t){}},f.prototype.received_from_history=function(t){try{this.wa("from",t),t.index.current===t.index.total&&this.No()}catch(t){}},f.prototype.sent_from_history=function(t){try{this.wa("to",t),!0===t.read&&this.Lo.push(t.fingerprint),t.index.current===t.index.total&&this.No()}catch(t){}},f.prototype.Po=function(){try{var t=x.Locale.text("theme_welcome",["default_chat",x.Base.I.chat.theme_welcome+"_chat"],[x.Base.I.website.name]),i={website:x.Base.I.channels.helpdesk,url:null};i.website&&!0===x.Base.I.chat.helpdesk_link&&x.Base.ae!==i.website&&(i.url=x.Chat.Interface.R("helpdesk")),this.Jo("welcome","default","text",t,!1,!1,i.website&&i.url?[{variant:"helpdesk",url:i.url,website:i.website,title:x.Locale.text("chat","chat_welcome_helpdesk")}]:[])}catch(t){}},f.prototype.ua=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];try{for(var i="**"+x.Locale.text("chat","chat_message_text_identity_main")+"**\n_"+x.Locale.text("chat","chat_message_text_identity_ask")+"_",n=[],e=0;e<this.Ho.length;e++){var s=this.Ho[e];!0===x.Base.I.chat[s+"_visitors"]&&n.push({value:s,selected:!1,label:x.Locale.text("chat","chat_message_text_identity_pick_"+s),handler:function(t){return function(){x.Chat.Intent.zt("identity",t)}}(s)})}0<n.length&&this.Jo("identity","default","picker",{id:"ask-identity",text:i,choices:n},t,t)}catch(t){}},f.prototype.fa=function(){try{this.Vo("identity")}catch(t){}},f.prototype.la=function(i){var t,n,e=this,s=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{-1!==this.Ho.indexOf(i)&&(t="chat_message_text_identity_ask_"+i,n="chat_message_text_identity_ask_field_"+i,this.Jo("identity",i,"field",{id:"identity-"+i,text:"_"+x.Locale.text("chat",t)+"_",explain:x.Locale.text("chat",n),previous:"identity",handler:function(t){try{x.Action["set_user_"+i](t)}catch(t){}x.Utility.set_timeout(function(){x.Chat.Field.Yc()},e.Wo)}},s,s))}catch(t){}},f.prototype.pa=function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];try{var i="**"+x.Locale.text("chat","chat_message_text_game_main")+"**\n_"+x.Locale.text("chat","chat_message_text_game_ask")+"_";this.Jo("game","default","picker",{id:"ask-game",text:i,choices:[{value:"play",selected:!1,label:x.Locale.text("chat","chat_message_text_game_pick_yes"),handler:function(t){x.Chat.Game.start(),x.Chat.Intent.zt("game",!1)}},{value:"ignore",selected:!1,label:x.Locale.text("chat","chat_message_text_game_pick_no"),handler:function(t){x.Chat.Intent.zt("game",!1)}}]},t,t)}catch(t){}},f.prototype.va=function(){try{this.Vo("game")}catch(t){}},f.prototype.Gn=function(t){try{var i=(x.Chat.Selector.mr?x.Chat.Selector.mr.find(".cc-1deq"):null)||[];this.Bo=t,0===i.length&&(i=x.Library.dom(x.Template.render("chat_bubble_composing")),x.Chat.Selector.get("flow_events").append(i),x.Chat.Scroll.So(null),this.Go())}catch(t){}},f.prototype.Yn=function(){try{var t=x.Chat.Selector.mr?x.Chat.Selector.mr.find(".cc-1deq"):null;this.Bo=null,t&&0<t.length&&t.remove()}catch(t){}},f.prototype.Wn=function(t){try{if(!0!==x.Base.I.chat.operator_privacy){var i=null;if(0<t.length)for(var n=x.Chat.Selector.get("flow_messages").find(".cc-b3wa"),e=n.length-1;0<=e;e--){var s=n[e].getAttribute("data-fingerprint");if(s&&(isNaN(s)||(s=parseInt(s,10)),-1!==t.indexOf(s))){i=s;break}}else{var c=x.Chat.Selector.get("flow_messages").find('.cc-b3wa[data-from="visitor"]');0<c.length&&(i=c.last().attr("data-fingerprint")||null)}null!==i&&(x.Chat.Selector.get("flow_messages").find(".cc-k5zk").safe_css_text("display","none"),x.Chat.Selector.get("flow_messages").find([".cc-b3wa",'[data-fingerprint="'+i+'"]'].join("")).find(".cc-k5zk").safe_css_text("display","inline-block"))}}catch(t){}},f.prototype.tt=function(){var t=!1;try{for(var i=[],n=x.Library.crisp.client.Message.get_cached_messages(),e=n.length-1;0<=e&&"local"===(n[e].user||{}).source;e--)i.push(n[e]);for(var s=0;s<i.length;s++){var c=i[s];-1===this.Yo.indexOf(c.fingerprint)&&(this.Yo.push(c.fingerprint),x.Library.crisp.client.Message.receive_message_mirror(c.type,this.Ko,c.content,c.fingerprint),t=!0)}}catch(t){}finally{return t}},f.prototype.et=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=3<arguments.length&&void 0!==arguments[3]&&arguments[3];try{var s=x.Base.I.website.active_operators||[],c={source:"local"};s[0]&&!0!==e?(c.user_id=s[0].user_id,c.nickname=s[0].nickname,s[0].avatar&&(c.avatar=s[0].avatar)):(c.type="website",c.user_id=x.Base.Be,c.nickname=x.Base.I.website.name),x.Library.crisp.client.Message.receive_message_local(t,i,c,n)}catch(t){}},f.prototype.er=function(t){try{var i,n=t.parents(".cc-w6n9");(1===n.find(".cc-b3wa").length?1===(i=t.parents(".cc-7bf0")).find(".cc-w6n9").length?i:n:t).remove()}catch(t){}},f.prototype.Vc=function(){try{x.Chat.Message.Po(),this.Tn()}catch(t){}},f.prototype.Tn=function(){try{x.Library.crisp.client.Message.get_message_compose(),x.Library.crisp.client.Message.get_unread_messages(),x.Library.crisp.client.Message.get_message_history(),0===x.Library.crisp.client.Message.count_message_history()&&this.No()}catch(t){}},f.prototype.ko=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i={previous:null,next:null};try{if(null!==t&&!isNaN(t))for(var n=parseInt(t,10),e=x.Library.crisp.client.Message.get_cached_messages(),s=0;s<e.length;s++)if(e[s].fingerprint===n){if(0<s)for(var c=s-1;0<=c;c--){var a=e[c];if(!0===this.Xo(a)){i.previous=a.fingerprint;break}}if(s<e.length-1)for(var r=s+1;r<e.length;r++){var o=e[r];if(!0===this.Xo(o)){i.next=o.fingerprint;break}}break}}catch(t){}finally{return i}},f.prototype.nr=function(){var t=!0;try{!0!==x.Broker.Sn&&(t=!1,x.Library.crisp.client.socket.connect())}catch(t){}finally{return t}},f.prototype.ea=function(){try{!0===x.Base.I.chat.force_identify&&(x.Chat.Selector.get("form_container").attr("data-is-locked","true"),x.Chat.Selector.get("form_textarea_message").attr("disabled",!0))}catch(t){}},f.prototype.sa=function(){try{var t=x.Chat.Selector.get("form_container");"true"!==t.attr("data-retain-lock")&&(t.removeAttr("data-is-locked"),x.Chat.Selector.get("form_textarea_message").removeAttr("disabled"))}catch(t){}},f.prototype.Go=function(){var t=this;try{this.Bo&&(x.Date.timestamp()-this.Bo>=this.Zo?this.Yn():x.Utility.set_timeout(function(){t.Go()},this.Qo))}catch(t){}},f.prototype.th=function(t,i,n,e,s,c,a){var r=this,o=null,h=!1;try{var u="from"===i?"operator":"visitor",l="operator"==u?n.avatar||n.user_id:"session",f="",d="";0<s&&(f=x.Date.timestamp_to_iso(s),d=x.Date.format_date(f));var o=x.Library.dom(x.Template.render("chat_message_"+t,{from:u,user:n,content:e,date_iso:f,date_formatted:d,fingerprint:c,metas:a,configuration:x.Base.I,format_context:{methods:{filter_link_safe:x.Utility.filter_link_safe.p(x.Utility)}},environment:{types:{file_preview:this.ih},url:{crisp_image:x.Base._}},methods:{image_url_resize:function(t){return x.Utility.filter_image_url_resize(t,r.nh,r.eh)}}})),p=x.Chat.Selector.get("flow_messages").find([".cc-b3wa",'[data-fingerprint="'+c+'"]'].join(""));if(0===p.length){var v=x.Date.timestamp_to_properties(s),y=x.Chat.Selector.get("flow_messages").children().last();(!(0<y.filter(".cc-7bf0").length)||"none"!==v.day&&y.attr("data-day")!==v.day||"none"!==v.month&&y.attr("data-month")!==v.month||"none"!==v.year&&y.attr("data-year")!==v.year)&&(y=x.Library.dom(x.Template.render("chat_bubble_thread",v)),x.Chat.Selector.get("flow_messages").append(y));var m=y.find(".cc-12zj"),_=m.children().last();0<_.filter(".cc-w6n9").length&&_.attr("data-from")===u&&_.attr("data-user-marker")===l||(_=x.Library.dom(x.Template.render("chat_bubble_group",{from:u,user_marker:l})),m.append(_)),_.append(o),_.append(x.Template.render("clear")),x.Chat.Selector.Co=o.height()}else{for(var g=0;g<this.sh.length;g++){var w=this.sh[g],b=p.find(w),k=o.find(w);k[0]&&b[0]&&b[0].parentNode.replaceChild(k[0],b[0])}p.attr("data-type",t),o=p,h=!0}this.ch(u,n,s)}catch(t){}finally{return[o,h]}},f.prototype.ch=function(t,i,n){try{var e="local"!==i.source&&-1===this.Do.indexOf(i.source)&&!0;"operator"===t&&(this.Bo&&0<n&&n>this.Bo&&this.Yn(),0<n&&1==e&&(x.Chat.Alert.zt("wait_reply","lock"),x.Chat.Intent.zt("game",!1))),0<n&&(this.Ge=!0,this.sc=n,1==e&&("operator"===t?this.lt=!0:this.ut=!0),this.ah()),!1===this.rh&&"local"===i.source&&(this.rh=!0,x.Base.G.attr("data-has-local-messages","true"))}catch(t){}},f.prototype.ah=function(){try{var t,i=!0===this.Ge&&!0!==x.Base.tc();this.oh!==i&&(this.oh=i,x.Base.G.attr("data-is-activity-ongoing",!0===this.oh?"true":"false"),"input"!==(t=((document.activeElement||{}).tagName||"").toLowerCase())&&"textarea"!==t&&x.Chat.Interface.Y())}catch(t){}},f.prototype.Io=function(t){try{x.Feature.has_css_animations()&&(t.addClass("cc-18lb"),x.Utility.set_timeout(function(){t.removeClass("cc-18lb")},this.hh))}catch(t){}},f.prototype.wa=function(t,i){var n=null,e=!1;try{var s=!1,c={},a=null;switch(i.type){case"text":i.content&&(s=!0,c={preview:i.preview},a=function(){x.Chat.Event.Ga(n)});break;case"file":i.content&&i.content.url&&(s=!0,a=function(){x.Chat.Event.Xa(n)});break;case"animation":i.content&&i.content.url&&(s=!0);break;case"audio":i.content&&i.content.url&&i.content.duration&&(s=!0,c={duration:x.Date.format_time(i.content.duration)},a=function(){x.Chat.Event.Za(n,i)});break;case"picker":i.content&&i.content.id&&i.content.text&&0<(i.content.choices||[]).length&&(s=!0,c={has_selected:this.uh(i.content)},a=function(){x.Chat.Event.Qa(n,t,i)});break;case"field":i.content&&i.content.id&&i.content.text&&i.content.explain&&(s=!0,a=function(){x.Chat.Event.tr(n,i),x.Chat.Field.Yc(!0)});break;default:throw new Error("Got an unsupported message (with type: "+i.type+")")}if(!0!==s)throw new Error("Got an invalid "+type+" message, dropping it");"to"===t&&"participant"===(i.user||{}).type&&(c.participant=!0),!0===i.edited&&(c.edited=!0),!0===i.translated&&(c.translated=!0);var r=this.th(i.type,t,i.user||{},i.content,i.timestamp,i.fingerprint,c),o=p(r,2),n=o[0],e=o[1];x.Chat.Event.Va(n),"welcome"===(i.user||{}).source&&"helpdesk"===((i.preview||[])[0]||{}).variant&&x.Chat.Event.Wa(n),"function"==typeof a&&a()}catch(t){}finally{return[n,e]}},f.prototype.No=function(){try{0<this.Lo.length&&(this.Wn(this.Lo,!0),this.Lo=[]),x.Chat.State.lh("intent"),x.Chat.State.lh("scroll"),this.To(!0)}catch(t){}},f.prototype.Ao=function(){try{x.Library.crisp.client.Message.set_unread_messages_callback(function(t,i,n){x.Utility.set_timeout(function(){x.Chat.Notification.fh(t,i,n)},0)})}catch(t){}},f.prototype.Oo=function(n){var e=this;try{this.Mo.push(n),x.Utility.set_timeout(function(){try{var t,i=e.Mo.indexOf(n);-1===i||((t=x.Chat.Selector.get("flow_messages").find([".cc-b3wa",'[data-fingerprint="'+n+'"]'].join(""))).find(".cc-1did").safe_css_text("display","none"),t.find(".cc-pus6").safe_css_text("display","block")),e.Mo.splice(i,1)}catch(t){}},this.dh)}catch(t){}},f.prototype.To=function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{x.Chat.Intent.Kc.game||!1===x.Chat.Intent.Kc.game||!0!==this.ut||!0===this.lt||null===this.ph&&(this.ph=x.Utility.set_timeout(function(){try{!(t.ph=null)!==t.lt&&!0===x.Base.I.chat.wait_game&&x.Chat.Intent.zt("game")}catch(t){}},!0===i?this.vh:this.yh))}catch(t){}},f.prototype.uh=function(t){var i=!1;try{for(var n=0;n<t.choices.length;n++)if(!0===t.choices[n].selected){i=!0;break}}catch(t){}finally{return i}},f.prototype.Jo=function(t,i,n,e){var s=4<arguments.length&&void 0!==arguments[4]&&arguments[4],c=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[];try{if(-1===this.Do.indexOf(t))throw new Error("Source "+t+" not allowed");this.mh[t]!==i&&(this.mh[t]=i,this.received({type:n,timestamp:0,content:e,fingerprint:"$"+t,preview:a,user:{source:t,type:"website",user_id:x.Base.Be,nickname:x.Base.I.website.name}},!1,s,c,!0))}catch(t){}},f.prototype.Vo=function(t){var i;try{if(-1===this.Do.indexOf(t))throw new Error("Source "+t+" not allowed");this.mh[t]&&(delete this.mh[t],(i=x.Chat.Selector.get("flow_messages").find([".cc-b3wa",'[data-fingerprint="$'+t+'"]'].join("")))&&1===i.length&&this.er(i))}catch(t){}},f.prototype.Xo=function(t){var i=!1;try{var n=(t.content||{}).type,i="file"===t.type&&(-1!==this.ih.image.indexOf(n)||-1!==this.ih.video.indexOf(n))&&!0}catch(t){}finally{return i}},f.prototype.c=function(){try{this.Ge=!1,this.lt=!1,this.ut=!1,this.sc=0,this.rh=!1,this.oh=!1,this.Mo=[],this.Lo=[],this.Yo=[],this.Uo=null,this.ph=null,this.Bo=null,this.mh={}}catch(t){}},new f),x.Chat.Misc=(l.prototype.init=function(){},l.prototype.reset=function(){try{this.c()}catch(t){}},l.prototype.Ro=function(t){try{x.Utility.is_equal(t,this._h)||x.Chat.State.propagate("operator",t)}catch(t){}},l.prototype.c=function(){try{this._h={}}catch(t){}},new l),x.Chat.Notification=(u.prototype.init=function(){},u.prototype.reset=function(){try{this.c()}catch(t){}},u.prototype.fh=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];try{var s,c,a="cc-z74s";0<(this.dt=t)?(x.Chat.Selector.get("pane_unread").text(t),s="none"===x.Chat.Selector.get("tooltips_new_messages").css("display")&&!0,c=this.gh(t,n,e,s),null===this.wh&&(this.wh=document.title),this.wh&&!0!==x.Base.He()&&(document.title=""+t+" - "+this.wh),1==s&&(x.Feature.has_css_animations()?(null!==this.bh&&x.Utility.clear_timeout(this.bh),this.bh=x.Utility.set_timeout(function(){i.bh=null,x.Chat.Selector.get("tooltips_new_messages").safe_css_text("display","block"),x.Chat.Selector.get("tooltips_new_messages").addClass(a),0<c.length&&(x.Chat.Selector.Vr.attr("data-visible-subtle","true"),!0===x.Action.is_chat_closed()&&x.Chat.Selector.Vr.addClass(x.Chat.Interface.Hr.shade.maximize)),x.Utility.set_timeout(function(){x.Chat.Selector.Vr.removeClass(x.Chat.Interface.Hr.shade.maximize),x.Chat.Selector.get("tooltips_new_messages").removeClass(a)},i.kh)},this.xh*this.Lt)):(x.Chat.Selector.get("tooltips_new_messages").safe_css_text("display","block"),0<c.length&&x.Chat.Selector.Vr.attr("data-visible-subtle","true")),x.Chat.Selector.get("pane_unread").safe_css_text("display","block"))):(null!==this.bh&&x.Utility.clear_timeout(this.bh),x.Chat.Selector.get("tooltips_new_messages").removeClass(a),x.Chat.Selector.get("tooltips_new_messages").safe_css_text("display","none"),x.Chat.Selector.get("pane_unread").safe_css_text("display","none"),x.Chat.Selector.Vr.attr("data-visible-subtle","false"),x.Chat.Selector.get("tooltips_extended_actions").safe_css_text("display","none"),x.Chat.Selector.get("tooltips_extended_preview").empty(),this.wh&&(document.title=this.wh))}catch(t){}},u.prototype.br=function(){try{var t=x.Chat.Selector.get("flow")[0].scrollTop,i=x.Chat.Selector.get("flow")[0].scrollHeight;x.Chat.Selector.get("flow")[0].clientHeight+t>=i-x.Chat.Interface.Co&&x.Chat.Alert.zt("new_messages","hide")}catch(t){}},u.prototype.gh=function(t,i,n,e){var s=[];try{var c=null,a=!1,r=[];x.Chat.Selector.get("tooltips_extended_actions").safe_css_text("display","none"),x.Chat.Selector.get("tooltips_extended_preview").empty();for(var o=n.length-1;0<=o&&!(-1!==i.indexOf(n[o].fingerprint)&&(s.unshift(n[o]),s.length>=this.Fh));o--);for(var h=0;h<s.length;h++){var u=x.Library.dom(x.Template.render("chat_preview_message",{type:s[h].type,from:s[h].from,content:s[h].content,user:s[h].user||{},format_context:{methods:{filter_link_safe:x.Utility.filter_link_safe.p(x.Utility)}},environment:{url:{crisp_image:x.Base._}}}));0<u.length&&(a=!0,u.appendTo(x.Chat.Selector.get("tooltips_extended_preview")),null===(c=h===s.length-1&&null===c?s[h].fingerprint:c)&&null!==this.jh||r.push(u))}if(!0===a&&x.Chat.Selector.get("tooltips_extended_actions").safe_css_text("display","inline-block"),null!==c&&(this.jh=c),x.Feature.has_css_animations()&&0<r.length){for(var l=0;l<r.length;l++)r[l].addClass("cc-1peb");x.Utility.set_timeout(function(){for(var t=0;t<r.length;t++)r[t].removeClass("cc-1peb")},(!0===e?this.xh*this.Lt:0)+this.qh)}}catch(t){}finally{return s}},u.prototype.c=function(){try{this.dt=0,this.Lt=1e3,this.xh=.1,this.bh=null,this.jh=null,this.wh=null,this.kh=500,this.qh=1e3}catch(t){}},new u),x.Chat.Scroll=(o.prototype.init=function(){},o.prototype.reset=function(){try{this.c()}catch(t){}},o.prototype.kr=function(){var t,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;try{null===i&&(i=(t=x.Chat.Selector.get("flow")[0]).scrollHeight-t.clientHeight),x.Chat.State.propagate("scroll",i),x.Chat.Notification.br()}catch(t){}},o.prototype.So=function(){var t,i,n,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"to",s=!1;try{!0===x.Chat.Interface.$r()&&(t=x.Chat.Selector.get("flow")[0].scrollTop,i=x.Chat.Selector.get("flow")[0].scrollHeight,n=x.Chat.Selector.get("flow")[0].clientHeight,(!t||n+t>=i-this.vo)&&(s=!0,this.kr()),!1===s&&"from"===e&&!1===x.Chat.Alert.Xc("warn_reply")&&!1===x.Chat.Alert.Xc("email_invalid")&&!1===x.Chat.Alert.Xc("wait_reply")&&x.Chat.Alert.zt("new_messages","show"))}catch(t){}finally{return s}},o.prototype.c=function(){try{this.vo=0,this._r=0}catch(t){}},new o),x.Chat.Selector=(a.prototype.init=function(){},a.prototype.reset=function(){try{this.c(),this.Ps()}catch(t){}},a.prototype.get=function(t){var i=null;try{if(void 0!==this.zh[t])i=this.zh[t];else{if(void 0===this.Eh[t])throw new Error("Selector with namespace "+t+" not found");if(this.$c){if(0===(i=this.$c.find("."+this.Eh[t])).length)throw new Error("Could not select the element with namespace: "+t);this.zh[t]=i}}}catch(t){}finally{return i}},a.prototype.Mc=function(){try{this.Ch(),this.Jc()}catch(t){}},a.prototype.Ch=function(){try{this.Ah=x.Library.dom('head meta[name="viewport"]')}catch(t){}},a.prototype.Jc=function(){try{this.Vr=this.$c.find(".cc-yqwh"),this.mr=this.$c.find(".cc-ge4v"),this.Ac=this.$c.find(".cc-unoo")}catch(t){}},a.prototype.Ps=function(){try{this.Ah=null,this.$c=null,this.Vr=null,this.mr=null,this.Ac=null}catch(t){}},a.prototype.c=function(){try{this.zh={}}catch(t){}},new a),x.Chat.State=(c.prototype.init=function(){},c.prototype.reset=function(t){var i=this;try{this.c(),t.push(function(){i.Sh()})}catch(t){}},c.prototype.receive=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{var n=void 0,e=void 0,s=[];for(n in t)t.hasOwnProperty(n)&&(x.Utility.is_equal(t[n],this.Ih[n])||(s.push(n),this.Ih[n]=t[n],!1===i&&void 0!==this.Dh[n]&&delete this.Dh[n]));for(e=0;e<s.length;e++)n=s[e],this.Rh[n].p(this)(this.Ih[n])}catch(t){}},c.prototype.propagate=function(t,i){var n,e=2<arguments.length&&void 0!==arguments[2]&&arguments[2],s=this,c=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:function(){};try{!0!==e&&x.Utility.is_equal(this.Ih[t],i)?"function"==typeof c&&c(!1):(this.Dh[t]=i,null!==this.Bh&&(x.Utility.clear_timeout(this.Bh),this.Bh=null),(n=x.Utility.clone(this.Ih))[t]=i,this.receive(n,!0),this.Bh=x.Utility.set_timeout(function(){var t;x.Utility.is_empty(s.Dh)?"function"==typeof c&&c(!1):(t=x.Utility.clone(s.Dh),s.Dh={},s.Bh=null,x.Library.crisp.client.Session.set_state(t,function(t){t?"function"==typeof a&&a():"function"==typeof c&&c(!0)}))},this.Oh))}catch(t){}},c.prototype.Vc=function(t){try{for(var i in!0===x.Base.ht()&&(t.maximized=!1),this.Uh)void 0===t[i]&&(t[i]=this.Uh[i]);this.$h=!0,this.Ih=t,this.Mh=x.Utility.keys(this.Ih)}catch(t){}},c.prototype.lh=function(t){try{this.Th(t,this.Uh[t])}catch(t){}},c.prototype.so=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];try{var i=void 0;for(i in this.Uh)this.Uh.hasOwnProperty(i)&&this.Th(i,this.Uh[i],-1!==t.indexOf(i))}catch(t){}},c.prototype.Th=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];try{if("function"!=typeof this.Rh[t])throw new Error("No such state handler: "+t);void 0===this.Ih[t]&&(this.Ih[t]=i),this.Rh[t].p(this)(this.Ih[t],n)}catch(t){}},c.prototype.Nh=function(t){var i=!1;try{var n=this.Mh.indexOf(t);-1!==n&&(this.Mh.splice(n,1),i=!0)}catch(t){}finally{return i}},c.prototype.Lh=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{if(!1===i&&(this.Nh("trigger"),t&&0<t.length))for(var n=0;n<t.length;n++)x.Trigger.Ie(t[n])}catch(t){}},c.prototype.Ph=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{if(!1===i){this.Nh("alert");var n,e,s,c=void 0,a=void 0,r=void 0,o=void 0,h=[["show","unlock"],["unlock","show"],["hide","lock"],["lock","hide"],["lock","show"]];for(a in t)if(t.hasOwnProperty(a)){if(n=t[a],e=x.Chat.Alert.Kc[a],r=x.Chat.Selector.get("alerts").find([".cc-sel9",'[data-type="'+a+'"]'].join("")),c=!1,e===n)c=!0;else if("unlock"!==n&&"lock"===e)c=!0;else for(o=0;o<h.length;o++)e===(s=h[o])[0]&&n===s[1]&&(c=!0);if(0<r.length&&!1===c){if("show"===n||"unlock"===n)x.Chat.Selector.get("alerts_one").safe_css_text("display","none"),r.safe_css_text("display","inline-block"),x.Chat.Selector.get("content").attr("data-has-alert-"+a,"true"),x.Chat.Alert.Zc("show",a);else{if("hide"!==n&&"lock"!==n)throw new Error("Unknown action: "+n);r.safe_css_text("display","none"),x.Chat.Selector.get("content").removeAttr("data-has-alert-"+a),x.Chat.Alert.Zc("hide",a)}x.Chat.Alert.Kc[a]=n,x.Chat.Field.Yc()}else x.Chat.Alert.Kc[a]=n}}}catch(t){}},c.prototype.Jh=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{if(x.Chat.Intent.Kc=t,!1===i){var n=this.Nh("intent"),e=void 0;for(e in t)x.Chat.Intent.ra(e,t[e],!n);x.Chat.Intent.aa(t)}}catch(t){}},c.prototype.Hh=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{if(!1===i){this.Nh("operator");var n=void 0,e=void 0,s=void 0,c=void 0,a=void 0,r=void 0;if(x.Chat.Misc._h=t||{},x.Utility.is_empty(x.Chat.Misc._h)?(n="initial",s="website",c=x.Base.Be):(n="ongoing",s=t.type||"operator",c=t.user_id,a=t.avatar,e="website"===t.type?t.nickname:x.Library.crisp.web.Name.parse_first_name(t.nickname)),r=a||c?x.Avatar.url(this.Vh,s,c,a):r){if("ongoing"===n){for(var o=x.Chat.Selector.get("header_avatar").first().siblings()||[],h=x.Chat.Selector.get("header_avatar").find(".cc-1wwd"),u=0;u<o.length;u++)x.Library.dom(o[u]).remove();h&&(h.attr("data-has-name",e?"true":"false"),h.find(".cc-1ybw").text(e||"")),x.Chat.Selector.get("header_operator").text(e||""),x.Chat.Selector.get("header_avatar_resource").safe_css_text("background-image","url('"+r+"')"),x.Chat.Selector.get("header").attr("data-with-website-name",e===x.Base.I.website.name?"false":"true"),!0===x.Base.I.chat.ongoing_operator_face&&(x.Chat.Selector.get("pane_avatar_resource").safe_css_text("background-image","url('"+r+"')"),x.Chat.Selector.get("pane_icon").attr("data-is-ongoing","true"))}x.Chat.Selector.mr&&x.Chat.Selector.mr.attr("data-chat-status",n)}}}catch(t){}},c.prototype.Wh=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{!1===i&&!1===this.Nh("scroll")&&(x.Chat.Scroll._r=t,x.Chat.Selector.get("flow")[0].scrollTop=x.Chat.Scroll._r)}catch(t){}},c.prototype.Gh=function(t){var i,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{!1===n&&(i=!0!==this.Nh("maximized")&&!0,!1===(t=!0===x.Base.Os.lock_maximized||t)?(x.Chat.Interface.Pr("pane",i),x.Chat.Field.Mr(),x.Chat.Viewport.mo(),x.Chat.Picker.ga(),x.Action._t("chat:closed")):(x.Chat.Interface.Pr("chat",i),x.Chat.Field.Yc(),x.Chat.Viewport.yo(),x.Chat.Notification.br(),x.Action._t("chat:opened")))}catch(t){}},c.prototype.Yh=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{!1===i&&(this.Nh("textarea"),x.Action.set_message_text(t))}catch(t){}},c.prototype.Sh=function(){try{this.Uh={trigger:x.Trigger.De,alert:x.Chat.Alert.Kc,intent:x.Chat.Intent.Kc,operator:x.Chat.Misc._h,scroll:x.Chat.Scroll._r,maximized:x.Chat.Interface.ot,textarea:x.Chat.Field.Tr}}catch(t){}},c.prototype.c=function(){try{this.$h=!1,this.Ih={},this.Dh={},this.Mh=[],this.Bh=null}catch(t){}},new c),x.Chat.Viewport=(s.prototype.init=function(){},s.prototype.reset=function(){try{this.c()}catch(t){}},s.prototype.yo=function(){var t,i;try{!0===x.Base.ht()?(!1===this.Kh&&(null===this.Xh&&(this.Xh=this.Zh()),(t=x.Utility.clone(this.Xh)).width="device-width",t["initial-scale"]="1",t["maximum-scale"]="1",t["user-scalable"]="0",i=this.Qh(t),null!==x.Chat.Selector.Ah&&0<x.Chat.Selector.Ah.length?x.Chat.Selector.Ah.attr("content",i):(x.Chat.Selector.Ah=x.Library.dom(x.Template.render("viewport",{content:i})),x.Library.dom("head").append(x.Chat.Selector.Ah))),this.Kh=!0):this.Kh=!1}catch(t){}},s.prototype.mo=function(){var t;try{!0===this.Kh&&(null!==x.Chat.Selector.Ah&&0<x.Chat.Selector.Ah.length&&((t=this.Qh(this.Xh))?x.Chat.Selector.Ah.attr("content",t):(x.Chat.Selector.Ah.remove(),x.Chat.Selector.Ah=null)),this.Kh=!1)}catch(t){}},s.prototype.Zh=function(){var t={};try{if(t={},0<x.Chat.Selector.Ah.length){var i=x.Chat.Selector.Ah.attr("content");if(i=(i=i.trim()).replace(this.tu,","))for(var n,e,s=void 0,c=void 0,a=void 0,r=-1!==i.indexOf(",")?i.split(","):[i],s=0;s<r.length;s++)-1!==(c=r[s]).indexOf("=")&&(n=(a=c.split("="))[0].trim(),e=a[1].trim(),n&&e&&(t[n]=e))}}catch(t){}finally{return t}},s.prototype.Qh=function(t){var i="";try{var n=void 0,e=[];for(n in t)t.hasOwnProperty(n)&&e.push([n,t[n]].join("="));i=e.join(", ")}catch(t){}finally{return i}},s.prototype.c=function(){try{this.Kh=!1,this.Xh=null}catch(t){}},new s),x.Browsing=(e.prototype.reset=function(){try{x.Utility.reset_instance_children(x.Browsing),this.Ps()}catch(t){}},e.prototype.Ps=function(){try{this.iu=null,this.nu=null}catch(t){}},new e),x.Browsing.Assist=(n.prototype.reset=function(){try{this.stop(),this.Ps(),this.c()}catch(t){}},n.prototype.start=function(){try{null===x.Browsing.nu&&(x.Browsing.nu=this.eu,x.Browsing.iu=x.Library.dom(x.Template.render("browsing_assist",{configuration:x.Base.I})),this.su=x.Browsing.iu.find(".cc-lvhc"),x.Base.G.append(x.Browsing.iu))}catch(t){}},n.prototype.stop=function(){try{x.Browsing.nu===this.eu&&(x.Browsing.nu=null,x.Browsing.iu.remove(),x.Browsing.iu=null,this.su=null)}catch(t){}},n.prototype.Zn=function(t){try{x.Browsing.nu===this.eu&&null!==this.su&&t.mouse&&this.su.safe_css_text({display:"inline-block",left:t.mouse.x+"px",top:t.mouse.y+"px"})}catch(t){}},n.prototype.Qn=function(t){var i=this;try{if(x.Browsing.nu===this.eu&&t.scroll&&window.scroll){null!==this.cu&&x.Utility.clear_interval(this.cu);var n,e={x:window.scrollX,y:window.scrollY},s={x:0,y:0};for(n in s)s.hasOwnProperty(n)&&(s[n]=(t.scroll[n]-e[n])/this.au);var c=0,a=this.ru/this.au;0<a&&(0!==s.x||0!==s.y)&&(x.Library.crisp.client.Browsing.toggle_ignore_scroll_event(!0),this.cu=x.Utility.set_interval(function(){e.x+=s.x,e.y+=s.y,window.scroll(e.x,e.y),++c>=i.au&&(x.Utility.clear_interval(i.cu),(i.cu=null)!==i.ou&&x.Utility.clear_timeout(i.ou),i.ou=x.Utility.set_timeout(function(){i.ou=null,x.Library.crisp.client.Browsing.toggle_ignore_scroll_event(!1)},i.hu))},a))}}catch(t){}},n.prototype.te=function(t){var i,n,e,s,c=this;try{x.Browsing.nu===this.eu&&(null!==this.su&&(this.su.attr("data-is-clicking","true"),null!==this.uu&&x.Utility.clear_timeout(this.uu),this.uu=x.Utility.set_timeout(function(){c.uu=null,c.su.removeAttr("data-is-clicking")},this.lu)),t.click&&(i=t.click.x-this.fu,n=t.click.y,i<0&&(i=0),e=document.elementFromPoint(i,n),(s=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,window,null,t.click.x,t.click.y,0,0,!1,!1,!1,!1,0,null),s.du=!0,e&&e.dispatchEvent(s)))}catch(t){}},n.prototype.Ps=function(){try{this.su=null}catch(t){}},n.prototype.c=function(){try{this.cu=null,this.ou=null,this.uu=null}catch(t){}},new n),x.Call=(i.prototype.reset=function(){try{this.c()}catch(t){}},i.prototype.ring=function(t){try{this.pu(),x.Sound.initialize("call"),this.vu(t.user),this.yu=t.mode,this.mu=x.Library.dom(x.Template.render("call_ring",{configuration:x.Base.I,mode:this.yu,user:this._u})),this.gu(),x.Base.G.append(this.mu),x.Sound.start("call","call-ring",!0)}catch(t){}},i.prototype.screen=function(){try{this.pu(),this.mu=x.Library.dom(x.Template.render("call_screen",{configuration:x.Base.I,mode:this.yu,user:this._u,features:{screensharing:x.Library.crisp.client.Call.has_support_screensharing()}})),this.wu(),this.bu("connecting"),x.Base.G.append(this.mu)}catch(t){}},i.prototype.stop=function(){try{this.pu(),x.Sound.start("call","call-hangup")}catch(t){}},i.prototype.success=function(t){try{switch(t){case"media_remote":this.ku();break;case"media_local":this.xu()}}catch(t){}},i.prototype.error=function(t){try{this.pu(),x.Sound.start("call","call-hangup")}catch(t){}},i.prototype.toggle_media_status=function(t){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];try{var n,e=this.mu.find('.cc-1qzq[data-type="'+t+'"]')||[],s=this.mu.find('.cc-10o9[data-type="'+t+'"]')||[],c=!1===i?"inline-block":"none";0<e.length&&e.attr("data-state",!0===i?"true":"false"),0<s.length&&s.safe_css_text("display",c),"audio"!==t||0<(n=this.mu.find(".cc-fi91")||[]).length&&n.safe_css_text("display",c)}catch(t){}},i.prototype.pu=function(){try{null!==this.mu&&(this.mu.remove(),this.mu=null,this.Fu=null,this.ju=!1,this.qu(),x.Sound.stop("call","call-ring"))}catch(t){}},i.prototype.xu=function(){try{this.zu("local")}catch(t){}},i.prototype.ku=function(){var t;try{!0===this.zu("remote")&&(this.bu("ongoing"),0<(t=this.mu.find(".cc-1tpr")||[]).length&&(!0===this.Eu("remote")?t.safe_css_text("display","none"):t.safe_css_text("display","block")),x.Sound.start("call","call-established"))}catch(t){}},i.prototype.zu=function(t){var i=this.mu.find('.cc-r1gp[data-type="'+t+'"]')||[],n=x.Library.crisp.client.Call.get_stream(t);if(0<i.length&&null!==n&&0<(t=i.find("video")||[]).length){var e=t[0];return e.srcObject=n,e.onloadeddata=function(){var t=e.videoWidth<e.videoHeight?"contain":null;null!==t&&i.attr("data-aspect",t)},!0}return!1},i.prototype.vu=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};try{this._u={user_id:t.user_id||x.Base.Be,nickname:t.nickname||x.Base.I.website.name,type:t.user_id?"operator":"website"}}catch(t){}},i.prototype.bu=function(t){try{var i=this.mu.find(".cc-ulj3")||[],n=this.mu.find([".cc-ulj3",'[data-state="'+t+'"]'].join(""))||[],e=this.mu.find(".cc-1qzq[data-state]")||[];0<i.length&&0<n.length&&(i.safe_css_text("display","none"),n.safe_css_text("display","inline-block")),0<e.length&&e.safe_css_text("display","ongoing"===t?"inline-block":"none"),"ongoing"===t&&this.Cu()}catch(t){}},i.prototype.Au=function(){var t,i;try{"minimized"===this.Fu||!0!==this.Eu("remote")||(t=(this.mu.find('.cc-r1gp[data-type="remote"] video')||[])[0])&&(i=null,"function"==typeof(i=!1===this.ju?t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen||null:t.exitFullscreen||t.msExitFullscreen||t.mozExitFullScreen||t.webkitExitFullScreen||null)&&i.p(t)())}catch(t){}},i.prototype.Su=function(){var t;try{!0===this.Eu("remote")&&(t=this.mu.find('.cc-r1gp[data-type="remote"]')||[],!0===this.ju?t.attr("data-aspect","contain"):t.removeAttr("data-aspect"))}catch(t){}},i.prototype.Cu=function(){var t,i=this;try{this.qu(),null===this.Iu&&(t=this.mu.find(".cc-x7ly")||[],this.Du=0,this.Iu=x.Utility.set_interval(function(){i.Du++,0<t.length&&t.text(x.Date.format_time(i.Du,!0))},this.Lt))}catch(t){}},i.prototype.qu=function(){try{null!==this.Iu&&(x.Utility.clear_interval(this.Iu),this.Iu=null)}catch(t){}},i.prototype.gu=function(){try{var t=this.mu.find(".cc-ekfv")||[];if(0<t.length){t.on("click",function(t){try{var i,n=t.target?x.Library.dom(t.target):[];0<n.length&&0<(i=n.parents(".cc-ui2y")||[]).length&&("accept"===i.attr("data-action")?(x.Library.crisp.client.Call.accept(),x.Call.screen()):x.Library.crisp.client.Call.decline())}catch(t){}finally{return!1}});for(var i=0;i<t.length;i++)t[i].onclick=function(){return!1}}}catch(t){}},i.prototype.wu=function(){var a=this;try{var r,o,h,u,i,s,n,e,t=this.mu.find(".cc-1qzq")||[],c=this.mu.find('.cc-r1gp[data-type="remote"] video')||[],l=this.mu.find(".cc-1j41")||[];if(0<t.length){t.on("click",function(t){try{var i=t.target?x.Library.dom(t.target):[];if(0<i.length)switch(i.attr("data-type")){case"video":x.Library.crisp.client.Call.toggle_video();break;case"audio":x.Library.crisp.client.Call.toggle_audio();break;case"screensharing":x.Library.crisp.client.Call.toggle_screensharing();break;case"hangup":x.Library.crisp.client.Call.stop();break;case"toggle":a.Fu="minimized"===a.Fu?"maximized":"minimized",l.attr("data-mode",a.Fu),l.safe_css_text(null)}}catch(t){}finally{return!1}});for(var f=0;f<t.length;f++)t[f].onclick=function(){return!1}}0<c.length&&(c.on("dblclick",function(){try{a.Au()}catch(t){}finally{return!1}}),c.on("fullscreenchange",function(){try{a.ju=!!document.fullscreenElement,a.Su()}catch(t){}finally{return!1}})),0<l.length&&(u=h=o=r=void 0,i=function(t,i,n,e){r=l.prop("offsetLeft"),o=l.prop("offsetTop"),h=t.clientX,u=t.clientY,x.Utility.add_event_listener(a.ns,"document",i,s),x.Utility.add_event_listener(a.ns,"document",n,e)},s=function(t){t.preventDefault(),t.stopPropagation();var i=(t.touches||[])[0]?t.touches[0]:t,n=o+(i.clientY-u),e=r+(i.clientX-h),s=a.Ru,c=a.Ru,t=window.innerWidth-l[0].clientWidth-a.Ru,i=window.innerHeight-l[0].clientHeight-a.Ru;return e<s?e=s:t<e&&(e=t),n<c?n=c:i<n&&(n=i),l.safe_css_text({top:n+"px",left:e+"px"}),!1},n=function(){x.Utility.remove_event_listener(a.ns,"document","mousemove"),x.Utility.remove_event_listener(a.ns,"document","mouseup")},e=function(){x.Utility.remove_event_listener(a.ns,"document","touchmove"),x.Utility.remove_event_listener(a.ns,"document","touchend")},l[0].addEventListener("mousedown",function(t){"minimized"===a.Fu&&i(t,"mousemove","mouseup",n)}),l[0].addEventListener("touchstart",function(t){"minimized"!==a.Fu||null!==(t=(t.touches||[])[0]||null)&&i(t,"touchmove","touchend",e)}))}catch(t){}},i.prototype.Eu=function(t){return null!==(t=x.Library.crisp.client.Call.get_stream(t))&&0<t.getVideoTracks().length},i.prototype.c=function(){try{this.mu=null,this.Fu=null,this.yu=null,this.Du=0,this.Iu=null,this.ju=!1,this._u={}}catch(t){}},new i),_dollar_crisp={push:x.Pipeline.push.p(x.Pipeline),get:x.Pipeline.get.p(x.Pipeline),set:x.Pipeline.set.p(x.Pipeline),is:x.Pipeline.is.p(x.Pipeline),on:x.Pipeline.on.p(x.Pipeline),off:x.Pipeline.off.p(x.Pipeline),do:x.Pipeline.do.p(x.Pipeline),config:x.Pipeline.config.p(x.Pipeline),safe:x.Pipeline.safe.p(x.Pipeline),help:x.Pipeline.help.p(x.Pipeline)},Object.defineProperty(_dollar_crisp,"__init",{enumerable:!1,value:x.Base.init.p(x.Base)}),Object.defineProperty(_dollar_crisp,"__spool",{enumerable:!1,value:{}}),Object.defineProperty(_dollar_crisp,"__debug",{enumerable:!1,value:x}),_dollar_crisp.__spool.pending_actions=[],"object"==typeof window.$crisp&&0<window.$crisp.length)for(var t=0;t<window.$crisp.length;t++)_dollar_crisp.__spool.pending_actions.push(window.$crisp[t]);window.$crisp=_dollar_crisp}catch(t){}function i(){try{this.ns="CrispCall",this.Ru=6,this.Lt=1e3,this.c()}catch(t){}}function n(){try{this.ns="CrispBrowsingAssist",this.eu="assist",this.ru=500,this.hu=750,this.au=100,this.fu=5,this.lu=600,this.Ps(),this.c()}catch(t){}}function e(){try{this.ns="CrispBrowsing",this.Ps()}catch(t){}}function s(){try{this.ns="CrispChatViewport",this.tu=/;/g,this.c()}catch(t){}}function c(){try{this.ns="CrispChatState",this.Oh=250,this.Vh=240,this.Rh={trigger:this.Lh,alert:this.Ph,intent:this.Jh,operator:this.Hh,scroll:this.Wh,maximized:this.Gh,textarea:this.Yh},this.Sh(),this.c()}catch(t){}}function a(){try{this.ns="CrispChatSelector",this.Eh={pane_icon:"cc-15mo",pane_avatar_resource:"cc-1dx3",pane_unread:"cc-12u5",header:"cc-x32x",header_avatar:"cc-furf",header_avatar_resource:"cc-1do6",header_operator:"cc-txwe",header_status_type_away:"cc-12fb",header_channel:"cc-1qlt",drop_over:"cc-1hl5",content:"cc-qqzz",flow:"cc-1v5j",flow_messages:"cc-3lvj",flow_events:"cc-192e",pickers:"cc-1tha",pickers_selector_one:"cc-mxq4",pickers_inner_one:"cc-5ftt",pickers_search_input:"cc-19m8",pickers_smiley:["cc-5ftt",'[data-type="smiley"]'].join(""),pickers_gif:["cc-5ftt",'[data-type="gif"]'].join(""),offline:"cc-41gl",alerts:"cc-14ou",alerts_one:"cc-sel9",alerts_new_messages:["cc-sel9",'[data-type="new_messages"]'].join(""),alerts_warn_reply:["cc-sel9",'[data-type="warn_reply"]'].join(""),alerts_email_invalid:["cc-sel9",'[data-type="email_invalid"]'].join(""),form_container:"cc-g7iw",form_message:"cc-1uz4",form_act:"cc-1cxr",form_button_send:"cc-br7s",form_button_smiley:["cc-1y2e",'[data-type="smiley"]'].join(""),form_button_attach:["cc-1y2e",'[data-type="file"]'].join(""),form_textarea_message:"cc-pjpe",form_input_attach:"cc-do6v",tooltips_new_messages:["cc-1bue",'[data-id="new_messages"]'].join(""),tooltips_new_messages_text:["cc-1div",'[data-for-id="new_messages"]'].join(""),tooltips_extended_actions:"cc-86w0",tooltips_extended_preview:"cc-2zuy"},this.Ps(),this.c()}catch(t){}}function o(){try{this.ns="CrispChatScroll",this.c()}catch(t){}}function u(){try{this.ns="CrispChatNotification",this.Fh=5,this.c()}catch(t){}}function l(){try{this.ns="CrispChatMisc",this.c()}catch(t){}}function f(){try{this.ns="CrispChatMessage",this.$o=1500,this.Wo=500,this.dh=3e4,this.yh=6e4,this.vh=3e4,this.hh=400,this.Qo=5e3,this.Zo=12e4,this.nh=600,this.eh=600,this.Ko="urn:crisp.im:triggers:0",this.Do=["welcome","identity","game"],this.Ho=["email","phone"],this.ih={image:["image/jpg","image/jpeg","image/png","image/gif"],video:["video/mp4","video/webm"]},this.sh=[".cc-xtol",".cc-1kje"],this.c()}catch(t){}}function d(){try{this.ns="CrispChatInterface",this.uo=320,this.ho=380,this.fo=360,this.lo=460,this.oo=400,this.ao=580,this.po=8,this.Wr=500,this.wo=250,this.bo=100,this.Fo=250,this.jo=1e3,this.Xr=1e3,this.Zr=1e3,this.Qr=216e5,this.Eo=500,this.no={"small-smile":":)","big-smile":":D",blushing:":$",confused:"x)",cool:"8)",crying:":'(",embarrased:":/",heart:"<3",laughing:":'D",sad:":(",angry:":@",sick:":S","thumbs-up":"+1",surprised:":o",tongue:":P",winking:";)"},this.xo=["image","video"],this.Hr={minimized:{minimize:"cc-b9vr",maximize:"cc-14qm"},shade:{minimize:"cc-m8rr",maximize:"cc-1pmi"},chat:{minimize:"cc-z8ln",maximize:"cc-12h3"}},this.c()}catch(t){}}function v(){try{this.ns="CrispChatGame",this.c()}catch(t){}}function y(){try{this.ns="CrispChatField",this.c()}catch(t){}}function m(){try{this.ns="CrispChatEvent",this.Ar=120,this.wr=1e3,this.gr=10,this.xr=500,this.ur=100,this.hr=2,this.Ir=1e3,this.qr=.2,this.Br="File",this.Or="application/octet-stream",this.Ur=2e3,this.jr=/\n/g,this.c()}catch(t){}}function _(){try{this.ns="CrispChatPicker",this.Fa=10,this.qa={gif:this.za},this.c()}catch(t){}}function g(){try{this.ns="CrispChatIntent",this.ca=["identity","game"],this.oa={identity:this.ha,game:this.da},this.c()}catch(t){}}function w(){try{this.ns="CrispChatAlert",this.Qc={warn_reply:this.ta,email_invalid:this.na},this.c()}catch(t){}}function b(){try{this.ns="CrispChat",this.c()}catch(t){}}function k(){try{this.ns="CrispMinimizedSelector",this.c()}catch(t){}}function F(){try{this.ns="CrispMinimizedInterface",this.Lt=1e3,this.Pc=.25,this.Lc=2,this.Tc=1e3,this.Nc=500,this.Oc=12e3,this.Ic="minimized",this.Dc="1",this.c()}catch(t){}}function j(){try{this.ns="CrispMinimizedEvent"}catch(t){}}function q(){try{this.ns="CrispMinimized",this.c()}catch(t){}}function z(){try{this.ns="CrispBase",this.Xs=560,this.Qs=620,this.Zs=740,this.cc=6e5,this.ac=6e5,this.rc=1728e5,this.Fc=1e3,this.dc=1e4,this.oc=/_/g,this.vc={socket:!0,buster:1},this.uc={other:{container_index:1e6,show_operator_count:!0}},this.kc={childList:!0,attributes:!1,subtree:!1,characterData:!1},this.lc=/^(?:https?:[\/]*)?([^\/]+)(?:\/.*)?$/i,this.Ps(),this.c()}catch(t){}}function E(){try{this.ns="CrispTrigger",this.Lt=1e3,this.gs=18e5,this.Re="trigger",this.Oe="1",this.ts=["page","url_parameter"],this.$e={delay:this.Xe,leave:this.Qe,link:this.rs,page:this.Ue,url_parameter:this.hs,user_data:this.ls,user_event:this.ps},this.Pe={message:this.vs,open:this.ys,sound:this._s},this.es={page:this.os,url_parameter:this.us},this.c()}catch(t){}}function C(){try{this.ns="CrispEvent",this.je=6e5,this.Ee=36e5,this.Fe={capture:!1},this.c()}catch(t){}}function A(){try{this.ns="CrispAvailability",this.c()}catch(t){}}function S(){try{this.ns="CrispBroker",this.On=1,this.Ks={chat:{country:null,locale:"en",theme:"default",theme_text:"default",theme_welcome:"default",tile:"default",allowed_pages:[],blocked_pages:[],blocked_locales:[],last_operator_face:!1,ongoing_operator_face:!0,activity_metrics:!0,operator_privacy:!1,availability_tooltip:!1,hide_vacation:!1,hide_on_away:!1,hide_on_mobile:!1,position_reverse:!1,email_visitors:!0,phone_visitors:!1,force_identify:!1,ignore_privacy:!1,visitor_compose:!0,file_transfer:!0,helpdesk_link:!0,status_health_dead:!0,wait_game:!0},website:{name:"",domain:"",mailer:"",buster:1,count_operators:0,active_operators:[],response_metrics:{},last_available:x.Date.timestamp(),status:null,trial:!1},channels:{},plugins:{}},this.c()}catch(t){}}function I(){try{this.ns="CrispTemplate"}catch(t){}}function D(){try{this.ns="CrispAvatar",this.Ci=3,this.Ai=99}catch(t){}}function R(){try{this.ns="CrispLocale",this.mi="en",this.qi="ltr",this.gi=["af","ar-ae","ar-sa","ar-ye","ar","az","bg","bn","ca","cs","da","de","el","en","eo","es","et","eu","fa","fi","fo","fr","gu","he","hi","hr","hu","hy","id","is","it","ja","ka","ko","lt","lv","ml","mn","ms","nl-be","nl","no","pl","ps","pt-br","pt","ro","ru","sk","sl","sr-cyrl-cs","sr","sv","ta","th","tr","uk","vi","zh-hk","zh-tw","zh"],this._i=this.gi,this.ji=["ltr","rtl"],this.c()}catch(t){}}function B(){try{this.ns="CrispSound",this.Bu=200,this.ei={events:["chat-message-receive"],call:["call-established","call-hangup","call-ring"]},this.c()}catch(t){}}function O(){try{this.ns="CrispPlugin"}catch(t){}}function U(){try{this.ns="CrispTheme",this.Qt=16,this.Yt="default",this.Gt={default:{10:"#F5F8FB",20:"#EFF5FE",100:"#E2EEFF",200:"#6E9BDE",500:"#1972F5",600:"#055EE1",700:"#0057D7",800:"#004FC3",900:"#004AB5",reverse:"#FFFFFF"},red:{10:"#F9F9F9",20:"#F9F3F3",100:"#FFE5E4",200:"#F8796F",500:"#E61D0F",600:"#CC1B0E",700:"#C5170A",800:"#B31A0E",900:"#93150B",reverse:"#FFFFFF"},pink:{10:"#F9F9F9",20:"#F7F2F2",100:"#FFE0EB",200:"#F26C9A",500:"#F01D65",600:"#DB165A",700:"#CE1454",800:"#B3124A",900:"#A0073C",reverse:"#FFFFFF"},purple:{10:"#F9F9F9",20:"#F8F3FA",100:"#FADDFF",200:"#CA60DC",500:"#B521CF",600:"#9B19B2",700:"#9614AE",800:"#7D0B91",900:"#6B0A7C",reverse:"#FFFFFF"},deep_purple:{10:"#F9F9F9",20:"#F6F5FA",100:"#EDE2FF",200:"#936DD6",500:"#682AD5",600:"#581FBB",700:"#5019B0",800:"#42178D",900:"#310B74",reverse:"#FFFFFF"},indigo:{10:"#F9F9F9",20:"#F5F5FB",100:"#DDE2FF",200:"#5D73EA",500:"#2943D1",600:"#1732C4",700:"#112BB9",800:"#061FA7",900:"#001797",reverse:"#FFFFFF"},blue:{10:"#F5F8FB",20:"#EFF5FE",100:"#E2EEFF",200:"#6E9BDE",500:"#1972F5",600:"#055EE1",700:"#0057D7",800:"#004FC3",900:"#004AB5",reverse:"#FFFFFF"},light_blue:{10:"#F9F9F9",20:"#EFF5F7",100:"#DCF0F9",200:"#4CA4CC",500:"#009FDE",600:"#008CCB",700:"#0088C5",800:"#0070A3",900:"#00618E",reverse:"#FFFFFF"},cyan:{10:"#F9F9F9",20:"#F1F7F7",100:"#DBF7F9",200:"#4EA4AF",500:"#00A3B4",600:"#00909E",700:"#008997",800:"#007685",900:"#005965",reverse:"#FFFFFF"},teal:{10:"#F9F9F9",20:"#E7F4F4",100:"#D6EEE9",200:"#44B1A7",500:"#00947C",600:"#00816C",700:"#007B66",800:"#006057",900:"#005049",reverse:"#FFFFFF"},green:{10:"#F9F9F9",20:"#EDF5ED",100:"#D6F3D7",200:"#5BB05E",500:"#28A52D",600:"#1A941F",700:"#148919",800:"#086E0C",900:"#005C03",reverse:"#FFFFFF"},light_green:{10:"#F9F9F9",20:"#F0F7F0",100:"#DFF6C6",200:"#6FB204",500:"#6EB700",600:"#64A500",700:"#5E9C00",800:"#426C00",900:"#395E00",reverse:"#FFFFFF"},amber:{10:"#F9F9F9",20:"#F6F4ED",100:"#FFF0C1",200:"#C5A135",500:"#E1AE00",600:"#CD9E00",700:"#C49700",800:"#B28900",900:"#A37E00",reverse:"#FFFFFF"},orange:{10:"#F9F9F9",20:"#F5F5EF",100:"#FFECCF",200:"#EE9743",500:"#EC7500",600:"#DB6C00",700:"#D06701",800:"#B85C01",900:"#A45100",reverse:"#FFFFFF"},deep_orange:{10:"#F9F9F9",20:"#FDF5F5",100:"#FFE8E0",200:"#DA7859",500:"#E45300",600:"#CD4A00",700:"#C24702",800:"#963700",900:"#752B00",reverse:"#FFFFFF"},brown:{10:"#F9F9F9",20:"#F7F1EF",100:"#F2EAE7",200:"#AF7864",500:"#924B32",600:"#864027",700:"#803C24",800:"#702E17",900:"#61240E",reverse:"#FFFFFF"},grey:{10:"#F9F9F9",20:"#F4F4F4",100:"#E5E5E5",200:"#7D7D7D",500:"#7A7A7A",600:"#6B6B6B",700:"#646464",800:"#4C4C4C",900:"#3E3E3E",reverse:"#FFFFFF"},blue_grey:{10:"#F9F9F9",20:"#F2F7F8",100:"#DCEDF6",200:"#638EA3",500:"#457991",600:"#396D84",700:"#33657D",800:"#25556D",900:"#1C4D66",reverse:"#FFFFFF"},black:{10:"#F9F9F9",20:"#F2F2F2",100:"#E9E9E9",200:"#818181",500:"#2A2A2A",600:"#3A3A3A",700:"#3F3F3F",800:"#515151",900:"#5B5B5B",reverse:"#FFFFFF"}},this.Zt=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i}catch(t){}}function $(){try{this.ns="CrispDate",this.Vt=15,this.Tt=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],this.Nt=["january","february","march","april","may","june","july","august","september","october","november","december"],this.Lt=1e3,this.Ou=60,this.Uu=24,this.Jt=60,this.Pt=this.Ou*this.Jt,this.Wt=this.Uu*this.Pt}catch(t){}}function M(){try{this.ns="CrispValidate",this.Mt=80,this.Bt=/^(([^\s@]+)@([^\s@]+)\.([^\s@]+))$/,this.Ot=new RegExp(["^(?:(?:\\(?(?:00|\\+)([1-4]\\d\\d|[1-9]\\d?)\\)?)?","[\\-\\.\\ \\\\\\/]?)?((?:\\(?\\d{1,}\\)?[\\-\\.\\ \\\\\\/]?){0,})","(?:[\\-\\.\\ \\\\\\/]?(?:#|ext\\.?|extension|x)[\\-\\.\\ \\\\/]?","(\\d+))?$"].join(""),"i"),this.Ut=/^https?:\/\/(.+)$/,this.$t=/^([A-Za-z0-9_\\-]{1,50})$/}catch(t){}}function T(){try{this.ns="CrispPipeline",this.Et=["get","set","is","do","on","off","config","safe","help"],this.It=["on","off"],this.c()}catch(t){}}function N(){try{this.ns="CrispAction",this.jt=["session:loaded","chat:initiated","chat:opened","chat:closed","message:sent","message:received","message:compose:sent","message:compose:received","user:email:changed","user:phone:changed","user:nickname:changed","user:avatar:changed","website:availability:changed","helpdesk:queried"],this.Rt={on:this.kt,off:this.Ft},this.it=500,this.yt=/^([a-f0-9]{64})$/,this.xt={}}catch(t){}}function L(){try{this.ns="CrispFeature",this.c()}catch(t){}}function P(){try{this.ns="CrispUtility",this.q="[match:single]",this.F="[match:double]",this.w="[match:negate]",this.j=/([\*]{1})/g,this.k=/([\*]{2})/g,this.g=/^([\!]{1})/,this.C=/(\[match:single\])/g,this.z=/(\[match:double\])/g,this.b=/(\[match:negate\])/g,this.S=new RegExp(["^(\\!)?","(?:https?:[\\/]*)?","(?:www\\.)?([^\\/]+)([^#?]*)?","(?:[\\/]+)?","(?:[#?].*)?"].join(""),"i"),this.m=/^(?:\s*)(?:(?:javascript|vbscript):)/i,this.c()}catch(t){}}function J(){try{this.ns="CrispPolyfill",this.u=2e4,this.v=/\{\s*\[native code\]\s*\}$/,this.c(),this.l()}catch(t){}}function H(){var t,i,n,e,s,c;try{this.ns="CrispLibrary";var a={},g=x;a.Console=((c={}).$u="production",c.Mu="development"==c.$u,c.Tu=void 0!==window.console,c.Nu=c.Mu&&c.Tu,c.Lu=function(t,i,n){},c.warn=function(t,i){c.Nu&&console.warn(t,i),c.Lu("warn",t,i)},c.error=function(t,i){c.Nu&&console.error(t,i),c.Lu("error",t,i)},c.info=function(t,i){c.Nu&&console.info(t,i),c.Lu("info",t,i)},c.log=function(t,i){c.Nu&&console.log(t,i),c.Lu("log",t,i)},c.debug=function(t,i){c.Nu&&(void 0!==console.debug?console.debug(t,i):console.log(t,i)),c.Lu("debug",t,i)},c.set_log_sink=function(t){if("function"!=typeof t)throw new Error("Invalid function");c.Lu=t},c),e=function(){return function e(s,c,a){function r(i,t){if(!c[i]){if(!s[i]){var n="function"==typeof require&&require;if(!t&&n)return n(i,!0);if(o)return o(i,!0);throw(n=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",n}n=c[i]={exports:{}},s[i][0].call(n.exports,function(t){return r(s[i][1][t]||t)},n,n.exports,e,s,c,a)}return c[i].exports}for(var o="function"==typeof require&&require,t=0;t<a.length;t++)r(a[t]);return r}({1:[function(r,t,o){"use strict";function h(t){return null!=t&&""!==t}function u(i){return(Array.isArray(i)?i.map(u):i&&"object"==typeof i?Object.keys(i).filter(function(t){return i[t]}):[i]).filter(h).join(" ")}o.merge=function t(i,n){if(1===arguments.length){for(var e=i[0],s=1;s<i.length;s++)e=t(e,i[s]);return e}var c,a=i.class,r=n.class;for(c in(a||r)&&(a=a||[],r=r||[],Array.isArray(a)||(a=[a]),Array.isArray(r)||(r=[r]),i.class=a.concat(r).filter(h)),n)"class"!=c&&(i[c]=n[c]);return i},o.joinClasses=u,o.cls=function(t,i){for(var n=[],e=0;e<t.length;e++)i&&i[e]?n.push(o.escape(u([t[e]]))):n.push(u(t[e]));var s=u(n);return s.length?' class="'+s+'"':""},o.style=function(i){return i&&"object"==typeof i?Object.keys(i).map(function(t){return t+":"+i[t]}).join(";"):i},o.attr=function(t,i,n,e){return"boolean"==typeof(i="style"===t?o.style(i):i)||null==i?i?" "+(e?t:t+'="'+t+'"'):"":0==t.indexOf("data")&&"string"!=typeof i?" "+t+"='"+JSON.stringify(i).replace(/'/g,"&apos;")+"'":n?" "+t+'="'+o.escape(i)+'"':" "+t+'="'+i+'"'},o.attrs=function(t,i){var n=[],e=Object.keys(t);if(e.length)for(var s=0;s<e.length;++s){var c=e[s],a=t[c];"class"==c?(a=u(a))&&n.push(" "+c+'="'+a+'"'):n.push(o.attr(c,a,!1,i))}return n.join("")},o.escape=function(t){var i=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return i===""+t?t:i},o.rethrow=function i(n,t,e,s){if(!(n instanceof Error))throw n;if(!("undefined"==typeof window&&t||s))throw n.message+=" on line "+e,n;try{s=s||r("fs").readFileSync(t,"utf8")}catch(t){i(n,null,e)}var c=s.split("\n"),a=Math.max(e-3,0),s=Math.min(c.length,e+3),s=c.slice(a,s).map(function(t,i){return((i=i+a+1)==e?"  > ":"    ")+i+"| "+t}).join("\n");throw n.path=t,n.message=(t||"Jade")+":"+e+"\n"+s+"\n\n"+n.message,n}},{fs:2}],2:[function(t,i,n){},{}]},{},[1])(1)},"object"==typeof __crisp_void_exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof __crisp_void_define&&define.amd?define([],e):(void 0!==a?s=a:"undefined"!=typeof global?s=global:"undefined"!=typeof self&&(s=self),s.jade=e()),i=a,n=function(){var c=document,e=window,i=Array.prototype,a=i.slice,n=i.filter,r=/^#[\w-]*$/,o=/^\.[\w-]*$/,h=/^[\w-]*$/;function u(t,i){return new u.fn.init(t,i)}var t=u.fn=u.prototype={cash:!0,length:0};t.init=function(t,i){var n,e,s=[];if(!t)return this;if(this.length=1,"string"!=typeof t)return t.cash?t:(this[0]=t,this);if("<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&3<=t.length)s=u.parseHTML(t);else{if(n=r.test(t),e=t.slice(1),!i&&n)return this[0]=c.getElementById(e),this;i=u(i)[0]||c,s=a.call(h.test(e)?o.test(t)?c.getElementsByClassName(e):c.getElementsByTagName(t):i.querySelectorAll(t))}return this.length=0,u.merge(this,s),this},t.init.prototype=t,u.each=function(t,i){for(var n=t.length,e=0;e<n;e++)i.call(t[e],t[e],e,t)},u.extend=t.extend=function(t,i){for(var n in i||(i=t,t=this),i)i.hasOwnProperty(n)&&(t[n]=i[n]);return t},u.matches=function(t,i){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,i)},u.merge=function(t,i){for(var n=+i.length,e=t.length,s=0;s<n;e++,s++)t[e]=i[s];return t.length=e,t},u.parseHTML=function(t){var i,n,e=/^<(\w+)\s*\/?>(?:<\/\1>|)$/.exec(t);return e?[c.createElement(e[1])]:(i=i||c.createDocumentFragment(),(n=n||i.appendChild(c.createElement("div"))).innerHTML=t,a.call((e=n).childNodes))},u.unique=function(t){return u.merge(u(),a.call(t).filter(function(t,i,n){return n.indexOf(t)===i}))};var s=/\S+/g;function l(t,i){return parseInt(e.getComputedStyle(t[0],null)[i],10)}t.extend({addClass:function(t){var i,n=t.match(s);return this.each(function(t){if(i=n.length,t.classList)for(;i--;)t.classList.add(n[i]);else for(;i--;)-1===(" "+t.className+" ").indexOf(" "+n[i]+" ")&&(t.className+=" "+n[i])}),this},attr:function(i,n){return n?(this.each(function(t){return t.setAttribute(i,n)}),this):this[0].getAttribute(i)},hasClass:function(t){return this[0].classList?this[0].classList.contains(t):-1!==this[0].className.indexOf(t)},prop:function(t){return this[0][t]},removeAttr:function(i){return this.each(function(t){return t.removeAttribute(i)}),this},removeClass:function(t){var i,n,e=t.match(s);return this.each(function(t){if(i=e.length,t.classList)for(;i--;)t.classList.remove(e[i]);else{for(n=" "+t.className+" ";i--;)n=n.replace(" "+e[i]+" "," ");t.className=n.trim()}}),this}}),t.extend({add:function(){for(var t=a.call(this),i=0,n=arguments.length;i<n;i++)t=t.concat(a.call(u(arguments[i])));return u.unique(t)},each:function(t){u.each(this,t)},eq:function(t){return u(this[t])},filter:function(i){return"string"==typeof i?n.call(this,function(t){return u.matches(t,i)}):n.call(this,i)},first:function(){return u(this[0])},get:function(t){return this[t]},index:function(t){return(t?a.call(u(t).children()):a.call(u(this[0]).parent().children())).indexOf(this[0])},last:function(){return u(this[this.length-1])}}),t.extend({css:function(n,i){if("object"!=typeof n)return i?(this.each(function(t){return t.style[n]=i}),this):e.getComputedStyle(this[0],null)[n];this.each(function(t){for(var i in n)n.hasOwnProperty(i)&&(t.style[i]=n[i])})}}),t.extend({data:function(i,n){return n?(this.each(function(t){t.dataset?t.dataset[i]=n:u(t).attr("data-"+i,n)}),this):this[0].dataset?this[0].dataset[i]:u(this[0]).attr("data-"+i)},removeData:function(i){return this.each(function(t){t.dataset?delete t.dataset[i]:u(t).removeAttr("data-"+i)}),this}}),t.extend({height:function(){return this[0].getBoundingClientRect().height},innerWidth:function(){return this[0].clientWidth},innerHeight:function(){return this[0].clientHeight},outerWidth:function(t){return!0===t?this[0].offsetWidth+(l(this,"margin-left")||l(this,"marginLeft")||0)+(l(this,"margin-right")||l(this,"marginRight")||0):this[0].offsetWidth},outerHeight:function(t){return!0===t?this[0].offsetHeight+(l(this,"margin-top")||l(this,"marginTop")||0)+(l(this,"margin-bottom")||l(this,"marginBottom")||0):this[0].offsetHeight},width:function(){return this[0].getBoundingClientRect().width}});var f={};function d(t,i,n){var e=u(t).data("cshid")||s()+s(!0)+s(!0)+s();function s(t){var i=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+i.substr(0,4)+"-"+i.substr(4,4):i}u(t).data("cshid",e),e in f||(f[e]={}),i in f[e]||(f[e][i]=[]),f[e][i].push(n)}t.extend({off:function(n,e){return this.each(function(t){if(e)t.removeEventListener(n,e);else for(var i in f[u(t).data("cshid")][n])t.removeEventListener(n,f[u(t).data("cshid")][n][i])}),this},on:function(i,e,s){return"function"==typeof e?(s=e,this.each(function(t){d(u(t),i,s),t.addEventListener(i,s)})):this.each(function(n){function t(t){var i=t.target;if(u.matches(i,e))s.call(i);else{for(;!u.matches(i,e);){if(i===n)return!1;i=i.parentNode}i&&s.call(i)}}d(u(n),i,t),n.addEventListener(i,t)}),this},ready:function(t){this[0].addEventListener("DOMContentLoaded",t)},trigger:function(t){var i=c.createEvent("HTMLEvents");return i.initEvent(t,!0,!1),this.each(function(t){return t.dispatchEvent(i)}),this}});var p=encodeURIComponent;return t.extend({serialize:function(){for(var t,i,n=this[0],e="",s=n.elements.length-1;0<=s;s--)if((t=n.elements[s]).name&&"file"!==t.type&&"reset"!==t.type)if("select-multiple"===t.type)for(i=n.elements[s].options.length-1;0<=i;i--)t.options[i].selected&&(e+="&"+t.name+"="+p(t.options[i].value).replace(/%20/g,"+"));else"submit"!==t.type&&"button"!==t.type&&(e+="&"+t.name+"="+p(t.value).replace(/%20/g,"+"));return e.substr(1)},val:function(i){return void 0===i?this[0].value:(this.each(function(t){return t.value=i}),this)}}),t.extend({append:function(t){return this[0].appendChild(u(t)[0]),this},appendTo:function(t){return u(t)[0].appendChild(this[0]),this},clone:function(){return u(this[0].cloneNode(!0))},empty:function(){return this.each(function(t){return t.innerHTML=""}),this},html:function(t){var i;return"undefined"===t?this[0].innerHTML:(i="object"==typeof t?u(t)[0].outerHTML:t,this.each(function(t){return t.innerHTML=""+i}),this)},insertAfter:function(t){return u(t)[0].insertAdjacentHTML("afterend",this[0].outerHTML),this},insertBefore:function(t){return u(t)[0].insertAdjacentHTML("beforebegin",this[0].outerHTML),this},prepend:function(t){return u(this)[0].insertAdjacentHTML("afterBegin",u(t)[0].outerHTML),this},prependTo:function(t){return u(t)[0].insertAdjacentHTML("afterBegin",this[0].outerHTML),this},remove:function(){this.each(function(t){return t.parentNode.removeChild(t)})},text:function(i){return i?(this.each(function(t){return t.textContent=i}),this):this[0].textContent}}),t.extend({children:function(i){return i?u(this[0].children).filter(function(t){return u.matches(t,i)}):u.fn.extend(this[0].children,u.fn)},closest:function(t){return!t||u.matches(this[0],t)?this:this.parent().closest(t)},is:function(t){return!!t&&(t.cash?this[0]===t[0]:"string"==typeof t&&u.matches(this[0],t))},find:function(t){return u.fn.extend(this[0].querySelectorAll(t),u.fn)},has:function(i){return n.call(this,function(t){return 0!==u(t).find(i).length})},next:function(){return u(this[0].nextElementSibling)},not:function(i){return n.call(this,function(t){return!u.matches(t,i)})},parent:function(){var t=i.map.call(this,function(t){return t.parentElement||c.body.parentNode});return u.unique(t)},parents:function(i){var n,e=[],s=0;return this.each(function(t){for(n=t;n!==c.body.parentNode;)n=n.parentElement,i&&!u.matches(n,i)||(e[s]=n,s++)}),u.unique(e)},prev:function(){return u(this[0].previousElementSibling)},siblings:function(){var t=this.parent().children(),i=this[0];return n.call(t,function(t){return t!==i})}}),u},"function"==typeof __crisp_void_define&&define.amd?define(n):"undefined"!=typeof __crisp_void_exports?module.exports=n():i.cash=i.$=n(),t=a,l.prototype.init=function(t){var i=(n.prototype.code=function(t){return this.parent.template.render("smiley",{name:t,size:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"small"})},n.prototype.parse=function(t){var i,n,e=void 0,s=void 0,c=t;for(e in this.Pu)if(this.Pu.hasOwnProperty(e))for(i=this.Pu[e];null!==(n=c.match(i));)s="small",c===n[2]&&(s="large"),n=this.code(e,s),c=c.replace(i,"$1"+n+"$3");return c},n.prototype.count=function(t){var i=0,n=void 0,e=void 0,s=t;for(n in this.Pu)if(this.Pu.hasOwnProperty(n))for(e=this.Pu[n];!0===e.test(s);)i++,s=s.replace(e,"$1[]$3");return i},n.prototype.name=function(t){var i,n=void 0,e=null;for(n in this.Pu)if(this.Pu.hasOwnProperty(n)&&(i=this.Pu[n],t.match(i))){e=n;break}return e},n.prototype.Ju=function(){var t=void 0;for(t in this.Pu={},this.Hu)this.Pu[t]=new RegExp("(^|\\s|\\()"+this.Hu[t]+"($|\\s|\\))","i")},n);function n(t){this.parent=t,this.smiley_map={angry:":@",blushing:":$",confused:"x)",cool:"8)",crying:":'(",embarrased:":/",heart:"<3",laughing:":'D",sad:":(",sick:":S","small-smile":":)","big-smile":":D","thumbs-up":"+1",surprised:":o",tongue:":P",winking:";)"},this.Hu={angry:"((?:=|:)(?:-)?@)",blushing:"((?:=|:)(?:-)?\\$)",cool:"(8(?:-)?\\))",confused:"(x(?:-)?\\))",crying:"((?:=|:)'(?:-)?\\()",embarrased:"((?:=|:)(?:-)?\\/)",heart:"(&lt;3)",laughing:"((?:=|:)(?:-)?'D)",sad:"((?:=|:)(?:-)?(?:\\(|\\|))",sick:"((?:=|:)(?:-)?S)","small-smile":"((?:=|:)(?:-)?\\))","big-smile":"((?:=|:)(?:-)?D)","thumbs-up":"(\\+1)",surprised:"((?:=|:)(?:-)?o)",tongue:"((?:=|:)(?:-)?P)",winking:"(;(?:-)?\\))"},this.Ju()}var e=(s.prototype.format=function(t){for(var i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],s=void 0,c=t,s=0;s<this.Vu.length;s++)i=this.Vu[s],-1===e.indexOf(i)&&(c=this.Wu[i].bind(this)(c,n));return c},s.prototype.replace=function(t){for(var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=void 0,e=t,n=0;n<i.length;n++)e=e.replace("%"+(n+1)+"s",i[n]);return e},s.prototype.attribute=function(t){return this.Gu(t,{},this.Yu)},s.prototype.html=function(t){return this.Gu(t,{},!0===(1<arguments.length&&void 0!==arguments[1]&&arguments[1])?this.Ku:this.Xu)},s.prototype.escape_regex=function(t){return t.replace(this.Zu,"\\$&")},s.prototype.Gu=function(t){var i,n=void 0,e=t,s=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)||this.Xu;for(n in s)s.hasOwnProperty(n)&&(i=s[n],e=e.replace(i,n));return e},s.prototype.Qu=function(t){return t.replace(/\n(\s+)?\n(\s+)?\n/g,"\n\n")},s.prototype.tl=function(t){var i=this.parent.template.render("new_line",{},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return t.trim().replace(/\n/g,i)},s.prototype.il=function(t){var s=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.replace(this.nl.email,function(t,i,n,e){return""+i+s.parent.template.render("link_email",{email:n,no_external_link:s.parent.config.runtime.no_external_link||!1},c)+e})},s.prototype.el=function(t){var s=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.replace(this.nl.phone,function(t,i,n,e){return""+i+s.parent.template.render("link_phone",{phone:n,no_external_link:s.parent.config.runtime.no_external_link||!1},c)+e})},s.prototype.sl=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t="\n"+t+"\n";for(var n=0;n<this.cl.length;n++)t=t.replace(this.cl[n][1],this.al(this.cl[n],i));return t=t.trim()},s.prototype.rl=function(t){var s=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.replace(this.nl.domain,function(t,i,n,e){return""+i+s.parent.template.render("link_domain",{domain_value:n,domain_name:n,no_external_link:s.parent.config.runtime.no_external_link||!1},c)+e})},s.prototype.ol=function(t){var s=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.replace(this.nl.uri,function(t,i,n,e){return""+i+s.parent.template.render("link_uri",{uri_value:n,uri_name:n,no_external_link:s.parent.config.runtime.no_external_link||!1},c)+e})},s.prototype.hl=function(t){return this.parent.Smileys.parse(t)},s.prototype.al=function(a){var r=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t,i,n,e,s){var c={type:null,value:null,url_crisp_image:r.parent.config.url.crisp_image,no_external_link:r.parent.config.runtime.no_external_link||!1},i=("string"==typeof i?i:null)||"",s=("string"==typeof s?s:null)||"";return c.type=n,c.value=e,-1!==r.ul.indexOf(a[0])&&"string"==typeof c.value&&(c.value=c.value.trim()),-1!==r.ll.indexOf(a[0])&&"string"==typeof c.value&&(c.value=r.fl(c.value)),""+i+r.parent.template.render("markdown_"+a[0],c,o)+s}},s.prototype.fl=function(t){return(t=this.Gu(t,{},this.dl)).replace(this.pl,function(t){return"&#"+t.charCodeAt(0)+";"})},s.prototype.vl=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"gi",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return new RegExp(""+(n.prefix||"")+t+(n.suffix||""),i)},s.prototype.yl=function(){this.nl={email:this.vl("([\\w\\._-]+@[\\w\\.\\/_-]+)","gi",this.ml.links),phone:this.vl("(\\+[0-9]{1,3}[ \\(\\)\\-0-9]{7,20})","gi",this.ml.links),domain:this.vl(["((?:[^<>\\(\\)\\s,@]+)(?:\\.(?:",this._l.map(this.escape_regex.bind(this)).join("|"),")))"].join(""),"gim",this.ml.links),uri:this.vl("((?:https?|ftps?|file):(?:[^<>\\(\\)\\s,]+))","gim",this.ml.links)}},s.prototype.gl=function(){this.cl=[["code_block",this.vl("(`{2,3})((?:\\n+)?(?:(?!\\2).(?:\\n+)?)*)(?:\\2)","gi",{prefix:"(\\s|<[^<>]+\\/>|^)",suffix:"(\\s|\\.|,|:|$)"})],["code_inline",this.vl("(`{1})([^`]*)(?:\\2)","gim",{prefix:"(\\s|<[^<>]+\\/>|\\(|^)",suffix:"(\\s|\\.|,|:|\\)|<\\/[^<>]+>|$)"})],["title",this.vl("(#{1})(?:[\\s]+)([^#].*)","gim",this.ml.markdown_simple)],["title",this.vl("(#{2})(?:[\\s]+)([^#].*)","gim",this.ml.markdown_simple)],["title",this.vl("(#{3})(?:[\\s]+)([^#].*)","gim",this.ml.markdown_simple)],["title",this.vl("(#{4})(?:[\\s]+)([^#].*)","gim",this.ml.markdown_simple)],["title",this.vl("(#{5})(?:[\\s]+)([^#].*)","gim",this.ml.markdown_simple)],["title",this.vl("(#{6})(?:[\\s]+)([^#].*)","gim",this.ml.markdown_simple)],["link_image",this.vl("\\[!\\[(?:[^\\[]*)\\]\\(([^\\)]+)\\)\\]\\(([^\\)]+)\\)","gim",this.ml.markdown_includes)],["image",this.vl("!\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.ml.markdown_includes)],["link_text",this.vl("\\[([^\\[]+)\\]\\(([^\\)]+)\\)","gim",{prefix:"(\\s|<[^<>]+\\/>|<[^a][^<>]*>|\\(|^)",suffix:"(\\s|.|,|:|<[^<>]+\\/>|</[^a][^<>]*>|\\)|$)"})],["youtube",this.vl("\\$\\{youtube\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.ml.markdown_includes)],["vimeo",this.vl("\\$\\{vimeo\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.ml.markdown_includes)],["dailymotion",this.vl("\\$\\{dailymotion\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.ml.markdown_includes)],["frame",this.vl("\\$\\{frame\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.ml.markdown_includes)],["bold",this.vl("(\\*\\*)(.*?)(?:\\2)","gim",this.ml.markdown_formatting)],["underline",this.vl("(__)(.*?)(?:\\2)","gim",this.ml.markdown_formatting)],["italic",this.vl("(\\*|_)(.*?)(?:\\2)","gim",this.ml.markdown_formatting)],["delete",this.vl("(\\~\\~)(.*?)(?:\\2)","gim",this.ml.markdown_formatting)],["highlight",this.vl("(\\+\\+)(.*?)(?:\\2)","gim",this.ml.markdown_formatting)],["list",this.vl("(\\*)(?:[\\s]+)","gim",this.ml.markdown_list)],["list",this.vl("(?:([\\d]{1,2})\\.)(?:[\\s]+)","gim",this.ml.markdown_list)],["blockquote",this.vl("(&gt;|\\>)(?:[\\s]+)(.*)","gim",this.ml.markdown_simple)],["emphasis",this.vl("(\\|{1})(?:[\\s]+)([^\\|].*)","gim",this.ml.markdown_simple)],["emphasis",this.vl("(\\|{2})(?:[\\s]+)([^\\|].*)","gim",this.ml.markdown_simple)],["emphasis",this.vl("(\\|{3})(?:[\\s]+)([^\\|].*)","gim",this.ml.markdown_simple)],["interpolate",this.vl('(?:\\{\\{\\s*)([^\\{\\}\\|\\s]+)(?:\\s*\\|\\s*(?:(?:&quot;)|")([^&"]*)(?:(?:&quot;)|"))?(?:\\s*\\}\\})',"gim",{prefix:"(\\s|\\(|^)",suffix:""})],["line",this.vl("(-{3,})","gim",{prefix:"(^)(\\s+)?",suffix:"(\\s|$)"})],["color",this.vl("\\$\\{color\\}\\[(#[0-9A-Fa-f]{6})\\]\\(([^\\)]+)\\)","gim",this.ml.markdown_includes)]]},s);function s(t){this.parent=t,this._l=["com","net","org","info","biz","mobi","chat","email","help","watch","name","pro","aero","asia","cat","coop","edu","gov","int","jobs","mil","museum","post","tel","travel","xxx","xyz","top","site","online","club","shop","work","app","live","store","space","website","tech","life","dev","blog","cloud","page","link","design","group","company","agency","network","media","immo","ac","ad","ae","af","ag","ai","al","am","an","ao","aq","ar","as","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bl","bm","bn","bo","bq","br","bs","bt","bv","bw","by","bz","ca","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cu","cv","cw","cx","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","io","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mf","mg","mh","mk","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","ss","st","su","sv","sx","sy","sz","tc","td","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","tt","tv","tw","tz","ua","ug","uk","um","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","ye","yt","za","zm","zw"],this.Ku={"&":/&amp;/g,"<":/&lt;/g,">":/&gt;/g,'"':/&quot;/g},this.Xu={"&amp;":/&/g,"&lt;":/</g,"&gt;":/>/g,"&quot;":/"/g},this.Yu={"\\\\":/\\/g,"\\t":/\t/g,"\\n":/\n/g,"\\u00A0":/\u00A0/g,"&quot;":/"/g,"&apos;":/'/g},this.dl={"<":/&lt;/g,">":/&gt;/g},this.Zu=/[-\/\\^$*+?.()|[\]{}]/g,this.pl=/([\#$\*\_\-+![\]\(\)`~><\.|{}])/g,this.ml={links:{prefix:"(\\s|<[^<>]+\\/>|<[^a][^<>]*>|\\(|^)",suffix:"(,|\\s|<[^<>]+\\/>|</[^a][^<>]*>|\\)|$)"},markdown_simple:{prefix:"(^)",suffix:"($)"},markdown_includes:{prefix:"(\\s|<[^<>]+\\/>|<[^<>]+>|\\(|^)",suffix:"(\\s|.|,|:|<[^<>]+\\/>|\\)|$)"},markdown_formatting:{prefix:"(\\s|<[^<>]+\\/>|\\(|^)",suffix:""},markdown_list:{prefix:"(^\\s*)",suffix:"(.*?)($)"}},this.ul=["title","list","code_block","code_inline","blockquote","emphasis"],this.ll=["code_block","code_inline"],this.Vu=["escape","consecutive_lines","markdown","links_uri","links_domain","emails","phones","smileys","new_lines"],this.Wu={escape:this.Gu,consecutive_lines:this.Qu,new_lines:this.tl,emails:this.il,phones:this.el,markdown:this.sl,links_domain:this.rl,links_uri:this.ol,smileys:this.hl},this.yl(),this.gl()}var c=(a.prototype.parse_first_name=function(t){return this.Zh(t,1)},a.prototype.parse_last_name=function(t){return this.Zh(t,3)},a.prototype.Zh=function(t,i){var n=(t||"").trim();return!n||(t=n.match(this.wl))&&t[i]&&(n=t[i].trim()),n},a);function a(t){this.parent=t,this.wl=/^(\S+)((?:\s+)(.+))?$/}this.bl(t),this.Smileys=new i(this),this.Parse=new e(this),this.Name=new c(this)},l.prototype.bl=function(t){t&&t.template&&(this.template=t.template),t&&t.config&&(this.config=t.config)},t.CrispLibraryWeb=new l;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=a;u.prototype.init=function(t){var r={},i=(n.prototype.set_ignore_privacy=function(){this.kl=0<arguments.length&&void 0!==arguments[0]&&arguments[0]},n.prototype.set_visitor_compose=function(){this.xl=!(0<arguments.length&&void 0!==arguments[0])||arguments[0]},n.prototype.reset=function(){this.c()},n.prototype.c=function(){this.kl=!1,this.xl=!0},n);function n(t){this.parent=t,this.c()}var e=(s.prototype.set_timeout=function(t){var i=this,n=setTimeout(function(){delete i.Fl[n],t()},1<arguments.length&&void 0!==arguments[1]?arguments[1]:0);return this.Fl[n]=n},s.prototype.clear_timeout=function(t){t in this.Fl&&(clearTimeout(this.Fl[t]),delete this.Fl[t])},s.prototype.set_interval=function(t){var i=setInterval(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0);return this.jl[i]=i},s.prototype.clear_interval=function(t){t in this.jl&&(clearInterval(this.jl[t]),delete this.jl[t])},s.prototype.reset=function(){for(var t in this.Fl)this.clear_timeout(t);for(var i in this.jl)this.clear_interval(i);this.c()},s.prototype.c=function(){this.Fl={},this.jl={}},s);function s(t){this.parent=t,this.c()}var c=(a.prototype.add_event=function(t,i,n,e){var s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},c=this.ql(t,i,n);if(c in this.zl)throw new Error("Event listener is already registered for '"+n+"' event on '"+i+"' instance, cannot re-register");window[i].addEventListener(n,e,s),this.zl[c]=[e,s]},a.prototype.remove_event=function(t,i,n){var e=this.ql(t,i,n);e in this.zl&&(t=this.zl[e],window[i].removeEventListener(n,t[0],t[1]),delete this.zl[e])},a.prototype.apply_patch=function(t,i,n,e,s){if((t=this.ql(t,i,n))in this.El)throw new Error("Patch is already registered for '"+n+"' method on '"+i+"' instance, cannot re-register");var c=e[n];"function"==typeof c&&(e[n]=function(){var t=c.apply(e,arguments);return s(arguments),t},this.El[t]=[e,c])},a.prototype.revoke_patch=function(t,i,n){(t=this.ql(t,i,n))in this.El&&((i=this.El[t])[0][n]=i[1],delete this.El[t])},a.prototype.reset=function(){for(var t in this.zl)null!==(t=this.Cl(t))&&this.remove_event(t[0],t[1],t[2]);for(var i in this.El)null!==(i=this.Cl(i))&&this.revoke_patch(i[0],i[1],i[2]);this.c()},a.prototype.ql=function(t,i,n){return t+":"+i+":"+n},a.prototype.Cl=function(t){return 3===(t=t.split(":")).length?t:null},a.prototype.c=function(){this.zl={},this.El={}},a);function a(t){this.parent=t,this.c()}var o=(h.prototype.get_state=function(){this.Al(this.parent.socket.connected||!1)},h.prototype.Sl=function(){var t=this;this.parent.socket.on("connect",function(){t.Al(!0)}),this.parent.socket.on("disconnect",function(){t.Al(!1)}),this.parent.socket.io.on("reconnect_failed",function(){t.Al(!1,!0)})},h.prototype.Al=function(){this.parent.event.publish("socket:state",{connected:!(0<arguments.length&&void 0!==arguments[0])||arguments[0],failed_reconnect:1<arguments.length&&void 0!==arguments[1]&&arguments[1]})},h);function h(t){this.parent=t,this.Sl()}var u=(l.prototype.c=function(){this.Il=!1,this.Dl=null,this.zl=[],this.Rl={},this.Bl=null,this.Ol=null,this.Ul=null,this.$l=null},l.prototype.bind_to=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;this.Dl=t,this.zl=i,this.Rl=n,this.Bl=e,this.Ol=s,!0!==this.Il?this.parent.stream.connect():this.Ml()},l.prototype.unbind_from=function(){this.Tl(),this.parent.stream.disconnect()},l.prototype.reset=function(){this.c()},l.prototype.Sl=function(){var t=this;this.parent.stream.on("connect",function(){t.Il=!0,t.Ml()}),this.parent.stream.on("disconnect",function(){t.Il=!1,t.Nl()}),this.parent.stream.on("socket:bound",function(){t.Ll()})},l.prototype.Ml=function(){var t;this.Ul!==this.Dl||this.$l!==this.zl?(this.Ul=this.Dl,this.$l=this.zl,t=[],this.Ul&&t.push(this.Ul),this.parent.stream.emit("socket:bind",{ray:"client",events:this.$l,rooms:t,context:this.Rl})):this.Ll()},l.prototype.Nl=function(){null!==this.Ol&&this.Ol(),this.Tl(),this.Ul=null,this.$l=null},l.prototype.Ll=function(){null!==this.Bl&&this.Bl(),this.Tl()},l.prototype.Tl=function(){this.Dl=null,this.zl=[],this.Rl={},this.Bl=null,this.Ol=null},l);function l(t){this.parent=t,this.c(),this.Sl()}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=(p.prototype.update=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},s={ray:this.Pl(t),type:t,data:i};this.Jl.push(s.ray),this.Hl[s.ray]={success:n,error:e},this.parent.socket.emit("storage:sync:update",s),this.parent.event.publish("storage:sync:update",s)},p.prototype.get_stamp_local=function(t){var i=this.Vl(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]);return"object"===f(window.localStorage)&&window.localStorage.getItem(i)||""},p.prototype.set_stamp_local=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=this.Vl(t,i);return"object"===f(window.localStorage)&&(window.localStorage.setItem(i,n),!0)},p.prototype.is_syncing_storage=function(){return 0<this.Jl.length&&!0},p.prototype.reset=function(){this.c()},p.prototype.Vl=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=this.Wl+"/"+t;return 0<i.length&&(n+="/"+i.join("/")),n},p.prototype.c=function(){this.Gl=1,this.Yl=0,this.Hl={},this.Jl=[]},p.prototype.Sl=function(){this.parent.socket.on("storage:sync:updated",this.Kl.p(this))},p.prototype.Kl=function(t){var i;"object"===f(this.Hl[t.ray])&&(t.error?this.Hl[t.ray].error():this.Hl[t.ray].success(),delete this.Hl[t.ray],-1!==(i=this.Jl.indexOf(t.ray))&&this.Jl.splice(i,1)),this.parent.event.publish("storage:sync:updated",t)},p.prototype.Pl=function(t){return t+"/"+Math.floor(Math.random()*this.Xl)+"/"+this.Yl++},p);function p(t){this.parent=t,this.Xl=1e5,this.Wl="crisp-client",this.c(),this.Sl()}var v=(y.prototype.update_message=function(t,i){this.parent.socket.emit("message:update",i={fingerprint:t,content:i}),this.Zl(i,"local")},y.prototype.send_raw_message=function(t){var i,n=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;-1===this.Ql.indexOf(t.fingerprint)&&this.Ql.push(t.fingerprint),this.parent.platform_name&&this.parent.platform_signature_key&&(_signature_data=[this.parent.Session.pt,t.fingerprint,t.type],(i=this.parent.sha256.hmac.create(this.parent.platform_signature_key.split("/").map(function(t){return String.fromCharCode(parseInt(t,36))}).join(""))).update("["+_signature_data.join("|")+"]"),t.signature=this.parent.platform_name+":"+i.hex()),this.parent.event.publish("message:send",t),this.parent.Schedule.set_timeout(function(){n.parent.socket.emit("message:send",t)},e)},y.prototype.send_text_message=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;this.send_raw_message({type:"text",origin:"chat",content:t,timestamp:(new Date).getTime(),fingerprint:this.tf()},i)},y.prototype.send_file_message=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;this.send_raw_message({type:"file",origin:"chat",content:{name:t,url:i,type:n},timestamp:(new Date).getTime(),fingerprint:this.tf()},e)},y.prototype.send_animation_message=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;this.send_raw_message({type:"animation",origin:"chat",content:{url:t,type:i},timestamp:(new Date).getTime(),fingerprint:this.tf()},n)},y.prototype.send_audio_message=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;this.send_raw_message({type:"audio",origin:"chat",content:{url:t,type:i,duration:n},timestamp:(new Date).getTime(),fingerprint:this.tf()},e)},y.prototype.send_picker_message=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;this.send_raw_message({type:"picker",origin:"chat",content:{id:t,text:i,choices:n},timestamp:(new Date).getTime(),fingerprint:this.tf()},e)},y.prototype.send_field_message=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;this.send_raw_message({type:"field",origin:"chat",content:{id:t,text:i,explain:n},timestamp:(new Date).getTime(),fingerprint:this.tf()},e)},y.prototype.send_message_compose=function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;(!0!==this.parent.Config.kl&&"1"===(navigator||{}).doNotTrack||!1===this.parent.Config.xl)&&(n=null);var n=this.if(n),e=t!==this.nf.local.type&&!0;(1==e||n!==(this.nf.local.excerpt||null)||"start"===this.nf.local.type&&this.ef&&(new Date).getTime()-this.ef>=this.sf)&&(this.ef=(new Date).getTime(),this.nf.local={type:t},n&&(this.nf.local.excerpt=n),1==e&&null!==this.cf&&(this.parent.Schedule.clear_timeout(this.cf),this.cf=null),null===this.cf&&(this.cf=this.parent.Schedule.set_timeout(function(){i.cf=null,i.parent.socket.emit("message:compose:send",i.nf.local),i.parent.event.publish("message:compose:send",i.nf.local)},1==e?0:this.af)))},y.prototype.send_message_thread=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n={type:t};i&&(n.text=i),this.parent.socket.emit("message:thread",n),this.parent.event.publish("message:thread",n)},y.prototype.receive_message_local=function(t,i,n){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,e={from:"operator",type:t,origin:"local",timestamp:(new Date).getTime(),content:i,fingerprint:null!==e?e:this.tf(),user:n};this.parent.socket.emit("message:received:local",e),this.rf(e)},y.prototype.receive_message_mirror=function(t,i,n,e){e={from:"operator",type:t,origin:i,timestamp:(new Date).getTime(),content:n,fingerprint:e},this.parent.socket.emit("message:received:mirror",e)},y.prototype.get_message_compose=function(){this.parent.event.publish("message:compose:received",this.nf.remote)},y.prototype.get_cached_messages=function(){return this.hf},y.prototype.count_message_history=function(){return this.hf.length},y.prototype.count_message_history_diff=function(){return this.uf.length},y.prototype.get_message_history=function(){for(var t=0;t<this.hf.length;t++){var i=this.hf[t];i.origin="history",i.index={current:t+1,total:this.hf.length},i.is_me?this.parent.event.publish("history:message:sent",i):this.parent.event.publish("history:message:received",i)}for(var n=0;n<this.uf.length;n++)this.lf(this.uf[n],"diff");this.uf=[]},y.prototype.is_sending_messages=function(){return 0<this.Ql.length&&!0},y.prototype.mark_messages_as_read=function(){!0===this.ff(void 0,void 0,!(0<arguments.length&&void 0!==arguments[0])||arguments[0])&&this.df()},y.prototype.set_messages_in_view=function(t){this.pf=t,this.mark_messages_as_read(!1)},y.prototype.get_unread_messages=function(){this.vf=-1,this.yf()},y.prototype.set_unread_messages_callback=function(t){this.mf=t},y.prototype.reset=function(){this.c()},y.prototype.gf=function(t){this.wf(t)},y.prototype.bf=function(t){t&&(this.nf.remote=t)},y.prototype.kf=function(t){if(t){this.xf(t);for(var i=0;i<t.length;i++)this.uf.push(t[i]);this.yf()}},y.prototype.wf=function(t){this.hf=t=t||[],this.Ff=[],this.xf(this.hf);for(var i=0;i<this.hf.length;i++){var n=this.hf[i];this.Ff.push(n.fingerprint),t[i].is_me||n.read||this.jf.push(n.fingerprint)}this.yf()},y.prototype.c=function(){this.hf=[],this.Ff=[],this.uf=[],this.jf=[],this.Ql=[],this.qf=[],this.cf=null,this.pf=!1,this.mf=function(){},this.vf=-1,this.ef=0,this.nf={local:{type:"stop"},remote:{type:"stop"}}},y.prototype.Sl=function(){this.parent.socket.on("message:updated",this.Zl.p(this)),this.parent.socket.on("message:sent",this.zf.p(this)),this.parent.socket.on("message:received",this.Vn.p(this)),this.parent.socket.on("message:received:local",this.rf.p(this)),this.parent.socket.on("message:compose:received",this.Ef.p(this)),this.parent.socket.on("message:acknowledge:read:send",this.Cf.p(this)),this.parent.socket.on("message:acknowledge:read:received",this.Af.p(this)),this.parent.socket.on("message:acknowledge:pending",this.Sf.p(this))},y.prototype.if=function(t){var i=null;return null===t||(t=t.match(this.If))&&(i=(t[1]||"").trim()),i},y.prototype.Df=function(t){this.parent.socket.emit("message:acknowledge:pending",{origin:"chat",fingerprints:t}),this.parent.socket.emit("message:acknowledge:delivered",{origin:"chat",fingerprints:t})},y.prototype.Rf=function(t){this.parent.socket.emit("message:acknowledge:read:received",{origin:"chat",fingerprints:t})},y.prototype.Bf=function(t,i){var n=!1;!1===i&&(this.jf=[],this.yf());for(var e=0;e<this.hf.length;e++){var s=this.hf[e];!0===s.read||0!==t.length&&-1===t.indexOf(s.fingerprint)||i===(!0===s.is_me)&&(n=s.read=!0,this.Of(s))}return n},y.prototype.ff=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=i||!1;return!1===i&&(!0===(2<arguments.length&&void 0!==arguments[2]&&arguments[2])||!0===this.pf)&&0<this.jf.length&&(this.Rf(this.jf),n=!0),!0===n&&this.Bf(t,i)},y.prototype.df=function(t,i){if(0<this.qf.length){for(var n=[],e=0;e<this.hf.length;e++){var s=this.hf[e];-1!==this.qf.indexOf(s.fingerprint)&&(delete s.index,n.push(s))}this.qf=[],this.parent.Storage.update("message",n,t,i)}else"function"==typeof t&&t()},y.prototype.Uf=function(t,i,n){null===this.$f(t.fingerprint)?(this.Ff.push(t.fingerprint),this.hf.push(t),this.ff(),this.Of(t),this.df(i,n)):"function"==typeof i&&i()},y.prototype.$f=function(t){return 0<=(t=this.Ff.indexOf(t))&&this.hf[t]||null},y.prototype.Of=function(t){-1===this.qf.indexOf(t.fingerprint)&&this.qf.push(t.fingerprint)},y.prototype.xf=function(t){t.sort(function(t,i){return t.timestamp<i.timestamp?-1:t.timestamp>i.timestamp?1:0})},y.prototype.tf=function(){var t=""+(new Date).getTime()+Math.ceil(100*Math.random());return t.length<15&&(t+=new Array(15-t.length+1).join("0")),parseInt(t,10)},y.prototype.lf=function(t,i){t.is_me?this.zf(t,i):this.Vn(t,i)},y.prototype.yf=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=this.jf.length;i!==this.vf&&(this.vf=i,"function"==typeof this.mf&&this.mf(i,this.jf,[].concat(this.hf,t)))},y.prototype.Zl=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"network",n=this.$f(t.fingerprint);null!==n&&(n.content=t.content,n.edited=!0,this.lf(n,"update"),"local"!==i&&(this.Of(n),this.df()))},y.prototype.zf=function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"network",e=this.Ql.indexOf(t.fingerprint);-1!==e&&this.Ql.splice(e,1);var s=t.origin;t.origin=n,t.index={current:1,total:1},this.Uf(t,function(){"chat"===s||"network"!==n&&"diff"!==n||i.Df([t.fingerprint]),i.parent.event.publish("message:sent",t)}),1===this.count_message_history()&&this.parent.Session.Mf()},y.prototype.Vn=function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"network",e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"message:received";t.origin=n,t.index={current:1,total:1},"update"!==n&&(this.jf.push(t.fingerprint),this.yf([t])),this.Uf(t,function(){"network"!==n&&"diff"!==n||i.Df([t.fingerprint]),i.parent.event.publish(e,t)})},y.prototype.rf=function(t){this.Vn(t,"local","message:received:local")},y.prototype.Ef=function(t){this.nf.remote=t,this.parent.event.publish("message:compose:received",t)},y.prototype.Cf=function(t){!0===this.ff(t.fingerprints,!0)&&this.df(),this.parent.event.publish("message:acknowledge:read:send",t.fingerprints)},y.prototype.Af=function(t){for(var i=0;i<t.fingerprints.length;i++){var n=this.jf.indexOf(t.fingerprints[i]);-1!==n&&this.jf.splice(n,1)}this.yf()},y.prototype.Sf=function(t){this.parent.event.publish("message:acknowledge:pending",t.fingerprints)},y);function y(t){this.parent=t,this.sf=6e4,this.af=6e3,this.If=new RegExp(["(^(?:\\S+(?:(?:\\s+|\\?|\\!|\\.|\\(|\\)|:|;)|(?:[\\u4e00-\\u9fff])|(?:[\\u0e00-\\u0e7f])))+).*$"].join(""),"i"),this.c(),this.Sl()}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=(_.prototype.save=function(){var t={domain:this.Tf(),expires:this.Nf()},i=this.Lf();t.sameSite=i.policy,!0===i.secure&&(t.secure=!0),this.parent.cookie.set(this.Pf(),this.pt,t),this.parent.token_id&&this.parent.cookie.set(this.Pf(this.parent.token_id),this.pt,t),this.parent.event.publish("session:saved",this.pt)},_.prototype.storage_session_retrieve=function(t){this.Jf(t.state),this.parent.Message.gf(t.message)},_.prototype.sync_session_diff=function(t){this.parent.Message.bf(t.compose),this.parent.Message.kf(t.messages)},_.prototype.sync_user_data=function(t){for(var i=0;i<this.Hf.length;i++){var n=this.Hf[i];this.Vf[n]&&this.Vf[n]!==t[n]?this["set_"+n](this.Vf[n],!0,this.Wf[n]):this.Vf[n]=t[n]||null}this.Gf(t.segments||[],this.Vf.segments),this.Yf(t.data||{},this.Vf.data)},_.prototype.send_device=function(){var t=this.Kf();null!==t&&this.parent.socket.emit("session:device",t)},_.prototype.send_event=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i={events:[]},n=0;n<t.length;n++){var e=t[n],s={text:e[0]};null!==e[1]&&(s.data=e[1]),null!==e[2]&&(s.color=e[2]),i.events.push(s)}0<i.events.length&&this.parent.socket.emit("session:event",i)},_.prototype.get_request_initiate=function(t){Object.keys&&0===Object.keys(this.Xf).length&&0<this.parent.Message.count_message_history_diff()&&this.Zf({}),"function"==typeof t&&t()},_.prototype.get_state=function(t){this.handle_state(this.Xf,t)},_.prototype.handle_state=function(t,i){this.Xf=t,this.parent.event.publish("session:state",this.Xf),"function"==typeof i&&i()},_.prototype.set_state=function(t,i){for(var n in t)this.Xf[n]=t[n];this.parent.Storage.update("state",t),this.sync_state(t,i)},_.prototype.sync_state=function(t,i){this.parent.socket.emit("session:state",t),"function"==typeof i&&i()},_.prototype.create=function(){var t={website_id:this.parent.website_id,website_domain:this.parent.website_domain,useragent:this.parent.device.useragent||"",timezone:this.parent.device.timezone||0,capabilities:this.parent.device.capabilities||[],locales:this.parent.device.locales||[]};this.parent.token_id&&(t.token_id=this.parent.token_id),this.parent.socket.emit("session:create",t)},_.prototype.get_email=function(){return this.Vf.email},_.prototype.set_email=function(t){var i,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,s={};null!==e&&("string"===(i=void 0===e?"undefined":f(e))?s.verify=e:"object"===i&&(s=e)),!0===this.Qf("email",t,n,s)&&this.Mf()},_.prototype.get_phone=function(){return this.Vf.phone},_.prototype.set_phone=function(t){this.Qf("phone",t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},_.prototype.get_nickname=function(){return this.Vf.nickname},_.prototype.set_nickname=function(t){this.Qf("nickname",t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},_.prototype.get_avatar=function(){return this.Vf.avatar},_.prototype.set_avatar=function(t){this.Qf("avatar",t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},_.prototype.get_company=function(){return this.Vf.company},_.prototype.set_company=function(t){this.Qf("company",t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},_.prototype.get_data=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.Vf.data:this.Vf.data[t]||null},_.prototype.set_data=function(t){this.Yf(this.Vf.data||{},t)},_.prototype.set_segments=function(t){this.Gf(this.Vf.segments||[],t,1<arguments.length&&void 0!==arguments[1]&&arguments[1])},_.prototype.mark_active=function(){var t=(new Date).getTime();t-Math.min(this.td||t,this.nd||t)>=this.ed&&this.sd(!0),this.td=t},_.prototype.acquire_saved=function(){var t=this.cd(),i=null,n=(location.search||"").match(this.ad),e=(document.referrer||"").match(this.rd);return n&&n[2]&&n[2]!==t.current&&(i=n[2]||null),e=(i=e&&e[1]===this.parent.url_go&&e[3]!==t.current?e[3]||null:i)||t.current,i=null,{session_id:e,merge:i=t.previous&&t.current!==t.previous&&t.current===e?t.previous:i}},_.prototype.restore=function(){var t=this.acquire_saved();this.od(t.session_id,t.merge)},_.prototype.join=function(){var t,i={session_id:this.pt,expire:this.hd,storage:!0,sync:0<arguments.length&&void 0!==arguments[0]&&arguments[0],useragent:this.parent.device.useragent||"",timezone:this.parent.device.timezone||0,capabilities:this.parent.device.capabilities||[],locales:this.parent.device.locales||[]};this.ud||null!==(t=this.Kf())&&(i.device=t),null!==this.ld&&(i.merge={session_id:this.ld}),this.parent.socket.emit("session:join",i)},_.prototype.reset=function(t,i){var n=null;try{for(var e in this.parent){var s=this.parent[e];s!==this&&s&&"object"===(void 0===s?"undefined":f(s))&&"function"==typeof s.reset&&s.reset()}this.fd()}catch(t){n=t}n?"function"==typeof i&&i(n):"function"==typeof t&&t()},_.prototype.Mf=function(){var t=this;this.Vf.email&&(this.dd&&this.parent.Schedule.clear_timeout(this.dd),this.dd=this.parent.Schedule.set_timeout(function(){t.dd=null,t.sd(!0)},this.pd))},_.prototype.c=function(){this.pt=null,this.ld=null,this.ud=!1,this.td=0,this.nd=(new Date).getTime(),this.vd=null,this.dd=null,this.yd=null,this.md=null,this.Vf={},this.Wf={},this.Xf={}},_.prototype.Sl=function(){var t=this;this.parent.socket.on("session:created",this._d.p(this)),this.parent.socket.on("session:joined",this.gd.p(this)),this.parent.socket.on("session:state",this.wd.p(this)),this.parent.socket.on("session:error",this.bd.p(this)),this.parent.socket.on("session:request:initiate",this.Zf.p(this)),this.parent.socket.on("session:request:purge",this.kd.p(this)),this.parent.socket.on("connect",function(){t.ud?t.join(!0):t.restore()})},_.prototype._d=function(t){var i;t.error?this.parent.event.publish("session:created",{error:t.error}):(i=!!this.parent.token_id,this.pt=t.session_id,this.save(),this.join(i),this.parent.event.publish("session:created",{session_id:this.pt}))},_.prototype.gd=function(t){t.error?this.parent.event.publish("session:joined",{error:t.error}):(this.ud||(this.ud=!0),this.parent.Website.set_users_available(t.users_available),this.storage_session_retrieve(t.storage||{}),this.sync_session_diff(t.sync||{}),this.sync_user_data(t),this.parent.Browsing.restore_browsing_state(),this.parent.event.publish("session:joined",t),this.xd(t.last_active))},_.prototype.wd=function(t){this.handle_state(t)},_.prototype.bd=function(t){"email:invalid_format"===t.type&&(delete this.Vf.email,delete this.Wf.email),this.parent.event.publish("session:error",t)},_.prototype.Zf=function(t){this.parent.event.publish("session:request:initiate",t)},_.prototype.kd=function(t){this.parent.event.publish("session:request:purge",t)},_.prototype.fd=function(){this.c();var t={domain:this.Tf()};this.parent.cookie.expire(this.Pf(),t),this.parent.token_id&&this.parent.cookie.expire(this.Pf(this.parent.token_id),t)},_.prototype.cd=function(){var t={previous:null,current:null};return this.parent.token_id?(this.parent.runtime_configuration&&!0===this.parent.runtime_configuration.session_merge&&(t.previous=this.parent.cookie.get(this.Pf())||null),t.current=this.parent.cookie.get(this.Pf(this.parent.token_id))||null):t.current=this.parent.cookie.get(this.Pf())||null,t},_.prototype.od=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;null!==i&&(this.ld=i),t?(this.pt=t,this.save(),this.join(!0)):this.create()},_.prototype.Jf=function(t){this.Xf=t||{}},_.prototype.xd=function(){this.td=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)||(new Date).getTime(),this.sd()},_.prototype.sd=function(){var t=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.vd&&this.parent.Schedule.clear_timeout(this.vd),this.vd=this.parent.Schedule.set_timeout(function(){t.vd=null,t.nd=(new Date).getTime(),t.parent.socket.emit("session:heartbeat",{last_active:t.td||0,availability:{type:"online",time:{for:t.hd}}}),t.sd()},!0===i?0:this.Fd)},_.prototype.Kf=function(){var t=document.location.href||"";if(this.yd!==t){this.yd=t;var i=(new Date).getTime();if(i-(this.md||0)>=this.jd){this.md=i;var n=document.title||"";if(n.length>this.qd&&(n=n.substring(0,this.qd-this.zd.length),n+=this.zd),!0===this.Ed.test(t)&&("?"!==(i=(t=t.replace(this.Ed,"$1$3"))[t.length-1])&&"&"!==i||(t=t.substr(0,t.length-1))),(t=t.length>this.Cd?t.split("?")[0]||"":t)&&n&&t.length<=this.Cd)return t={page_url:t,page_title:n},(n=(document.referrer||"").split("?")[0]||"")&&n.length<=this.Cd&&(t.page_referrer=n),t}}return null},_.prototype.Pf=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=[this.parent.website_id];return t&&i.push(t),this.parent.Storage.Vl("session",i)},_.prototype.Nf=function(){return"number"==typeof this.parent.cookie_expire&&0<this.parent.cookie_expire?this.parent.cookie_expire:this.Ad},_.prototype.Tf=function(){return"string"==typeof this.parent.cookie_domain&&this.parent.cookie_domain?this.parent.cookie_domain:this.Sd()},_.prototype.Lf=function(){return!0===this.parent.runtime_configuration.cross_origin_cookies&&"https:"===document.location.protocol?{policy:"none",secure:!0}:{policy:"lax"}},_.prototype.Sd=function(){var t=document.domain,i=t,n=this.Lf(),e="samesite="+n.policy+";"+(!0===n.secure?"secure;":"");try{for(var s=0,c=i.split("."),a=this.parent.Storage.Vl("domain-detect",[""+(new Date).getTime()]);s<c.length-1&&-1===document.cookie.indexOf(a+"="+a);)i=c.slice(-1-++s).join("."),document.cookie=a+"="+a+";domain="+i+";"+e;document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+i+";"+e}catch(t){}finally{return i||t}},_.prototype.Qf=function(t,i){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},s=!1;if(!0===n?s=!0:i instanceof Object?!1===this.Id(this.Vf[t],i)&&(s=!0):this.Vf[t]!==i&&(s=!0),!0!==s||(this.Vf[t]=i,this.Wf[t]=e,!0!==this.ud))return!1;var c,a={};for(c in a[t]=i,e)a[c]=e[c];return this.parent.socket.emit("session:set_"+t,a),!0},_.prototype.Gf=function(t){for(var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],e=[],s=0;s<i.length;s++){var c=(i[s]||"").trim().toLowerCase();c&&-1===t.indexOf(c)&&e.push(c)}var a=void 0;!0===n?0<e.length||t.length!==i.length?(a=[].concat(i),this.Vf.segments=a):a=[]:this.Vf.segments=t.concat(a=e),0<a.length&&!0===this.ud&&(a={segments:a},!0===n&&(a.overwrite=!0),this.parent.socket.emit("session:set_segments",a))},_.prototype.Yf=function(t){var i,n,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=!1,c={};for(i in e)t[i]!==e[i]&&(s=!0,c[i]=e[i]);for(n in this.Vf.data=t,c)this.Vf.data[n]=c[n];!0===s&&!0===this.ud&&this.parent.socket.emit("session:set_data",{data:c})},_.prototype.Id=function(t,i){if(t instanceof Object&&i instanceof Object){var n,e,s={};for(n in t)s[n]=!0;for(e in i)s[e]=!0;var c,a=!0;for(c in s)if(!1===this.Id(t[c],i[c])){a=!1;break}return a}return t===i&&!0},_);function _(t){this.parent=t,this.rd=new RegExp("^(https?\\:\\/\\/[^/]+)\\/chat\\/resume\\/\\?target_url=(.+)&session_id=(.+)$"),this.ad=/^\?.*(crisp_sid=([^&=]+)).*$/,this.Ed=/(\?.*)(crisp_sid=[^&=]+&?)(.*)$/,this.ed=9e4,this.pd=5e3,this.jd=3e3,this.Cd=240,this.qd=80,this.zd="...",this.Fd=24e4,this.hd=3e5,this.Ad=15768e3,this.Hf=["email","phone","nickname","avatar","company"],this.parent.disable_autoload||(this.c(),this.Sl())}var g=(w.prototype.get_users_available=function(){this.Dd(!1)},w.prototype.set_users_available=function(t){this.Rd=t},w.prototype.reset=function(){this.c()},w.prototype.c=function(){this.Rd=!1},w.prototype.Sl=function(){this.parent.socket.on("website:users:available",this.Bd.p(this))},w.prototype.Bd=function(t){"boolean"==typeof t&&(this.set_users_available(t),this.Dd(!0))},w.prototype.Dd=function(){this.parent.event.publish("website:users:available",{available:this.Rd,changed:0<arguments.length&&void 0!==arguments[0]&&arguments[0]})},w);function w(t){this.parent=t,this.c(),this.Sl()}var b=(k.prototype.get_url_upload=function(t,i){i={id:""+(new Date).getTime(),from:"visitor",file:{name:t,type:i}},this.parent.socket.emit("bucket:url:upload:generate",i),this.parent.event.publish("bucket:url:upload:generate",i)},k.prototype.Sl=function(){this.parent.socket.on("bucket:url:upload:generated",this.Od.p(this))},k.prototype.Od=function(t){this.parent.event.publish("bucket:url:upload:generated",t)},k);function k(t){this.parent=t,this.Sl()}var x=(F.prototype.get_animation_list=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,i={id:(new Date).getTime(),from:"visitor",list:{page:i}};t&&(i.list.query=t),this.parent.socket.emit("media:animation:list",i),this.parent.event.publish("media:animation:list",i)},F.prototype.Sl=function(){this.parent.socket.on("media:animation:listed",this.Ud.p(this))},F.prototype.Ud=function(t){this.parent.event.publish("media:animation:listed",t)},F);function F(t){this.parent=t,this.Sl()}function j(t,i,n){return i in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}var q=(z.prototype.get_article_search=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return this.$d("search",this.Md,"query",this.Td.p(this),t,i)},z.prototype.get_article_suggest=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return this.$d("suggest",this.Nd,"part",this.Ld.p(this),t,i)},z.prototype.report_article_search=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";(i=(i||"").trim())&&(this.parent.socket.emit("helpdesk:article:report",i={report:{locale:t,query:i}}),this.parent.event.publish("helpdesk:article:report",i))},z.prototype.reset=function(){this.c()},z.prototype.c=function(){this.Md={},this.Nd={}},z.prototype.Sl=function(){this.parent.socket.on("helpdesk:article:searched",this.Td.p(this)),this.parent.socket.on("helpdesk:article:suggested",this.Ld.p(this))},z.prototype.Td=function(t){return this.Pd("search",this.Md,"query",t)},z.prototype.Ld=function(t){return this.Pd("suggest",this.Nd,"part",t)},z.prototype.$d=function(t,i,n,e,s){var c=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,a=(i[c||"default"]||{})[s],r="helpdesk:article:"+t,o=j({id:(new Date).getTime(),from:"visitor"},t,j({locale:c},n,s));this.parent.event.publish(r,o),a?this.parent.Schedule.set_timeout(function(){e(j({id:o.id,results:a},t,j({locale:c},n,s)))},this.Jd):this.parent.socket.emit(r,o)},z.prototype.Pd=function(t,i,n,e){var s;e[t]&&"string"==typeof e[t][n]&&(i[s=e[t].locale||"default"]=i[s]||{},i[s][e[t][n]]=e.results),this.parent.event.publish("helpdesk:article:"+t+"ed",e)},z);function z(t){this.parent=t,this.Jd=100,this.c(),this.Sl()}f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var E=(C.prototype.init=function(t,i,n){var e=this;this.parent.Stream.bind_to(null,this.Hd,{session_id:this.parent.Session.pt},function(){-1===(e.parent.device.capabilities||[]).indexOf("browsing")||!0!==e.parent.Config.kl&&"1"===(navigator||{}).doNotTrack?(e.parent.stream.emit("client:browsing:request:decline",{}),e.Vd()):(e.Wd=t.deps.tree_mirror||null,(e.Gd=!0)===t.resume?(e.parent.stream.emit("client:browsing:resume",{browsing_id:e.Yd}),e.sd(!0),!0===e.Kd&&e.Xd(!0)):(e.sd(!0),e.parent.stream.emit("client:browsing:request:accept",{useragent:navigator.userAgent}))),"function"==typeof i&&i()},function(){"function"==typeof n&&n()})},C.prototype.restore_browsing_state=function(){this.Yd&&(!1===this.Zd()?this.Qd({resume:!0}):this.Vd())},C.prototype.toggle_ignore_scroll_event=function(){this.t0=0<arguments.length&&void 0!==arguments[0]&&arguments[0]},C.prototype.reset=function(){!0===this.Kd&&this.Vd(),this.c(),this.i0()},C.prototype.c=function(){if(this.parent.Schedule.clear_interval(this.n0),this.parent.Schedule.clear_interval(this.e0),this.parent.Schedule.clear_interval(this.s0),this.parent.Schedule.clear_interval(this.c0),"object"===f(this.a0))for(var t in this.a0)this.parent.Schedule.clear_timeout(this.a0[t]);if("object"===f(this.r0))for(var i in this.r0)this.parent.Schedule.clear_timeout(this.r0[i].dead_timeout);(this.o0||{}).defer_event&&this.parent.Schedule.clear_timeout(this.o0.defer_event),this.Gd=!1,this.Yd=null,this.Kd=!1,this.nd=null,this.n0=null,this.e0=null,this.s0=null,this.c0=null,this.t0=!1,this.u0=null,this.Wd=null,this.l0=null,this.a0={},this.f0=[],this.r0={assist:{ongoing:!1,last_heartbeat:null,dead_timeout:null}},this.d0={x:0,y:0,last_x:0,last_y:0},this.p0={x:0,y:0,last_x:0,last_y:0},this.o0={last_call:(new Date).getTime(),defer_event:null}},C.prototype.Pf=function(){return this.parent.Storage.Vl("browsing",[this.parent.website_id])},C.prototype.Sl=function(){this.parent.socket.on("browsing:request:initiate",this.Qd.p(this)),this.parent.stream.on("client:browsing:request:initiated",this.v0.p(this)),this.parent.stream.on("client:browsing:action:start",this.y0.p(this)),this.parent.stream.on("client:browsing:action:stop",this.m0.p(this)),this.parent.stream.on("client:browsing:action:heartbeat",this._0.p(this)),this.parent.stream.on("client:browsing:assist:start",this.g0.p(this)),this.parent.stream.on("client:browsing:assist:stop",this.w0.p(this)),this.parent.stream.on("client:browsing:assist:heartbeat",this.b0.p(this)),this.parent.stream.on("client:browsing:assist:mouse",this.k0.p(this)),this.parent.stream.on("client:browsing:assist:scroll",this.x0.p(this)),this.parent.stream.on("client:browsing:assist:click",this.F0.p(this))},C.prototype.j0=function(){var t;"object"!==f(window.sessionStorage)||(t=window.sessionStorage.getItem(this.Pf()))&&(t=JSON.parse(t),this.Yd=t.browsing_id||null,this.Kd=t.is_playing||!1,this.nd=t.last_heartbeat||null)},C.prototype.Qd=function(t){!0===this.Gd&&!0!==t.resume||(!0!==t.resume&&this.Vd(),this.parent.event.publish("browsing:request:initiate",t||{}))},C.prototype.v0=function(t){!0===this.Gd&&(this.Yd=t.browsing_id,this.nd=(new Date).getTime(),this.q0())},C.prototype.y0=function(){!0===this.Gd&&this.Yd&&this.Xd()},C.prototype.m0=function(){!0===this.Gd&&this.Yd&&this.Vd()},C.prototype._0=function(){!0===this.Gd&&this.Yd&&(this.nd=(new Date).getTime(),this.q0())},C.prototype.g0=function(){!0===this.Gd&&this.Yd&&!0===this.z0("assist")&&this.parent.event.publish("browsing:assist:started",{})},C.prototype.w0=function(){!0===this.Gd&&this.Yd&&!0===this.E0("assist")&&this.parent.event.publish("browsing:assist:stopped",{})},C.prototype.b0=function(){!0===this.Gd&&this.Yd&&this.C0("assist")},C.prototype.k0=function(t){!0===this.Gd&&this.Yd&&!0===this.r0.assist.ongoing&&this.parent.event.publish("browsing:assist:mouse",t)},C.prototype.x0=function(t){!0===this.Gd&&this.Yd&&!0===this.r0.assist.ongoing&&this.parent.event.publish("browsing:assist:scroll",t)},C.prototype.F0=function(t){!0===this.Gd&&this.Yd&&!0===this.r0.assist.ongoing&&this.parent.event.publish("browsing:assist:click",t)},C.prototype.q0=function(){"object"===f(window.sessionStorage)&&JSON&&"function"==typeof JSON.stringify&&window.sessionStorage.setItem(this.Pf(),JSON.stringify({browsing_id:this.Yd,is_playing:this.Kd,last_heartbeat:this.nd}))},C.prototype.i0=function(){"object"===f(window.sessionStorage)&&"object"===f(window.sessionStorage)&&window.sessionStorage.removeItem(this.Pf())},C.prototype.Xd=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.Kd=!0,this.nd=(new Date).getTime(),this.q0(),this.A0(),this.S0(!0),this.I0(!0),this.D0(!0),!0!==t&&this.parent.stream.emit("client:browsing:action:started",{})},C.prototype.Vd=function(){var t=this.Kd;this.l0&&this.l0.disconnect(),this.c(),this.q0(),!0===t&&this.parent.stream.emit("client:browsing:action:stopped",{}),this.parent.Stream.unbind_from()},C.prototype.A0=function(){var s=this;if(this.R0(),this.B0(),this.O0(),this.l0)return this.U0(this.u0);this.l0=new this.Wd(document,{initialize:function(t,i){s.u0={f:"initialize",args:[t,i]},s.U0(s.u0)},applyChanged:function(t,i,n,e){s.f0.push({f:"applyChanged",args:[t,i,n,e]})}})},C.prototype.U0=function(t){t.f&&t.args&&"function"==typeof JSON.stringify&&this.parent.stream.emit("client:browsing:stream:mirror",{f:t.f,args:JSON.stringify(t.args)})},C.prototype.B0=function(){this.parent.stream.emit("client:browsing:stream:tab",{title:document.title,url:document.location.href,width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight})},C.prototype.R0=function(){this.parent.stream.emit("client:browsing:stream:mouse",{x:this.d0.x,y:this.d0.y})},C.prototype.O0=function(){this.parent.stream.emit("client:browsing:stream:scroll",{x:this.p0.x,y:this.p0.y})},C.prototype.$0=function(){this.parent.stream.emit("client:browsing:stream:click",{})},C.prototype.z0=function(t){var i=!0!==this.r0[t].ongoing&&!0;return this.r0[t].ongoing=!0,this.C0(t),this.parent.stream.emit("client:browsing:"+t+":started",{}),i},C.prototype.E0=function(t){return!0===this.r0[t].ongoing&&(this.C0(t,!1),this.r0[t].ongoing=!1,this.parent.stream.emit("client:browsing:"+t+":stopped",{}),!0)},C.prototype.C0=function(t){var i=this,n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];!0===this.r0[t].ongoing&&(null!==this.r0[t].dead_timeout&&(this.parent.Schedule.clear_timeout(this.r0[t].dead_timeout),this.r0[t].dead_timeout=null),!0===n?(this.r0[t].last_heartbeat=(new Date).getTime(),this.r0[t].dead_timeout=this.parent.Schedule.set_timeout(function(){i.E0(t)},this.M0)):this.r0[t].last_heartbeat=null)},C.prototype.T0=function(){var i=this;this.parent.Listener.add_event("browsing","document","mousemove",function(t){i.d0.last_x=t.pageX,i.d0.last_y=t.pageY})},C.prototype.N0=function(){var n=this;this.parent.Listener.add_event("browsing","window","resize",function(){null!==n.o0.defer_event&&n.parent.Schedule.clear_timeout(n.o0.defer_event),n.o0.defer_event=n.parent.Schedule.set_timeout(function(){n.o0.defer_event=null;var t=n.o0.last_call,i=(new Date).getTime();n.o0.last_call=i,t&&i>t+n.L0&&!0===n.Kd&&n.B0()},n.P0)})},C.prototype.J0=function(){var i=this;this.parent.Listener.add_event("browsing","window","scroll",function(){var t;!0!==i.t0&&(t=document.documentElement,i.p0.last_x=(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0),i.p0.last_y=(window.pageYOffset||t.scrollTop)-(t.clientTop||0))})},C.prototype.H0=function(){var i=this;this.parent.Listener.add_event("browsing","window","click",function(t){!0!==i.Kd||t.du||i.V0("click",function(){i.$0(),i.R0()})})},C.prototype.Zd=function(){return null===this.nd||null!==this.nd&&(new Date).getTime()-this.nd>=this.W0},C.prototype.sd=function(){var t=this,i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!==this.n0&&this.parent.Schedule.clear_interval(this.n0),!0===i&&(this.n0=this.parent.Schedule.set_interval(function(){t.parent.stream.emit("client:browsing:heartbeat",{}),!0===t.Zd()&&t.Vd()},this.G0))},C.prototype.S0=function(){var t=this,i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!==this.s0&&(this.parent.Schedule.clear_interval(this.s0),this.s0=null),!0===i&&(this.s0=this.parent.Schedule.set_interval(function(){t.d0.last_x===t.d0.x&&t.d0.last_y===t.d0.y||!0!==t.Kd||(t.d0.x=t.d0.last_x,t.d0.y=t.d0.last_y,t.R0())},this.L0))},C.prototype.I0=function(){var t=this,i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!==this.c0&&(this.parent.Schedule.clear_interval(this.c0),this.c0=null),!0===i&&(this.c0=this.parent.Schedule.set_interval(function(){t.p0.last_x===t.p0.x&&t.p0.last_y===t.p0.y||!0!==t.Kd||(t.p0.x=t.p0.last_x,t.p0.y=t.p0.last_y,t.R0(),t.O0())},this.L0))},C.prototype.D0=function(){var i=this,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!==this.e0&&this.parent.Schedule.clear_interval(this.e0),!0===t&&(this.e0=this.parent.Schedule.set_interval(function(){for(var t=0;t<i.f0.length&&!(t>=i.Y0);t++)i.U0(i.f0[t]);i.f0.splice(0,i.Y0)},this.K0))},C.prototype.V0=function(t,i){var n=this;void 0===this.a0[t]&&(this.a0[t]=this.parent.Schedule.set_timeout(function(){delete n.a0[t],i()},this.X0))},C);function C(t){this.parent=t,this.G0=1e4,this.W0=45e3,this.M0=45e3,this.P0=1e3,this.L0=1e3,this.X0=500,this.K0=1e3,this.Y0=10,this.Hd=["browsing:action:start","browsing:action:stop","browsing:action:heartbeat","browsing:assist:start","browsing:assist:stop","browsing:assist:heartbeat","browsing:assist:mouse","browsing:assist:scroll","browsing:assist:click"],this.c(),this.Sl(),this.j0(),this.T0(),this.N0(),this.J0(),this.H0()}f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var A=(S.prototype.init=function(t,i,n){var e=this;this.parent.Stream.bind_to(null,this.Hd,{session_id:this.parent.Session.pt},function(){e.yu=t.mode||null,e.Z0=t.ice||[],!0===t.has_support?(e.parent.stream.emit("client:call:request:initiated",{call_id:t.call_id}),e.sd(!0)):e.parent.stream.emit("client:call:request:decline",{}),"function"==typeof i&&i()},function(){"function"==typeof n&&n()})},S.prototype.accept=function(){!0===this.Gd&&(this.Q0=!0,this.parent.stream.emit("client:call:request:accept",{}))},S.prototype.decline=function(){!0===this.Gd&&(this.parent.stream.emit("client:call:request:decline",{}),this.Vd())},S.prototype.stop=function(){!0===this.Gd&&(this.parent.stream.emit("client:call:action:stopped",{}),this.Vd())},S.prototype.toggle_audio=function(){return this.tp("audio","getAudioTracks")},S.prototype.toggle_video=function(){return this.tp("video","getVideoTracks")},S.prototype.toggle_screensharing=function(){return!0===this.Gd&&null!==this.ip.local&&(!1===this.np?this.ep():this.sp()),this.np},S.prototype.is_ongoing=function(){return!0===this.Gd&&null!==this.cp&&!0},S.prototype.has_support_screensharing=function(){return!(!navigator.mediaDevices||"function"!=typeof navigator.mediaDevices.getDisplayMedia)},S.prototype.get_stream=function(t){return this.ip[t]||null},S.prototype.reset=function(){!0===this.Gd&&this.Vd(),this.c()},S.prototype.c=function(){this.Gd=!1,this.np=!1,this.Q0=!1,this.ap=!1,this.Yd=null,this.cp=null,this.n0=null,this.rp=null,this.yu=null,this.Z0=[],this.ip={local:null,remote:null},this.op={video:null}},S.prototype.Sl=function(){this.parent.socket.on("call:request:initiate",this.Qd.p(this)),this.parent.stream.on("client:call:request:accepted",this.hp.p(this)),this.parent.stream.on("client:call:request:declined",this.up.p(this)),this.parent.stream.on("client:call:action:stopped",this.lp.p(this)),this.parent.stream.on("client:call:signaling:sdp",this.fp.p(this)),this.parent.stream.on("client:call:signaling:candidate",this.dp.p(this))},S.prototype.Qd=function(t){!0!==this.Gd&&(t.has_support=-1!==(this.parent.device.capabilities||[]).indexOf("call"),this.Gd=!0,this.parent.event.publish("call:request:initiate",t))},S.prototype.hp=function(){!0===this.Gd&&!0!==this.Q0&&this.Vd()},S.prototype.up=function(){!0===this.Gd&&this.Vd()},S.prototype.lp=function(){!0===this.Gd&&this.Vd()},S.prototype.fp=function(t){var i=this;!0===this.Gd&&(this.pp(),"operator"===t.from&&this.cp.setRemoteDescription(new RTCSessionDescription(t.sdp)).then(function(){return i.parent.event.publish("call:peer:remote:success",{}),null===i.ip.local?i.vp():"offer"===t.sdp.type?i.yp("answer"):Promise.resolve()}).catch(function(){i.parent.event.publish("call:peer:remote:error",{})}))},S.prototype.dp=function(t){!0===this.Gd&&(this.pp(),"operator"===t.from&&"object"===f(t.candidate)&&null!==t.candidate&&this.cp.addIceCandidate(new RTCIceCandidate({sdpMLineIndex:t.candidate.sdpMLineIndex,candidate:t.candidate.candidate})).catch(function(){}))},S.prototype.pp=function(){var n=this;null===this.cp&&(this.cp=new RTCPeerConnection({iceServers:this.Z0}),this.cp.onicecandidate=function(t){t&&t.candidate&&n.parent.stream.emit("client:call:signaling:candidate",{from:"user",candidate:t.candidate})},this.cp.ontrack=function(t){t=t.streams[0],n.ip.remote=t,n.parent.event.publish("call:media:remote:success",{}),t.onremovetrack=function(){n.parent.event.publish("call:media:remote:success",{})}},this.cp.oniceconnectionstatechange=function(t){var i=n.cp;null!==i&&"failed"!==i.iceConnectionState&&"closed"!==i.iceConnectionState||n.mp(),null!==i&&"disconnected"===i.iceConnectionState&&(n.rp=n.parent.Schedule.set_timeout(function(){(n.rp=null)!==n.cp&&"connected"===i.iceConnectionState||n.mp()},n._p)),null!==i&&"connected"===i.iceConnectionState&&!0!==n.ap&&n.parent.Schedule.set_timeout(function(){n.vp(!0)},n.gp)},this.cp.onnegotiationneeded=function(){n.yp("offer")},this.cp.onclose=function(){n.mp()})},S.prototype.vp=function(){function i(t){n.parent.event.publish("call:peer:local:error",{})}var n=this,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.wp(function(t){navigator.mediaDevices.getUserMedia({audio:!0,video:"video"===n.yu&&!0===t.video}).then(function(t){return n.ip.local=t,n.parent.event.publish("call:media:local:success",{retried:e||!1}),!0===e&&(n.ap=!0),n.bp(t,e)}).catch(i)},i)},S.prototype.bp=function(t){var i=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=t.getTracks();!0===n&&this.cp.getSenders().forEach(function(t){t.track&&t.track.stop(),i.cp.removeTrack(t)});for(var s=0;s<e.length;s++)this.cp.addTrack(e[s],t);!0!==n&&this.yp("answer")},S.prototype.wp=function(n,e){var s={audio:!1,video:!1};navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(t){for(var i=0;i<t.length;i++)switch(t[i].kind){case"audioinput":s.audio=!0;break;case"videoinput":s.video=!0}!0!==s.audio?e():n(s)}).catch(e):n(s)},S.prototype.yp=function(){var i=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"offer",e=void 0;return Promise.resolve().then(function(){var t={OfferToReceiveAudio:!0,OfferToReceiveVideo:!0};return"answer"===n?i.cp.createAnswer(t):i.cp.createOffer(t)}).then(function(t){return e=t,i.cp.setLocalDescription(e)}).then(function(){return i.parent.stream.emit("client:call:signaling:sdp",{from:"user",sdp:e}),i.parent.event.publish("call:peer:local:success",{}),Promise.resolve()}).catch(function(){return i.parent.event.publish("call:peer:local:error",{}),Promise.resolve()})},S.prototype.Vd=function(){this.mp()},S.prototype.mp=function(){if(null!==this.cp){for(var t=this.cp.getSenders(),i=0;i<t.length;i++)null!==t[i].track&&t[i].track.stop();null!==this.op.video&&this.op.video.stop(),this.cp.close(),this.cp=null}null!==this.rp&&(this.parent.Schedule.clear_timeout(this.rp),this.rp=null),this.parent.Stream.unbind_from(),this.Gd=!1,this.np=!1,this.Q0=!1,this.ap=!1,this.yu=null,this.Z0=[],this.ip.local=null,this.ip.remote=null,this.op.video=null,this.sd(!1),this.parent.event.publish("call:action:stopped",{})},S.prototype.tp=function(t,i){var n=!1;if(!0===this.Gd&&null!==this.ip.local){for(var e=!1,s=this.ip.local[i](),c=0;c<s.length;c++)e=!0,n=!s[c].enabled,s[c].enabled=n;!0===e&&this.parent.event.publish("call:track:local:"+(!0===n?"started":"ended"),{media:t})}return n},S.prototype.ep=function(){var s=this;!0===this.has_support_screensharing()&&(this.np=!0,navigator.mediaDevices.getDisplayMedia({video:!0}).then(function(t){for(var t=t.getTracks()[0],i=s.cp.getSenders(),n=null,e=0;e<i.length;e++)if(i[e].track&&"video"===i[e].track.kind){n=i[e];break}null!==n?(s.op.video=n.track,n.replaceTrack(t)):n=s.cp.addTrack(t,s.ip.local),t.onended=function(){null!==s.cp&&(s.kp(n),s.parent.event.publish("call:track:local:ended",{media:"screensharing"}))},s.parent.event.publish("call:track:local:started",{media:"screensharing"})}).catch(function(t){s.np=!1}))},S.prototype.sp=function(){for(var t=this.cp.getSenders(),i=null,n=0;n<t.length;n++)if(t[n].track&&"video"===t[n].track.kind){i=t[n];break}null!==i&&(i.track.stop(),i.track.dispatchEvent(new Event("ended")))},S.prototype.kp=function(t){null!==this.op.video?(t.replaceTrack(this.op.video),this.op.video=null):this.cp.removeTrack(t),this.np=!1},S.prototype.sd=function(){var t=this,i=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];null!==this.n0&&this.parent.Schedule.clear_interval(this.n0),!0===i&&(this.n0=this.parent.Schedule.set_interval(function(){t.parent.stream.emit("client:call:heartbeat",{})},this.G0))},S);function S(t){this.parent=t,this.G0=1e4,this._p=5e3,this.gp=200,this.Hd=["call:request:initiate","call:request:accepted","call:request:declined","call:action:stopped","call:signaling:sdp","call:signaling:candidate"],this.c(),this.Sl()}var I=(D.prototype.fired=function(t,i){this.parent.socket.emit("trigger:fired",i={identifier:t,name:i}),this.parent.event.publish("trigger:fired",i)},D);function D(t){this.parent=t}f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var R,B,O=(U.prototype.configure=function(t){this.xp=t.project,this.Fp=t.revision,this.jp=t.environment,this.qp=t.useragent,this.zp=t.page},U.prototype.report=function(t,i,n){if(!(this.xp&&this.Fp&&this.jp&&this.qp&&this.zp))throw new Error("Missing a configuration parameter. Did you call configure() before?");"object"===(void 0===n?"undefined":f(n))&&n instanceof Error&&(n={fileName:n.fileName,lineNumber:n.lineNumber,columnNumber:n.columnNumber,message:n.message,stack:n.stack}),n={project:this.xp,revision:this.Fp,environment:this.jp,useragent:this.qp,page:this.zp,level:t,namespace:i,traceback:n},this.parent.socket.emit("issue:report",n),this.parent.event.publish("issue:report",n)},U.prototype.c=function(){this.xp=null,this.Fp=null,this.jp=null,this.qp=null,this.zp=null},U);function U(t){this.parent=t,this.c()}R=r,B=function(){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function c(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}function s(){return(s=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var n,e=arguments[i];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}).apply(this,arguments)}function a(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&r(t,i)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,i){return(r=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function l(t,i,n){return(l=u()?Reflect.construct:function(t,i,n){var e=[null];return e.push.apply(e,i),e=new(Function.bind.apply(t,e)),n&&r(e,n.prototype),e}).apply(null,arguments)}function n(t){var n="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,i)}function i(){return l(t,arguments,h(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),r(i,t)}(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(n){var e=u();return function(){var t,i=h(n);return function(t,i){if(i&&("object"==typeof i||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,e?(t=h(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments))}}function p(t,i,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,i,n){if(t=function(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=h(t)););return t}(t,i))return(i=Object.getOwnPropertyDescriptor(t,i)).get?i.get.call(n):i.value})(t,i,n||t)}function v(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,e=new Array(i);n<i;n++)e[n]=t[n];return e}var y=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,m=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],_=Object.create(null);_.open="0",_.close="1",_.ping="2",_.pong="3",_.message="4",_.upgrade="5",_.noop="6";var g=Object.create(null);Object.keys(_).forEach(function(t){g[_[t]]=t});for(var w={type:"error",data:"parser error"},b="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),k="function"==typeof ArrayBuffer,x=function(t,i){var n=new FileReader;return n.onload=function(){var t=n.result.split(",")[1];i("b"+t)},n.readAsDataURL(t)},t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<t.length;i++)F[t.charCodeAt(i)]=i;function j(t,i){return"blob"===i&&t instanceof ArrayBuffer?new Blob([t]):t}var q="function"==typeof ArrayBuffer,z=E;function E(t){if(t)return function(t){for(var i in E.prototype)t[i]=E.prototype[i];return t}(t)}E.prototype.on=E.prototype.addEventListener=function(t,i){return this.Ep=this.Ep||{},(this.Ep["$"+t]=this.Ep["$"+t]||[]).push(i),this},E.prototype.once=function(t,i){function n(){this.off(t,n),i.apply(this,arguments)}return n.fn=i,this.on(t,n),this},E.prototype.off=E.prototype.removeListener=E.prototype.removeAllListeners=E.prototype.removeEventListener=function(t,i){if(this.Ep=this.Ep||{},0==arguments.length)return this.Ep={},this;var n,e=this.Ep["$"+t];if(!e)return this;if(1==arguments.length)return delete this.Ep["$"+t],this;for(var s=0;s<e.length;s++)if((n=e[s])===i||n.fn===i){e.splice(s,1);break}return 0===e.length&&delete this.Ep["$"+t],this},E.prototype.emitReserved=E.prototype.emit=function(t){this.Ep=this.Ep||{};for(var i=new Array(arguments.length-1),n=this.Ep["$"+t],e=1;e<arguments.length;e++)i[e-1]=arguments[e];if(n)for(var e=0,s=(n=n.slice(0)).length;e<s;++e)n[e].apply(this,i);return this},E.prototype.listeners=function(t){return this.Ep=this.Ep||{},this.Ep["$"+t]||[]},E.prototype.hasListeners=function(t){return!!this.listeners(t).length};var C="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),A=setTimeout,S=clearTimeout;function I(t,i){i.useNativeTimers?(t.setTimeoutFn=A.bind(C),t.clearTimeoutFn=S.bind(C)):(t.setTimeoutFn=setTimeout.bind(C),t.clearTimeoutFn=clearTimeout.bind(C))}var D,R=function(t){a(i,n(Error));var e=d(i);function i(t,i,n){return(t=e.call(this,t)).description=i,t.context=n,t.type="TransportError",t}return i}(),B=function(t){a(e,z);var n=d(e);function e(t){var i=n.call(this);return i.writable=!1,I(f(i),t),i.opts=t,i.query=t.query,i.readyState="",i.socket=t.socket,i}return c(e,[{key:"onError",value:function(t,i,n){return p(h(e.prototype),"emitReserved",this).call(this,"error",new R(t,i,n)),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(t){"open"===this.readyState&&this.write(t)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,p(h(e.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(t){t=function(t,i){if("string"!=typeof t)return{type:"message",data:j(t,i)};var n,e=t.charAt(0);return"b"===e?{type:"message",data:(n=t.substring(1),i=i,q?j(function(t){var i,n,e,s,c=.75*t.length,a=t.length,r=0;"="===t[t.length-1]&&(c--,"="===t[t.length-2]&&c--);for(var c=new ArrayBuffer(c),o=new Uint8Array(c),h=0;h<a;h+=4)i=F[t.charCodeAt(h)],n=F[t.charCodeAt(h+1)],e=F[t.charCodeAt(h+2)],s=F[t.charCodeAt(h+3)],o[r++]=i<<2|n>>4,o[r++]=(15&n)<<4|e>>2,o[r++]=(3&e)<<6|63&s;return c}(n),i):{base64:!0,data:n})}:g[e]?1<t.length?{type:g[e],data:t.substring(1)}:{type:g[e]}:w}(t,this.socket.binaryType),this.onPacket(t)}},{key:"onPacket",value:function(t){p(h(e.prototype),"emitReserved",this).call(this,"packet",t)}},{key:"onClose",value:function(t){this.readyState="closed",p(h(e.prototype),"emitReserved",this).call(this,"close",t)}}]),e}(),O="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),U={},$=0,M=0;function T(t){for(var i="";i=O[t%64]+i,0<(t=Math.floor(t/64)););return i}for(;M<64;M++)U[O[M]]=M;var N="function"==typeof Promise&&"function"==typeof Promise.resolve?function(t){return Promise.resolve().then(t)}:function(t,i){return i(t,0)},L=C.WebSocket||C.MozWebSocket,P="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),J={websocket:function(t){a(i,B);var n=d(i);function i(t){var i=n.call(this,t);return i.supportsBinary=!t.forceBase64,i}return c(i,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var t=this.uri(),i=this.opts.protocols,n=P?{}:function(n){for(var t=arguments.length,i=new Array(1<t?t-1:0),e=1;e<t;e++)i[e-1]=arguments[e];return i.reduce(function(t,i){return n.hasOwnProperty(i)&&(t[i]=n[i]),t},{})}(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=P?new L(t,i,n):i?new L(t,i):new L(t)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var i=this;this.ws.onopen=function(){i.opts.autoUnref&&i.ws.Cp.unref(),i.onOpen()},this.ws.onclose=function(t){return i.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return i.onData(t.data)},this.ws.onerror=function(t){return i.onError("websocket error",t)}}},{key:"write",value:function(a){var r=this;this.writable=!1;for(var t=0;t<a.length;t++)(function(t){var i,n=a[t],e=t===a.length-1,s=n,c=r.supportsBinary;t=function(t){try{r.ws.send(t)}catch(t){}e&&N(function(){r.writable=!0,r.emitReserved("drain")},r.setTimeoutFn)},n=s.type,s=s.data,b&&s instanceof Blob?c?t(s):x(s,t):k&&(s instanceof ArrayBuffer||(i=s,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer))?c?t(s):x(new Blob([s]),t):t(_[n]+(s||""))})(t)}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var t,i=this.query||{},n=this.opts.secure?"wss":"ws",e="";return this.opts.port&&("wss"==n&&443!==Number(this.opts.port)||"ws"==n&&80!==Number(this.opts.port))&&(e=":"+this.opts.port),this.opts.timestampRequests&&(i[this.opts.timestampParam]=(t=T(+new Date))!==D?($=0,D=t):t+"."+T($++)),this.supportsBinary||(i.b64=1),i=function(t){var i,n="";for(i in t)t.hasOwnProperty(i)&&(n.length&&(n+="&"),n+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return n}(i),n+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+e+this.opts.path+(i.length?"?"+i:"")}},{key:"check",value:function(){return!(!L||"Ap"in L&&this.name===i.prototype.name)}}]),i}()},H=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,V=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function W(t){var i=t,n=t.indexOf("["),e=t.indexOf("]");-1!=n&&-1!=e&&(t=t.substring(0,n)+t.substring(n,e).replace(/:/g,";")+t.substring(e,t.length));for(var s,c=H.exec(t||""),a={},r=14;r--;)a[V[r]]=c[r]||"";return-1!=n&&-1!=e&&(a.source=i,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=(e=(n=a.path).replace(/\/{2,9}/g,"/").split("/"),"/"!=n.substr(0,1)&&0!==n.length||e.splice(0,1),"/"==n.substr(n.length-1,1)&&e.splice(e.length-1,1),e),a.queryKey=(i=a.query,s={},i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,i,n){i&&(s[i]=n)}),s),a}var G=function(t){a(l,z);var n=d(l);function l(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=n.call(this);return t&&"object"===o(t)&&(i=t,t=null),t?(t=W(t),i.hostname=t.host,i.secure="https"===t.protocol||"wss"===t.protocol,i.port=t.port,t.query&&(i.query=t.query)):i.host&&(i.hostname=W(i.host).host),I(f(a),i),a.secure=null!=i.secure?i.secure:"undefined"!=typeof location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=a.secure?"443":"80"),a.hostname=i.hostname||("undefined"!=typeof location?location.hostname:"localhost"),a.port=i.port||("undefined"!=typeof location&&location.port?location.port:a.secure?"443":"80"),a.transports=i.transports||["websocket"],a.readyState="",a.writeBuffer=[],a.prevBufferLen=0,a.opts=s({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),a.opts.path=a.opts.path.replace(/\/$/,"")+"/","string"==typeof a.opts.query&&(a.opts.query=function(t){for(var i={},n=a.opts.query.split("&"),e=0,s=n.length;e<s;e++){var c=n[e].split("=");i[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return i}()),a.id=null,a.upgrades=null,a.pingInterval=null,a.pingTimeout=null,a.pingTimeoutTimer=null,"function"==typeof addEventListener&&(a.opts.closeOnBeforeunload&&addEventListener("beforeunload",function(){a.transport&&(a.transport.removeAllListeners(),a.transport.close())},!1),"localhost"!==a.hostname&&(a.offlineEventListener=function(){a.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",a.offlineEventListener,!1))),a.open(),a}return c(l,[{key:"createTransport",value:function(t){var i=function(t){var i,n={};for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}(this.opts.query);return i.EIO=4,i.transport=t,this.id&&(i.sid=this.id),i=s({},this.opts.transportOptions[t],this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port}),new J[t](i)}},{key:"open",value:function(){var t,i=this;if(this.opts.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(function(){i.emitReserved("error","No transports available")},0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}},{key:"setTransport",value:function(t){var i=this;this.transport&&this.transport.removeAllListeners(),(this.transport=t).on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",function(t){return i.onClose("transport close",t)})}},{key:"probe",value:function(t){var i=this,n=this.createTransport(t),e=!1;l.priorWebsocketSuccess=!1;var s=function(){e||(n.send([{type:"ping",data:"probe"}]),n.once("packet",function(t){e||("pong"===t.type&&"probe"===t.data?(i.upgrading=!0,i.emitReserved("upgrading",n),n&&(l.priorWebsocketSuccess="websocket"===n.name,i.transport.pause(function(){e||"closed"!==i.readyState&&(u(),i.setTransport(n),n.send([{type:"upgrade"}]),i.emitReserved("upgrade",n),n=null,i.upgrading=!1,i.flush())}))):((t=new Error("probe error")).transport=n.name,i.emitReserved("upgradeError",t)))}))};function c(){e||(e=!0,u(),n.close(),n=null)}var a=function(t){(t=new Error("probe error: "+t)).transport=n.name,c(),i.emitReserved("upgradeError",t)};function r(){a("transport closed")}function o(){a("socket closed")}function h(t){n&&t.name!==n.name&&c()}var u=function(){n.removeListener("open",s),n.removeListener("error",a),n.removeListener("close",r),i.off("close",o),i.off("upgrading",h)};n.once("open",s),n.once("error",a),n.once("close",r),this.once("close",o),this.once("upgrading",h),n.open()}},{key:"onOpen",value:function(){if(this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var t=0,i=this.upgrades.length;t<i;t++)this.probe(this.upgrades[t])}},{key:"onPacket",value:function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var i=new Error("server error");i.code=t.data,this.onError(i);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}},{key:"onHandshake",value:function(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var t=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(function(){t.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){var t;"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(t=this.getWritablePackets(),this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush"))}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&1<this.writeBuffer.length))return this.writeBuffer;for(var t=1,i=0;i<this.writeBuffer.length;i++){var n=this.writeBuffer[i].data;if(n&&(t+="string"==typeof n?function(t){for(var i,n=0,e=0,s=t.length;e<s;e++)(i=t.charCodeAt(e))<128?n+=1:i<2048?n+=2:i<55296||57344<=i?n+=3:(e++,n+=4);return n}(n):Math.ceil(1.33*(n.byteLength||n.size))),0<i&&t>this.maxPayload)return this.writeBuffer.slice(0,i);t+=2}return this.writeBuffer}},{key:"write",value:function(t,i,n){return this.sendPacket("message",t,i,n),this}},{key:"send",value:function(t,i,n){return this.sendPacket("message",t,i,n),this}},{key:"sendPacket",value:function(t,i,n,e){"function"==typeof i&&(e=i,i=void 0),"function"==typeof n&&(e=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((n=n||{}).compress=!1!==n.compress,this.emitReserved("packetCreate",n={type:t,data:i,options:n}),this.writeBuffer.push(n),e&&this.once("flush",e),this.flush())}},{key:"close",value:function(){function t(){i.once("upgrade",e),i.once("upgradeError",e)}var i=this,n=function(){i.onClose("forced close"),i.transport.close()},e=function t(){i.off("upgrade",t),i.off("upgradeError",t),n()};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",function(){(i.upgrading?t:n)()}):(this.upgrading?t:n)()),this}},{key:"onError",value:function(t){l.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}},{key:"onClose",value:function(t,i){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,i),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(t){for(var i=[],n=0,e=t.length;n<e;n++)~this.transports.indexOf(t[n])&&i.push(t[n]);return i}}]),l}();G.protocol=4;var Y,K="function"==typeof ArrayBuffer,X=Object.prototype.toString,Z="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===X.call(Blob),Q="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===X.call(File);function tt(t){return K&&(t instanceof ArrayBuffer||(i=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer))||Z&&t instanceof Blob||Q&&t instanceof File;var i}(it=Y={})[it.CONNECT=0]="CONNECT",it[it.DISCONNECT=1]="DISCONNECT",it[it.EVENT=2]="EVENT",it[it.ACK=3]="ACK",it[it.CONNECT_ERROR=4]="CONNECT_ERROR",it[it.BINARY_EVENT=5]="BINARY_EVENT",it[it.BINARY_ACK=6]="BINARY_ACK";var X=function(){function t(){}return c(t,[{key:"encode",value:function(t){return t.type!==Y.EVENT&&t.type!==Y.ACK||!function t(i,n){if(!i||"object"!==o(i))return!1;if(Array.isArray(i)){for(var e=0,s=i.length;e<s;e++)if(t(i[e]))return!0;return!1}if(tt(i))return!0;if(i.toJSON&&"function"==typeof i.toJSON&&1===arguments.length)return t(i.toJSON(),!0);for(var c in i)if(Object.prototype.hasOwnProperty.call(i,c)&&t(i[c]))return!0;return!1}(t)?[this.encodeAsString(t)]:(t.type=t.type===Y.EVENT?Y.BINARY_EVENT:Y.BINARY_ACK,this.encodeAsBinary(t))}},{key:"encodeAsString",value:function(t){var i=""+t.type;return t.type!==Y.BINARY_EVENT&&t.type!==Y.BINARY_ACK||(i+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(i+=t.nsp+","),null!=t.id&&(i+=t.id),null!=t.data&&(i+=JSON.stringify(t.data)),i}},{key:"encodeAsBinary",value:function(t){var i,n=(n=(i=t).data,i.data=function t(i,n){if(!i)return i;if(tt(i)){var e={Sp:!0,num:n.length};return n.push(i),e}if(Array.isArray(i)){for(var s=new Array(i.length),c=0;c<i.length;c++)s[c]=t(i[c],n);return s}if("object"!==o(i)||i instanceof Date)return i;var a,r={};for(a in i)i.hasOwnProperty(a)&&(r[a]=t(i[a],n));return r}(n,n=[]),i.attachments=n.length,{packet:i,buffers:n}),t=this.encodeAsString(n.packet);return(n=n.buffers).unshift(t),n}}]),t}(),it=function(t){a(r,z);var i=d(r);function r(){return i.call(this)}return c(r,[{key:"add",value:function(t){var i;if("string"==typeof t)(i=this.decodeString(t)).type===Y.BINARY_EVENT||i.type===Y.BINARY_ACK?(this.reconstructor=new nt(i),0===i.attachments&&p(h(r.prototype),"emitReserved",this).call(this,"decoded",i)):p(h(r.prototype),"emitReserved",this).call(this,"decoded",i);else{if(!tt(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(i=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,p(h(r.prototype),"emitReserved",this).call(this,"decoded",i))}}},{key:"decodeString",value:function(t){var i=0,n={type:Number(t.charAt(0))};if(void 0===Y[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Y.BINARY_EVENT||n.type===Y.BINARY_ACK){for(var e=i+1;"-"!==t.charAt(++i)&&i!=t.length;);if((e=t.substring(e,i))!=Number(e)||"-"!==t.charAt(i))throw new Error("Illegal attachments");n.attachments=Number(e)}if("/"===t.charAt(i+1)){for(var s=i+1;++i&&","!==t.charAt(i)&&i!==t.length;);n.nsp=t.substring(s,i)}else n.nsp="/";if(""!==(s=t.charAt(i+1))&&Number(s)==s){for(var c=i+1;++i;){var a=t.charAt(i);if(null==a||Number(a)!=a){--i;break}if(i===t.length)break}n.id=Number(t.substring(c,i+1))}if(t.charAt(++i)){if(c=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(i)),!r.isPayloadValid(n.type,c))throw new Error("invalid payload");n.data=c}return n}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(t,i){switch(t){case Y.CONNECT:return"object"===o(i);case Y.DISCONNECT:return void 0===i;case Y.CONNECT_ERROR:return"string"==typeof i||"object"===o(i);case Y.EVENT:case Y.BINARY_EVENT:return Array.isArray(i)&&0<i.length;case Y.ACK:case Y.BINARY_ACK:return Array.isArray(i)}}}]),r}(),nt=function(){function t(t){this.packet=t,this.buffers=[],this.reconPack=t}return c(t,[{key:"takeBinaryData",value:function(t){return this.buffers.push(t),this.buffers.length!==this.reconPack.attachments?null:(i=this.reconPack,n=this.buffers,i.data=function t(i,n){if(!i)return i;if(i&&i.Sp)return n[i.num];if(Array.isArray(i))for(var e=0;e<i.length;e++)i[e]=t(i[e],n);else if("object"===o(i))for(var s in i)i.hasOwnProperty(s)&&(i[s]=t(i[s],n));return i}(i.data,n),i.attachments=void 0,t=i,this.finishedReconstruction(),t);var i,n}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),t}(),et=Object.freeze({__proto__:null,protocol:5,get PacketType(){return Y},Encoder:X,Decoder:it});function st(t,i,n){return t.on(i,n),function(){t.off(i,n)}}var ct=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),at=function(t){a(e,z);var s=d(e);function e(t,i,n){var e=s.call(this);return e.connected=!1,e.disconnected=!0,e.receiveBuffer=[],e.sendBuffer=[],e.ids=0,e.acks={},e.flags={},e.io=t,e.nsp=i,n&&n.auth&&(e.auth=n.auth),e.io._autoConnect&&e.open(),e}return c(e,[{key:"subEvents",value:function(){var t;this.subs||(t=this.io,this.subs=[st(t,"open",this.onopen.bind(this)),st(t,"packet",this.onpacket.bind(this)),st(t,"error",this.onerror.bind(this)),st(t,"close",this.onclose.bind(this))])}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i.unshift("message"),this.emit.apply(this,i),this}},{key:"emit",value:function(t){if(ct.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');for(var i=arguments.length,n=new Array(1<i?i-1:0),e=1;e<i;e++)n[e-1]=arguments[e];n.unshift(t);var s={type:Y.EVENT,data:n,options:{}};s.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]&&(c=this.ids++,t=n.pop(),this._registerAckCallback(c,t),s.id=c);var c=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return(!this.flags.volatile||c&&this.connected)&&(this.connected?this.packet(s):this.sendBuffer.push(s)),this.flags={},this}},{key:"_registerAckCallback",value:function(i,e){var s,c=this,t=this.flags.timeout;void 0!==t?(s=this.io.setTimeoutFn(function(){delete c.acks[i];for(var t=0;t<c.sendBuffer.length;t++)c.sendBuffer[t].id===i&&c.sendBuffer.splice(t,1);e.call(c,new Error("operation has timed out"))},t),this.acks[i]=function(){c.io.clearTimeoutFn(s);for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e.apply(c,[null].concat(i))}):this.acks[i]=e}},{key:"packet",value:function(t){t.nsp=this.nsp,this.io._packet(t)}},{key:"onopen",value:function(){var i=this;"function"==typeof this.auth?this.auth(function(t){i.packet({type:Y.CONNECT,data:t})}):this.packet({type:Y.CONNECT,data:this.auth})}},{key:"onerror",value:function(t){this.connected||this.emitReserved("connect_error",t)}},{key:"onclose",value:function(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}},{key:"onpacket",value:function(t){if(t.nsp===this.nsp)switch(t.type){case Y.CONNECT:t.data&&t.data.sid?(i=t.data.sid,this.onconnect(i)):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Y.EVENT:case Y.BINARY_EVENT:this.onevent(t);break;case Y.ACK:case Y.BINARY_ACK:this.onack(t);break;case Y.DISCONNECT:this.ondisconnect();break;case Y.CONNECT_ERROR:this.destroy();var i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i)}}},{key:"onevent",value:function(t){var i=t.data||[];null!=t.id&&i.push(this.ack(t.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}},{key:"emitEvent",value:function(t){if(this._anyListeners&&this._anyListeners.length){var i,n=function(t,i){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,i){if(t){if("string"==typeof t)return v(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,void 0):void 0}}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var e=0;return{s:i=function(){},n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){a=!0,s=t},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw s}}}}(this._anyListeners.slice());try{for(n.s();!(i=n.n()).done;)i.value.apply(this,t)}catch(t){n.e(t)}finally{n.f()}}p(h(e.prototype),"emit",this).apply(this,t)}},{key:"ack",value:function(e){var s=this,c=!1;return function(){if(!c){c=!0;for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];s.packet({type:Y.ACK,id:e,data:i})}}}},{key:"onack",value:function(t){var i=this.acks[t.id];"function"==typeof i&&(i.apply(this,t.data),delete this.acks[t.id])}},{key:"onconnect",value:function(t){this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var i=this;this.receiveBuffer.forEach(function(t){return i.emitEvent(t)}),this.receiveBuffer=[],this.sendBuffer.forEach(function(t){return i.packet(t)}),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach(function(t){return t()}),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Y.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(t){return this.flags.compress=t,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(t){return this.flags.timeout=t,this}},{key:"onAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}},{key:"prependAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}},{key:"offAny",value:function(t){if(!this._anyListeners)return this;if(t){for(var i=this._anyListeners,n=0;n<i.length;n++)if(t===i[n])return i.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}}]),e}(),rt=ot;function ot(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=0<t.jitter&&t.jitter<=1?t.jitter:0,this.attempts=0}ot.prototype.duration=function(){var t,i,n=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(t=Math.random(),i=Math.floor(t*this.jitter*n),n=0==(1&Math.floor(10*t))?n-i:n+i),0|Math.min(n,this.max)},ot.prototype.reset=function(){this.attempts=0},ot.prototype.setMin=function(t){this.ms=t},ot.prototype.setMax=function(t){this.max=t},ot.prototype.setJitter=function(t){this.jitter=t};var ht=function(t){a(i,z);var s=d(i);function i(t,i){var n,e=s.call(this);return e.nsps={},e.subs=[],t&&"object"===o(t)&&(i=t,t=void 0),(i=i||{}).path=i.path||"/socket.io",e.opts=i,I(f(e),i),e.reconnection(!1!==i.reconnection),e.reconnectionAttempts(i.reconnectionAttempts||1/0),e.reconnectionDelay(i.reconnectionDelay||1e3),e.reconnectionDelayMax(i.reconnectionDelayMax||5e3),e.randomizationFactor(null!==(n=i.randomizationFactor)&&void 0!==n?n:.5),e.backoff=new rt({min:e.reconnectionDelay(),max:e.reconnectionDelayMax(),jitter:e.randomizationFactor()}),e.timeout(null==i.timeout?2e4:i.timeout),e._readyState="closed",e.uri=t,t=i.parser||et,e.encoder=new t.Encoder,e.decoder=new t.Decoder,e._autoConnect=!1!==i.autoConnect,e._autoConnect&&e.open(),e}return c(i,[{key:"reconnection",value:function(t){return arguments.length?(this.Ip=!!t,this):this.Ip}},{key:"reconnectionAttempts",value:function(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}},{key:"reconnectionDelay",value:function(t){var i;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null!==(i=this.backoff)&&void 0!==i&&i.setMin(t),this)}},{key:"randomizationFactor",value:function(t){var i;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null!==(i=this.backoff)&&void 0!==i&&i.setJitter(t),this)}},{key:"reconnectionDelayMax",value:function(t){var i;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null!==(i=this.backoff)&&void 0!==i&&i.setMax(t),this)}},{key:"timeout",value:function(t){return arguments.length?(this.Dp=t,this):this.Dp}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this.Ip&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(i){var n=this;if(~this._readyState.indexOf("open"))return this;this.engine=new G(this.uri,this.opts);var t=this.engine,e=this;this._readyState="opening",this.skipReconnect=!1;var s,c,a=st(t,"open",function(){e.onopen(),i&&i()}),r=st(t,"error",function(t){e.cleanup(),e._readyState="closed",n.emitReserved("error",t),i?i(t):e.maybeReconnectOnOpen()});return!1!==this.Dp&&(0===(s=this.Dp)&&a(),c=this.setTimeoutFn(function(){a(),t.close(),t.emit("error",new Error("timeout"))},s),this.opts.autoUnref&&c.unref(),this.subs.push(function(){clearTimeout(c)})),this.subs.push(a),this.subs.push(r),this}},{key:"connect",value:function(t){return this.open(t)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push(st(t,"ping",this.onping.bind(this)),st(t,"data",this.ondata.bind(this)),st(t,"error",this.onerror.bind(this)),st(t,"close",this.onclose.bind(this)),st(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(t){this.decoder.add(t)}},{key:"ondecoded",value:function(t){this.emitReserved("packet",t)}},{key:"onerror",value:function(t){this.emitReserved("error",t)}},{key:"socket",value:function(t,i){var n;return(n=this.nsps[t])||(n=new at(this,t,i),this.nsps[t]=n),n}},{key:"_destroy",value:function(t){for(var i=0,n=Object.keys(this.nsps);i<n.length;i++){var e=n[i];if(this.nsps[e].active)return}this._close()}},{key:"_packet",value:function(t){for(var i=this.encoder.encode(t),n=0;n<i.length;n++)this.engine.write(i[n],t.options)}},{key:"cleanup",value:function(){this.subs.forEach(function(t){return t()}),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this.Ip&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var i=this;if(this._reconnecting||this.skipReconnect)return this;var t,n,e=this;this.backoff.attempts>=this._reconnectionAttempts?(this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1):(t=this.backoff.duration(),this._reconnecting=!0,n=this.setTimeoutFn(function(){e.skipReconnect||(i.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(e._reconnecting=!1,e.reconnect(),i.emitReserved("reconnect_error",t)):e.onreconnect()}))},t),this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)}))}},{key:"onreconnect",value:function(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}]),i}(),ut={};function lt(t,i){"object"===o(t)&&(i=t,t=void 0);var n=function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=t,e=(2<arguments.length?arguments[2]:void 0)||"undefined"!=typeof location&&location;return"string"==typeof(t=null==t?e.protocol+"//"+e.host:t)&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?e.protocol+t:e.host+t),n=function(t){var i=t,n=t.indexOf("["),e=t.indexOf("]");-1!=n&&-1!=e&&(t=t.substring(0,n)+t.substring(n,e).replace(/:/g,";")+t.substring(e,t.length));for(var s,c=y.exec(t||""),a={},r=14;r--;)a[m[r]]=c[r]||"";return-1!=n&&-1!=e&&(a.source=i,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=(e=(n=a.path).replace(/\/{2,9}/g,"/").split("/"),"/"!=n.substr(0,1)&&0!==n.length||e.splice(0,1),"/"==n.substr(n.length-1,1)&&e.splice(e.length-1,1),e),a.queryKey=(i=a.query,s={},i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,i,n){i&&(s[i]=n)}),s),a}(t=/^(https?|wss?):\/\//.test(t)?t:e.protocol+"//"+t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/",t=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host,n.id=n.protocol+"://"+t+":"+n.port+i,n.href=n.protocol+"://"+t+(e&&e.port===n.port?"":":"+n.port),n}(t,(i=i||{}).path||"/socket.io"),e=n.source,s=n.id,t=n.path,t=ut[s]&&t in ut[s].nsps,s=i.forceNew||i["force new connection"]||!1===i.multiplex||t?new ht(e,i):(ut[s]||(ut[s]=new ht(e,i)),ut[s]);return n.query&&!i.query&&(i.query=n.queryKey),s.socket(n.path,i)}return s(lt,{Manager:ht,Socket:at,io:lt,connect:lt}),lt},"object"==typeof __crisp_void_exports&&"undefined"!=typeof module?module.exports=B():"function"==typeof __crisp_void_define&&define.amd?define(B):(R="undefined"!=typeof __crisp_void_global_this?globalThis:R||self).io=B(),function(t,i){"use strict";"function"==typeof __crisp_void_define&&define.amd?define(["exports"],i):"object"==typeof __crisp_void_exports?i(exports):i(t.PubSub={})}("object"==typeof r?r:this,function(n){"use strict";var o={},e=-1;function r(t){for(var i in t)if(t.hasOwnProperty(i))return!0;return!1}function h(t,i,n){try{t(i,n)}catch(t){setTimeout((e=t,function(){throw e}),0)}var e}function u(t,i,n){t(i,n)}function l(t,i,n,e){var s,c=o[i],a=e?u:h;if(o.hasOwnProperty(i))for(s in c)c.hasOwnProperty(s)&&a(c[s],t,n)}function s(t,i,n,e){var s,c,a,e=(c=i,a=e,function(){var t=String(s),i=t.lastIndexOf(".");for(l(s,s,c,a);-1!==i;)i=(t=t.substr(0,i)).lastIndexOf("."),l(s,t,c,a)});return!!function(t){for(var i=String(s),n=Boolean(o.hasOwnProperty(i)&&r(o[i])),e=i.lastIndexOf(".");!n&&-1!==e;)e=(i=i.substr(0,e)).lastIndexOf("."),n=Boolean(o.hasOwnProperty(i)&&r(o[i]));return n}(s=t)&&(!0===n?e():setTimeout(e,0),!0)}n.publish=function(t,i){return s(t,i,!1,n.immediateExceptions)},n.publishSync=function(t,i){return s(t,i,!0,n.immediateExceptions)},n.subscribe=function(t,i){if("function"!=typeof i)return!1;o.hasOwnProperty(t)||(o[t]={});var n="uid_"+String(++e);return o[t][n]=i,n},n.clearAllSubscriptions=function(){o={}},n.clearSubscriptions=function(t){for(var i in o)o.hasOwnProperty(i)&&0===i.indexOf(t)&&delete o[i]},n.unsubscribe=function(t){var i,n,e,s="string"==typeof t&&o.hasOwnProperty(t),c=!s&&"string"==typeof t,a="function"==typeof t,r=!1;if(!s){for(i in o)if(o.hasOwnProperty(i)){if(n=o[i],c&&n[t]){delete n[t],r=t;break}if(a)for(e in n)n.hasOwnProperty(e)&&n[e]===t&&(delete n[e],r=!0)}return r}delete o[t]}}),function(t,a){"use strict";function i(t){function c(t,i,n){return 1===arguments.length?c.get(t):c.set(t,i,n)}return c.Rp=t.document,c._cacheKeyPrefix="cookey.",c._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),c.defaults={path:"/",secure:!1,sameSite:a},c.get=function(t){return c._cachedDocumentCookie!==c.Rp.cookie&&c._renewCache(),(t=c.Bp[c._cacheKeyPrefix+t])===a?a:decodeURIComponent(t)},c.set=function(t,i,n){return(n=c._getExtendedOptions(n)).expires=c._getExpiresDate(i===a?-1:n.expires),c.Rp.cookie=c._generateCookieString(t,i,n),c},c.expire=function(t,i){return c.set(t,a,i)},c._getExtendedOptions=function(t){return{path:t&&t.path||c.defaults.path,domain:t&&t.domain||c.defaults.domain,expires:t&&t.expires||c.defaults.expires,secure:(t&&t.secure!==a?t:c.defaults).secure,sameSite:t&&t.sameSite||c.defaults.sameSite}},c._isValidDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},c._getExpiresDate=function(t,i){if(i=i||new Date,"number"==typeof t?t=t===1/0?c._maxExpireDate:new Date(i.getTime()+1e3*t):"string"==typeof t&&(t=new Date(t)),t&&!c._isValidDate(t))throw new Error("Invalid expires");return t},c._generateSameSiteString=function(t){switch(t&&t.sameSite||c.defaults.sameSite){case a:return"";case"None":case"none":return";sameSite=None";case"Lax":case"lax":return";sameSite=Lax";case"Strict":case"strict":return";sameSite=Strict";default:throw new TypeError("Invalid sameSite")}},c._generateCookieString=function(t,i,n){return i=(t=(t=t.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(i+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),i+=(n=n||{}).path?";path="+n.path:"",i+=n.domain?";domain="+n.domain:"",i+=n.expires?";expires="+n.expires.toUTCString():"",(i+=n.secure?";secure":"")+c._generateSameSiteString(n)},c._getCacheFromString=function(t){for(var i={},n=t?t.split("; "):[],e=0;e<n.length;e++){var s=c._getKeyValuePairFromCookieString(n[e]);i[c._cacheKeyPrefix+s.key]===a&&(i[c._cacheKeyPrefix+s.key]=s.value)}return i},c._getKeyValuePairFromCookieString=function(t){var i,n=(n=t.indexOf("="))<0?t.length:n,e=t.substr(0,n);try{i=decodeURIComponent(e)}catch(t){}return{key:i,value:t.substr(n+1)}},c._renewCache=function(){c.Bp=c._getCacheFromString(c.Rp.cookie),c._cachedDocumentCookie=c.Rp.cookie},c}t.Cookies=t&&"object"==typeof t.document?i(t):i}(r),function(){"use strict";var t=r,l="invalid",f="undefined"!=typeof ArrayBuffer,o="0123456789abcdef".split(""),n=[-2147483648,8388608,32768,128],h=[24,16,8,0],y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=[];function d(t){t?(i[0]=i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0,this.blocks=i):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}function e(t,i){var n=typeof t;if("string"==n){for(var e,s=[],c=t.length,a=0,r=0;r<c;++r)(e=t.charCodeAt(r))<128?s[a++]=e:(e<2048?s[a++]=192|e>>6:(e<55296||57344<=e?s[a++]=224|e>>12:(e=65536+((1023&e)<<10|1023&t.charCodeAt(++r)),s[a++]=240|e>>18,s[a++]=128|e>>12&63),s[a++]=128|e>>6&63),s[a++]=128|63&e);t=s}else{if("object"!=n)throw new Error(l);if(null===t)throw new Error(l);if(f&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||f&&ArrayBuffer.isView(t)))throw new Error(l)}64<t.length&&(t=new d(!0).update(t).digest());for(var o=[],h=[],r=0;r<64;++r){var u=t[r]||0;o[r]=92^u,h[r]=54^u}d.call(this,i),this.update(h),this.oKeyPad=o,this.inner=!0,this.memory=i}Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),f&&!ArrayBuffer.isView&&(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer}),d.prototype.update=function(t){if(!this.finalized){var i,n=typeof t;if("string"!=n){if("object"!=n)throw new Error(l);if(null===t)throw new Error(l);if(f&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||f&&ArrayBuffer.isView(t)))throw new Error(l);i=!0}for(var e,s,c=0,a=t.length,r=this.blocks;c<a;){if(this.hashed&&(this.hashed=!1,r[0]=this.block,r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),i)for(s=this.start;c<a&&s<64;++c)r[s>>2]|=t[c]<<h[3&s++];else for(s=this.start;c<a&&s<64;++c)(e=t.charCodeAt(c))<128?r[s>>2]|=e<<h[3&s++]:(e<2048?r[s>>2]|=(192|e>>6)<<h[3&s++]:(e<55296||57344<=e?r[s>>2]|=(224|e>>12)<<h[3&s++]:(e=65536+((1023&e)<<10|1023&t.charCodeAt(++c)),r[s>>2]|=(240|e>>18)<<h[3&s++],r[s>>2]|=(128|e>>12&63)<<h[3&s++]),r[s>>2]|=(128|e>>6&63)<<h[3&s++]),r[s>>2]|=(128|63&e)<<h[3&s++]);this.lastByteIndex=s,this.bytes+=s-this.start,64<=s?(this.block=r[16],this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},d.prototype.finalize=function(){var t,i;this.finalized||(this.finalized=!0,t=this.blocks,i=this.lastByteIndex,t[16]=this.block,t[i>>2]|=n[3&i],this.block=t[16],56<=i&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash())},d.prototype.hash=function(){for(var t,i,n,e,s,c,a=this.h0,r=this.h1,o=this.h2,h=this.h3,u=this.h4,l=this.h5,f=this.h6,d=this.h7,p=this.blocks,v=16;v<64;++v)t=((i=p[v-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,i=p[v-2],p[v]=p[v-16]+t+p[v-7]+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)<<0;for(c=r&o,v=0;v<64;v+=4)this.first?(d=(i=p[0]-210244248)-1521486534<<0,h=i+143694565<<0,this.first=!(n=704751109)):(d=h+(i=d+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&l^~u&f)+y[v]+p[v])<<0,h=i+((t=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+((n=a&r)^a&o^c))<<0),f=o+(i=f+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&u^~d&l)+y[v+1]+p[v+1])<<0,o=i+((t=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10))+((e=h&a)^h&r^n))<<0,l=r+(i=l+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&d^~f&u)+y[v+2]+p[v+2])<<0,r=i+((t=(o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+((s=o&h)^o&a^e))<<0,u=a+(i=u+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&f^~l&d)+y[v+3]+p[v+3])<<0,a=i+((t=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+((c=r&o)^r&h^s))<<0;this.h0=this.h0+a<<0,this.h1=this.h1+r<<0,this.h2=this.h2+o<<0,this.h3=this.h3+h<<0,this.h4=this.h4+u<<0,this.h5=this.h5+l<<0,this.h6=this.h6+f<<0,this.h7=this.h7+d<<0},d.prototype.toString=d.prototype.hex=function(){this.finalize();var t=this.h0,i=this.h1,n=this.h2,e=this.h3,s=this.h4,c=this.h5,a=this.h6,r=this.h7;return o[t>>28&15]+o[t>>24&15]+o[t>>20&15]+o[t>>16&15]+o[t>>12&15]+o[t>>8&15]+o[t>>4&15]+o[15&t]+o[i>>28&15]+o[i>>24&15]+o[i>>20&15]+o[i>>16&15]+o[i>>12&15]+o[i>>8&15]+o[i>>4&15]+o[15&i]+o[n>>28&15]+o[n>>24&15]+o[n>>20&15]+o[n>>16&15]+o[n>>12&15]+o[n>>8&15]+o[n>>4&15]+o[15&n]+o[e>>28&15]+o[e>>24&15]+o[e>>20&15]+o[e>>16&15]+o[e>>12&15]+o[e>>8&15]+o[e>>4&15]+o[15&e]+o[s>>28&15]+o[s>>24&15]+o[s>>20&15]+o[s>>16&15]+o[s>>12&15]+o[s>>8&15]+o[s>>4&15]+o[15&s]+o[c>>28&15]+o[c>>24&15]+o[c>>20&15]+o[c>>16&15]+o[c>>12&15]+o[c>>8&15]+o[c>>4&15]+o[15&c]+o[a>>28&15]+o[a>>24&15]+o[a>>20&15]+o[a>>16&15]+o[a>>12&15]+o[a>>8&15]+o[a>>4&15]+o[15&a]+o[r>>28&15]+o[r>>24&15]+o[r>>20&15]+o[r>>16&15]+o[r>>12&15]+o[r>>8&15]+o[r>>4&15]+o[15&r]},d.prototype.digest=function(){this.finalize();var t=this.h0,i=this.h1,n=this.h2,e=this.h3,s=this.h4,c=this.h5,a=this.h6,r=this.h7;return[t>>24&255,t>>16&255,t>>8&255,255&t,i>>24&255,i>>16&255,i>>8&255,255&i,n>>24&255,n>>16&255,n>>8&255,255&n,e>>24&255,e>>16&255,e>>8&255,255&e,s>>24&255,s>>16&255,s>>8&255,255&s,c>>24&255,c>>16&255,c>>8&255,255&c,a>>24&255,a>>16&255,a>>8&255,255&a,r>>24&255,r>>16&255,r>>8&255,255&r]},(e.prototype=new d).finalize=function(){var t;d.prototype.finalize.call(this),this.inner&&(this.inner=!1,t=this.digest(),d.call(this,this.memory),this.update(this.oKeyPad),this.update(t),d.prototype.finalize.call(this))};var s=(c.create=function(){return new d},c.update=function(t){return c.create().update(t)},c);function c(t){return new d(!0).update(t).hex()}function a(t,i){return new e(t,!0).update(i).hex()}(s.sha256=s).sha256.hmac=(a.create=function(t){return new e(t)},a.update=function(t,i){return a.create(t).update(i)},a),t.sha256=s.sha256}(),this.Op(),this.bl(t),this.Up(t,r),this.Config=new i(this),this.Schedule=new e(this),this.Listener=new c(this),this.Socket=new o(this),this.Stream=new u(this),this.Storage=new d(this),this.Browsing=new E(this),this.Call=new A(this),this.Message=new v(this),this.Session=new m(this),this.Website=new g(this),this.Bucket=new b(this),this.Media=new x(this),this.Helpdesk=new q(this),this.Trigger=new I(this),this.Issue=new O(this),this.zl(),!0===t.connect_socket&&this.socket.connect()},u.prototype.Op=function(){this.c()},u.prototype.c=function(){delete this.environment,delete this.disable_autoload,delete this.url_go,delete this.website_domain,delete this.website_id,delete this.token_id,delete this.cookie_expire,delete this.cookie_domain,delete this.platform_name,delete this.platform_signature_key,delete this.runtime_configuration,delete this.device},u.prototype.bl=function(t){t&&t.environment&&(this.environment=t.environment||"development"),t&&t.disable_autoload&&(this.disable_autoload=t.disable_autoload),t&&t.url_go&&(this.url_go=t.url_go),t&&t.website_domain&&(this.website_domain=t.website_domain),t&&t.website_id&&(this.website_id=t.website_id),t&&t.token_id&&(this.token_id=t.token_id),t&&t.cookie_expire&&(this.cookie_expire=t.cookie_expire),t&&t.cookie_domain&&(this.cookie_domain=t.cookie_domain),t&&t.platform_name&&(this.platform_name=t.platform_name),t&&t.platform_signature_key&&(this.platform_signature_key=t.platform_signature_key),t&&t.runtime_configuration&&(this.runtime_configuration=t.runtime_configuration),this.device={},t&&t.useragent&&(this.device.useragent=t.useragent),t&&t.timezone&&(this.device.timezone=t.timezone),t&&t.capabilities&&(this.device.capabilities=t.capabilities),t&&t.locales&&(this.device.locales=t.locales)},u.prototype.Up=function(t,i){var n=["websocket"];this.event=i.PubSub,this.socket=i.io(t.url_relay_client,{path:t.website_id?"/"+t.website_id+"/":"/",transports:n,autoConnect:!1,timeout:25e3,reconnectionDelay:15e3,reconnectionDelayMax:6e4,reconnectionAttempts:5,randomizationFactor:.5}),this.stream=i.io(t.url_relay_stream,{path:"/",transports:n,reconnection:!1,autoConnect:!1}),this.cookie=i.Cookies(window),this.sha256=i.sha256},u.prototype.zl=function(){var t=this;this.Listener.add_event("index","window","unload",function(){!0===t.socket.connected&&t.socket.disconnect(),!0===t.stream.connected&&t.stream.disconnect()}),this.Listener.add_event("index","window","popstate",function(){t.$p()}),"object"===r(window.history)&&(this.Listener.apply_patch("index","window.history","pushState",window.history,function(){t.$p()}),this.Listener.apply_patch("index","window.history","replaceState",window.history,function(){t.$p()}))},u.prototype.$p=function(){this.Session.send_device(),this.event.publish("window:history",{page_url:document.location.href,page_domain:document.location.hostname})},o.CrispLibraryClient=new u;var h={client:function(t){var d=[],t=t||{};return function(t,i,n,e,s,c,a,r,o,h,u,l,f){d.push('<div class="crisp-client"><div class="cc-l3zb"></div><div id="crisp-chatbox"'+g.Library.jade.runtime.attr("lang",""+r,!0,!1)+g.Library.jade.runtime.attr("dir",""+n,!0,!1)+' translate="no"'+g.Library.jade.runtime.attr("data-blocked",""+i,!0,!1)+g.Library.jade.runtime.attr("data-lock-maximized",""+u,!0,!1)+g.Library.jade.runtime.attr("data-last-operator-face",""+h,!0,!1)+g.Library.jade.runtime.attr("data-availability-tooltip",""+t,!0,!1)+g.Library.jade.runtime.attr("data-hide-vacation",""+a,!0,!1)+g.Library.jade.runtime.attr("data-hide-on-away",""+s,!0,!1)+g.Library.jade.runtime.attr("data-hide-on-mobile",""+c,!0,!1)+g.Library.jade.runtime.attr("data-position-reverse",""+l,!0,!1)+g.Library.jade.runtime.attr("data-full-view",""+e,!0,!1)+g.Library.jade.runtime.attr("data-small-view",""+f,!0,!1)+g.Library.jade.runtime.attr("data-large-view",""+o,!0,!1)+' data-availability="none" data-is-activity-ongoing="false" data-was-availability-online="false" data-has-local-messages="false" class="cc-kv6t"></div></div>')}.call(this,"availability_tooltip"in t?t.availability_tooltip:"undefined"!=typeof availability_tooltip?availability_tooltip:void 0,"blocked"in t?t.blocked:"undefined"!=typeof blocked?blocked:void 0,"direction"in t?t.direction:"undefined"!=typeof direction?direction:void 0,"full_view"in t?t.full_view:"undefined"!=typeof full_view?full_view:void 0,"hide_on_away"in t?t.hide_on_away:"undefined"!=typeof hide_on_away?hide_on_away:void 0,"hide_on_mobile"in t?t.hide_on_mobile:"undefined"!=typeof hide_on_mobile?hide_on_mobile:void 0,"hide_vacation"in t?t.hide_vacation:"undefined"!=typeof hide_vacation?hide_vacation:void 0,"lang"in t?t.lang:"undefined"!=typeof lang?lang:void 0,"large_view"in t?t.large_view:"undefined"!=typeof large_view?large_view:void 0,"last_operator_face"in t?t.last_operator_face:"undefined"!=typeof last_operator_face?last_operator_face:void 0,"lock_maximized"in t?t.lock_maximized:"undefined"!=typeof lock_maximized?lock_maximized:void 0,"position_reverse"in t?t.position_reverse:"undefined"!=typeof position_reverse?position_reverse:void 0,"small_view"in t?t.small_view:"undefined"!=typeof small_view?small_view:void 0),d.join("")},viewport:function(t){var i=[],t=t||{};return function(t){i.push('<meta name="viewport"'+g.Library.jade.runtime.attr("content",""+t,!0,!1)+"/>")}.call(this,"content"in t?t.content:"undefined"!=typeof content?content:void 0),i.join("")},clear:function(t){var i=[];return i.push('<span class="cc-iuse"></span>'),i.join("")},style_color:function(t){var i,n=[],t=t||{};return function(t){n.push('<div class="cc-lcor"><style type="text/css">.crisp-client .cc-kv6t .cc-6zjc,\n.crisp-client .cc-kv6t .cc-1mk2:hover {\n  color: '+g.Library.jade.runtime.escape(null==(i=t.reverse.hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-jq4y,\n.crisp-client .cc-kv6t .cc-5lan:hover {\n  color: "+g.Library.jade.runtime.escape(null==(i=t[500].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-k5w4 {\n  background-color: "+g.Library.jade.runtime.escape(null==(i=t.reverse.hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-5ekd {\n  background-color: "+g.Library.jade.runtime.escape(null==(i=t[900].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-16jc {\n  background-color: "+g.Library.jade.runtime.escape(null==(i=t[600].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-1ada,\n.crisp-client .cc-kv6t .cc-ew5j:before,\n.crisp-client .cc-kv6t .cc-ew5j:after {\n  background-color: "+g.Library.jade.runtime.escape(null==(i=t[500].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-y5jx {\n  background-color: "+g.Library.jade.runtime.escape(null==(i=t[20].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-y6ot,\n.crisp-client .cc-kv6t .cc-183m:hover {\n  background-color: "+g.Library.jade.runtime.escape(null==(i=t[10].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-1ybb {\n  background-image: linear-gradient(125deg, "+g.Library.jade.runtime.escape(null==(i=t[500].hex)?"":i)+" -10%, "+g.Library.jade.runtime.escape(null==(i=t[900].hex)?"":i)+" 100%) !important;\n}\n\n.crisp-client .cc-kv6t .cc-ofgq,\n.crisp-client .cc-kv6t .cc-fg2d:hover {\n  border-color: "+g.Library.jade.runtime.escape(null==(i=t.reverse.hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-2ydi {\n  border-color: "+g.Library.jade.runtime.escape(null==(i=t[900].rgba(.175))?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-1aev,\n.crisp-client .cc-kv6t .cc-2hzo:hover,\n.crisp-client .cc-kv6t .cc-18sf:before,\n.crisp-client .cc-kv6t .cc-18sf:after {\n  border-color: "+g.Library.jade.runtime.escape(null==(i=t[500].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-1nph {\n  border-color: "+g.Library.jade.runtime.escape(null==(i=t[500].rgba(.15))?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-1o96 {\n  border-top-color: "+g.Library.jade.runtime.escape(null==(i=t[500].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-ve3u,\n.crisp-client .cc-kv6t .cc-1nmg:hover {\n  border-color: "+g.Library.jade.runtime.escape(null==(i=t[20].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-clw4::placeholder {\n  color: "+g.Library.jade.runtime.escape(null==(i=t[200].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-2n8m::placeholder {\n  color: "+g.Library.jade.runtime.escape(null==(i=t[200].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-3x4f,\n.crisp-client .cc-kv6t .cc-1afs:hover,\n.crisp-client .cc-kv6t .cc-3x4f:hover,\n.crisp-client .cc-kv6t .cc-1afs:active,\n.crisp-client .cc-kv6t .cc-3x4f:active,\n.crisp-client .cc-kv6t .cc-1c1d:hover .cc-1f87,\n.crisp-client .cc-kv6t .cc-1c1d .cc-1f87:active {\n  background: "+g.Library.jade.runtime.escape(null==(i=t[900].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-4xbu,\n.crisp-client .cc-kv6t .cc-caj5:hover {\n  background: "+g.Library.jade.runtime.escape(null==(i=t[700].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-4xbu:hover,\n.crisp-client .cc-kv6t .cc-caj5:active {\n  background: "+g.Library.jade.runtime.escape(null==(i=t[800].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-4xbu:active {\n  background: "+g.Library.jade.runtime.escape(null==(i=t[900].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-g73w:hover .cc-199t {\n  background: "+g.Library.jade.runtime.escape(null==(i=t[700].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-g73w .cc-199t:active {\n  background: "+g.Library.jade.runtime.escape(null==(i=t[800].hex)?"":i)+' !important;\n}\n\n.crisp-client .cc-kv6t .cc-vuur,\n.crisp-client .cc-kv6t .cc-7rgf[data-active="true"] {\n  background: '+g.Library.jade.runtime.escape(null==(i=t[500].hex)?"":i)+' !important;\n}\n\n.crisp-client .cc-kv6t .cc-vuur:hover,\n.crisp-client .cc-kv6t .cc-7rgf[data-active="true"]:active {\n  background: '+g.Library.jade.runtime.escape(null==(i=t[600].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-vuur:active {\n  background: "+g.Library.jade.runtime.escape(null==(i=t[700].hex)?"":i)+" !important;\n}\n\n.crisp-client .cc-kv6t .cc-1gmp::selection,\n.crisp-client .cc-kv6t .cc-1gmp *::selection {\n  color: #191919 !important;\n  background-color: "+g.Library.jade.runtime.escape(null==(i=t[100].hex)?"":i)+" !important;\n}</style></div>")}.call(this,"colors"in t?t.colors:"undefined"!=typeof colors?colors:void 0),n.join("")},style_other:function(t){var n,e=[],t=t||{};return function(t,i){e.push('<div class="cc-1kny"><style type="text/css">.crisp-client .cc-kv6t {\n  z-index: '+g.Library.jade.runtime.escape(null==(n=t)?"":n)+";\n}\n</style>"),!1===i&&e.push('<style type="text/css">.crisp-client .cc-kv6t .cc-1xry .cc-ge4v .cc-bdff .cc-x32x .cc-1j74 .cc-ujtk {\n  display: none !important;\n}</style>'),e.push("</div>")}.call(this,"container_index"in t?t.container_index:"undefined"!=typeof container_index?container_index:void 0,"show_operator_count"in t?t.show_operator_count:"undefined"!=typeof show_operator_count?show_operator_count:void 0),e.join("")},style_position:function(t){var i,n=[],t=t||{};return function(t){n.push('<div class="cc-1wmh">'),t.default_button_horizontal&&n.push('<style type="text/css">.crisp-client .cc-kv6t[data-full-view="false"][data-position-reverse="false"] .cc-1xry .cc-unoo,\n.crisp-client .cc-kv6t[data-full-view="false"][data-position-reverse="false"] .cc-1xry .cc-ge4v {\n  margin-right: '+g.Library.jade.runtime.escape(null==(i=t.default_button_horizontal)?"":i)+'px !important;\n}\n\n.crisp-client .cc-kv6t[data-full-view="false"][data-position-reverse="false"] .cc-1xry .cc-unoo .cc-1c9v .cc-1bue {\n  margin-right: '+g.Library.jade.runtime.escape(null==(i=t.default_button_horizontal)?"":i)+'px !important;\n}\n\n.crisp-client .cc-kv6t[data-full-view="false"][data-position-reverse="true"] .cc-1xry .cc-unoo,\n.crisp-client .cc-kv6t[data-full-view="false"][data-position-reverse="true"] .cc-1xry .cc-ge4v {\n  margin-left: '+g.Library.jade.runtime.escape(null==(i=t.default_button_horizontal)?"":i)+'px !important;\n}\n\n.crisp-client .cc-kv6t[data-full-view="false"][data-position-reverse="true"] .cc-1xry .cc-unoo .cc-1c9v .cc-1bue {\n  margin-left: '+g.Library.jade.runtime.escape(null==(i=t.default_button_horizontal)?"":i)+"px !important;\n}\n</style>"),t.default_button_vertical&&n.push('<style type="text/css">.crisp-client .cc-kv6t[data-full-view="false"] .cc-1xry .cc-unoo,\n.crisp-client .cc-kv6t[data-full-view="false"] .cc-1xry .cc-ge4v {\n  margin-bottom: '+g.Library.jade.runtime.escape(null==(i=t.default_button_vertical)?"":i)+'px !important;\n}\n\n.crisp-client .cc-kv6t[data-full-view="false"] .cc-1xry .cc-unoo .cc-1c9v .cc-1bue {\n  margin-bottom: '+g.Library.jade.runtime.escape(null==(i=t.default_button_vertical)?"":i)+"px !important;\n}\n</style>"),t.mobile_button_horizontal&&n.push('<style type="text/css">.crisp-client .cc-kv6t[data-full-view="true"][data-position-reverse="false"] .cc-1xry .cc-unoo {\n  margin-right: '+g.Library.jade.runtime.escape(null==(i=t.mobile_button_horizontal)?"":i)+'px !important;\n}\n\n.crisp-client .cc-kv6t[data-full-view="true"][data-position-reverse="false"] .cc-1xry .cc-unoo .cc-1c9v .cc-1bue {\n  margin-right: '+g.Library.jade.runtime.escape(null==(i=t.mobile_button_horizontal)?"":i)+'px !important;\n}\n\n.crisp-client .cc-kv6t[data-full-view="true"][data-position-reverse="true"] .cc-1xry .cc-unoo {\n  margin-left: '+g.Library.jade.runtime.escape(null==(i=t.mobile_button_horizontal)?"":i)+'px !important;\n}\n\n.crisp-client .cc-kv6t[data-full-view="true"][data-position-reverse="true"] .cc-1xry .cc-unoo .cc-1c9v .cc-1bue {\n  margin-left: '+g.Library.jade.runtime.escape(null==(i=t.mobile_button_horizontal)?"":i)+"px !important;\n}\n</style>"),t.mobile_button_vertical&&n.push('<style type="text/css">.crisp-client .cc-kv6t[data-full-view="true"] .cc-1xry .cc-unoo {\n  margin-bottom: '+g.Library.jade.runtime.escape(null==(i=t.mobile_button_vertical)?"":i)+'px !important;\n}\n\n.crisp-client .cc-kv6t[data-full-view="true"] .cc-1xry .cc-unoo .cc-1c9v .cc-1bue {\n  margin-bottom: '+g.Library.jade.runtime.escape(null==(i=t.mobile_button_vertical)?"":i)+"px !important;\n}</style>"),n.push("</div>")}.call(this,"position"in t?t.position:"undefined"!=typeof position?position:void 0),n.join("")},new_line:function(t){var i=[];return i.push('<br class="cc-1yy7"/>'),i.join("")},link_phone:function(t){var i,n=[],t=t||{};return function(t){n.push("<a"+g.Library.jade.runtime.attr("href","tel:"+t,!1,!1)+' class="cc-w8bm cc-kbw4">'+(null==(i=t)?"":i)+"</a>")}.call(this,"phone"in t?t.phone:"undefined"!=typeof phone?phone:void 0),n.join("")},link_email:function(t){var i,n=[],t=t||{};return function(t){n.push("<a"+g.Library.jade.runtime.attr("href","mailto:"+t,!1,!1)+' class="cc-w8bm cc-1tbt">'+(null==(i=t)?"":i)+"</a>")}.call(this,"email"in t?t.email:"undefined"!=typeof email?email:void 0),n.join("")},link_uri:function(t){var n,e=[],t=t||{};return function(t,i){e.push("<a"+g.Library.jade.runtime.attr("href",""+i,!1,!1)+' rel="noopener noreferrer" target="_blank" class="cc-w8bm cc-tn3x">'+(null==(n=t)?"":n)+"</a>")}.call(this,"uri_name"in t?t.uri_name:"undefined"!=typeof uri_name?uri_name:void 0,"uri_value"in t?t.uri_value:"undefined"!=typeof uri_value?uri_value:void 0),e.join("")},link_domain:function(t){var n,e=[],t=t||{};return function(t,i){e.push("<a"+g.Library.jade.runtime.attr("href","http://"+i+"/",!1,!1)+' rel="noopener noreferrer" target="_blank" class="cc-w8bm cc-1vy9">'+(null==(n=t)?"":n)+"</a>")}.call(this,"domain_name"in t?t.domain_name:"undefined"!=typeof domain_name?domain_name:void 0,"domain_value"in t?t.domain_value:"undefined"!=typeof domain_value?domain_value:void 0),e.join("")},markdown_blockquote:function(t){var i,n=[],t=t||{};return function(t){n.push('<span class="cc-rxbq cc-i0y3">'+(null==(i=t)?"":i)+"</span>")}.call(this,"value"in t?t.value:"undefined"!=typeof value?value:void 0),n.join("")},markdown_color:function(t){var n,e=[],t=t||{};return function(t,i){e.push("<span"+g.Library.jade.runtime.attr("style","color: "+t+" !important;",!0,!1)+' class="cc-rxbq cc-ffl9">'+(null==(n=i)?"":n)+"</span>")}.call(this,"type"in t?t.type:"undefined"!=typeof type?type:void 0,"value"in t?t.value:"undefined"!=typeof value?value:void 0),e.join("")},markdown_bold:function(t){var i,n=[],t=t||{};return function(t){n.push('<span class="cc-rxbq cc-1a3u cc-151q">'+(null==(i=t)?"":i)+"</span>")}.call(this,"value"in t?t.value:"undefined"!=typeof value?value:void 0),n.join("")},markdown_code_inline:function(t){var i,n=[],t=t||{};return function(t){n.push('<span class="cc-rxbq cc-1pni cc-15fv cc-y5jx">'+(null==(i=t)?"":i)+"</span>")}.call(this,"value"in t?t.value:"undefined"!=typeof value?value:void 0),n.join("")},markdown_code_block:function(t){var i,n=[],t=t||{};return function(t){n.push('<span class="cc-rxbq cc-1pni cc-1yj2 cc-y5jx">'+(null==(i=t)?"":i)+"</span>")}.call(this,"value"in t?t.value:"undefined"!=typeof value?value:void 0),n.join("")},markdown_delete:function(t){var i,n=[],t=t||{};return function(t){n.push('<span class="cc-rxbq cc-xs0r">'+(null==(i=t)?"":i)+"</span>")}.call(this,"value"in t?t.value:"undefined"!=typeof value?value:void 0),n.join("")},markdown_highlight:function(t){var i,n=[],t=t||{};return function(t){n.push('<span class="cc-rxbq cc-12z0">'+(null==(i=t)?"":i)+"</span>")}.call(this,"value"in t?t.value:"undefined"!=typeof value?value:void 0),n.join("")},markdown_emphasis:function(t){var i,n=[],t=t||{};return function(t){n.push('<span class="cc-rxbq cc-9ky1 cc-151q">'+(null==(i=t)?"":i)+"</span>")}.call(this,"value"in t?t.value:"undefined"!=typeof value?value:void 0),n.join("")},markdown_image:function(t){var s=[],t=t||{};return function(t,i,n,e){s.push(""),e=t(e),s.push('<span class="cc-rxbq cc-1nuy"><img'+g.Library.jade.runtime.attr("src",n+"/process/original/?url="+e,!1,!1)+g.Library.jade.runtime.attr("alt",""+i,!1,!1)+"/></span>")}.call(this,"encodeURIComponent"in t?t.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"type"in t?t.type:"undefined"!=typeof type?type:void 0,"url_crisp_image"in t?t.url_crisp_image:"undefined"!=typeof url_crisp_image?url_crisp_image:void 0,"value"in t?t.value:"undefined"!=typeof value?value:void 0),s.join("")},markdown_interpolate:function(t){var n,e=[],t=t||{};return function(t,i){e.push('<span class="cc-rxbq cc-lpfn">{{ '+g.Library.jade.runtime.escape(null==(n=t)?"":n)+g.Library.jade.runtime.escape(null==(n=i?' | "'+i+'"':"")?"":n)+" }}</span>")}.call(this,"type"in t?t.type:"undefined"!=typeof type?type:void 0,"value"in t?t.value:"undefined"!=typeof value?value:void 0),e.join("")},markdown_italic:function(t){var i,n=[],t=t||{};return function(t){n.push('<span class="cc-rxbq cc-1afx">'+(null==(i=t)?"":i)+"</span>")}.call(this,"value"in t?t.value:"undefined"!=typeof value?value:void 0),n.join("")},markdown_line:function(t){var i=[];return i.push('<span class="cc-rxbq cc-11yu"></span>'),i.join("")},markdown_link_text:function(t){var e,s=[],t=t||{};return function(t,i,n){s.push("<a"+g.Library.jade.runtime.attr("href",""+t.filter_link_safe(n),!1,!1)+' rel="noopener noreferrer" target="_blank" class="cc-rxbq cc-hsr1 cc-1c7q">'+(null==(e=i)?"":e)+"</a>")}.call(this,"methods"in t?t.methods:"undefined"!=typeof methods?methods:void 0,"type"in t?t.type:"undefined"!=typeof type?type:void 0,"value"in t?t.value:"undefined"!=typeof value?value:void 0),s.join("")},markdown_link_image:function(t){var c=[],t=t||{};return function(t,i,n,e,s){c.push(""),n=t(n),c.push("<a"+g.Library.jade.runtime.attr("href",""+i.filter_link_safe(s),!1,!1)+' rel="noopener noreferrer" target="_blank" class="cc-rxbq cc-hsr1 cc-1kr8"><span class="cc-rxbq cc-1nuy"><img'+g.Library.jade.runtime.attr("src",e+"/process/original/?url="+n,!1,!1)+' alt=""/></span></a>')}.call(this,"encodeURIComponent"in t?t.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"methods"in t?t.methods:"undefined"!=typeof methods?methods:void 0,"type"in t?t.type:"undefined"!=typeof type?type:void 0,"url_crisp_image"in t?t.url_crisp_image:"undefined"!=typeof url_crisp_image?url_crisp_image:void 0,"value"in t?t.value:"undefined"!=typeof value?value:void 0),c.join("")},markdown_list:function(t){var n,e=[],t=t||{};return function(t,i){e.push("<span"+g.Library.jade.runtime.attr("data-type",""+t,!1,!1)+' class="cc-rxbq cc-u7eq">'+(null==(n=i)?"":n)+"</span>")}.call(this,"type"in t?t.type:"undefined"!=typeof type?type:void 0,"value"in t?t.value:"undefined"!=typeof value?value:void 0),e.join("")},markdown_title:function(t){var n,e=[],t=t||{};return function(t,i){e.push("<span"+g.Library.jade.runtime.attr("data-type",""+t,!1,!1)+' class="cc-rxbq cc-1gez cc-151q">'+(null==(n=i)?"":n)+"</span>")}.call(this,"type"in t?t.type:"undefined"!=typeof type?type:void 0,"value"in t?t.value:"undefined"!=typeof value?value:void 0),e.join("")},markdown_underline:function(t){var i,n=[],t=t||{};return function(t){n.push('<span class="cc-rxbq cc-dp0e">'+(null==(i=t)?"":i)+"</span>")}.call(this,"value"in t?t.value:"undefined"!=typeof value?value:void 0),n.join("")},markdown_youtube:function(t){var c=[],t=t||{};return function(t,i,n,e){c.push("");var s="https://www.youtube.com/embed/"+t(e)+"?autoplay=1&rel=0",e=t("https://img.youtube.com/vi/"+t(e)+"/hqdefault.jpg");c.push("<a"+g.Library.jade.runtime.attr("href",s,!0,!1)+' rel="noopener noreferrer" target="_blank" class="cc-rxbq cc-1fry cc-cep7"><span class="cc-d4zh cc-xxo7 cc-94yb cc-1c2b"><img'+g.Library.jade.runtime.attr("src",n+"/process/resize/?url="+e+"&width=960&height=960",!0,!1)+g.Library.jade.runtime.attr("alt",""+i,!0,!1)+"/></span></a>")}.call(this,"encodeURIComponent"in t?t.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"type"in t?t.type:"undefined"!=typeof type?type:void 0,"url_crisp_image"in t?t.url_crisp_image:"undefined"!=typeof url_crisp_image?url_crisp_image:void 0,"value"in t?t.value:"undefined"!=typeof value?value:void 0),c.join("")},markdown_vimeo:function(t){var e,s=[],t=t||{};return function(t,i,n){s.push(""),n="https://vimeo.com/"+t(n)+"?autoplay=1",s.push("<a"+g.Library.jade.runtime.attr("href",n,!1,!1)+' rel="noopener noreferrer" target="_blank" class="cc-w8bm cc-tn3x">'+(null==(e=i||n)?"":e)+"</a>")}.call(this,"encodeURIComponent"in t?t.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"type"in t?t.type:"undefined"!=typeof type?type:void 0,"value"in t?t.value:"undefined"!=typeof value?value:void 0),s.join("")},markdown_dailymotion:function(t){var c=[],t=t||{};return function(t,i,n,e){c.push("");var s="https://www.dailymotion.com/embed/video/"+t(e),e=t("https://www.dailymotion.com/thumbnail/video/"+t(e));c.push("<a"+g.Library.jade.runtime.attr("href",s,!0,!1)+' rel="noopener noreferrer" target="_blank" class="cc-rxbq cc-1fry cc-1taz"><span class="cc-d4zh cc-168u cc-94yb cc-1c2b"><img'+g.Library.jade.runtime.attr("src",n+"/process/resize/?url="+e+"&width=320&height=240",!0,!1)+g.Library.jade.runtime.attr("alt",""+i,!0,!1)+"/></span></a>")}.call(this,"encodeURIComponent"in t?t.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"type"in t?t.type:"undefined"!=typeof type?type:void 0,"url_crisp_image"in t?t.url_crisp_image:"undefined"!=typeof url_crisp_image?url_crisp_image:void 0,"value"in t?t.value:"undefined"!=typeof value?value:void 0),c.join("")},markdown_frame:function(t){var e,s=[],t=t||{};return function(t,i,n){s.push("<a"+g.Library.jade.runtime.attr("href",""+t.filter_link_safe(n),!1,!1)+' rel="noopener noreferrer" target="_blank" class="cc-w8bm cc-tn3x">'+(null==(e=i||n)?"":e)+"</a>")}.call(this,"methods"in t?t.methods:"undefined"!=typeof methods?methods:void 0,"type"in t?t.type:"undefined"!=typeof type?type:void 0,"value"in t?t.value:"undefined"!=typeof value?value:void 0),s.join("")},smiley:function(t){var n=[],t=t||{};return function(t,i){n.push("<span"+g.Library.jade.runtime.attr("data-size",i,!0,!1)+g.Library.jade.runtime.attr("data-name",t,!0,!1)+' class="cc-tkf1"></span>')}.call(this,"name"in t?t.name:"undefined"!=typeof name?name:void 0,"size"in t?t.size:"undefined"!=typeof size?size:void 0),n.join("")},magnify:function(t){var s=[],t=t||{};return function(t,i,n,e){switch(s.push('<div tabindex="0"'+g.Library.jade.runtime.attr("data-type",""+e,!0,!1)+' data-state="loading" class="cc-1nn0"><span class="cc-a87x cc-1eqr"></span>'),e){case"image":s.push("<img"+g.Library.jade.runtime.attr("src",""+n,!0,!1)+' alt="" class="cc-z6hh"/>');break;case"video":s.push("<video"+g.Library.jade.runtime.attr("src",""+n,!0,!1)+' autoplay="autoplay" controls="controls" class="cc-z6hh"></video>');break;default:s.push('<iframe type="text/html"'+g.Library.jade.runtime.attr("src",""+n,!0,!1)+' frameborder="0" sandbox="allow-popups allow-same-origin allow-scripts" class="cc-z6hh"></iframe>')}s.push('<div class="cc-1sfm"><div class="cc-5gev">'),t.previous&&s.push('<a data-action="previous" role="button" class="cc-12xv"></a>'),"image"!==e&&"video"!==e||s.push('<a data-action="download"'+g.Library.jade.runtime.attr("href",""+n,!0,!1)+g.Library.jade.runtime.attr("download",""+(i||n),!0,!1)+' rel="noopener noreferrer" target="_blank" class="cc-12xv"></a>'),s.push('<a data-action="close" role="button" class="cc-12xv"></a>'),t.next&&s.push('<a data-action="next" role="button" class="cc-12xv"></a>'),s.push("</div></div></div>")}.call(this,"fingerprints"in t?t.fingerprints:"undefined"!=typeof fingerprints?fingerprints:void 0,"name"in t?t.name:"undefined"!=typeof name?name:void 0,"source"in t?t.source:"undefined"!=typeof source?source:void 0,"type"in t?t.type:"undefined"!=typeof type?type:void 0),s.join("")},article:function(t){var n,e=[],t=t||{};return function(t,i){e.push('<div tabindex="0" data-state="loading" class="cc-k0ox"><span class="cc-ikw0 cc-1eqr"></span><div class="cc-12ru"><div class="cc-4k0k"><div class="cc-1ov4"><a role="button" class="cc-1o7o cc-151q">'+g.Library.jade.runtime.escape(null==(n=t("article","controls_close"))?"":n)+"</a><a"+g.Library.jade.runtime.attr("href",i.url+"/",!0,!1)+' target="_blank" rel="noopener noreferrer" class="cc-16od cc-1ada cc-151q">'+g.Library.jade.runtime.escape(null==(n=t("article","controls_view"))?"":n)+'</a></div><div class="cc-1btj cc-y6ot"><iframe type="text/html"'+g.Library.jade.runtime.attr("src",i.url+"/reader/",!0,!1)+' frameborder="0" class="cc-q2us"></iframe></div></div></div></div>')}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"frame"in t?t.frame:"undefined"!=typeof frame?frame:void 0),e.join("")},spotlight:function(t){var e,s=[],t=t||{};return function(t,i){s.push('<div tabindex="0" data-state="loaded" data-has-results="false" class="cc-1qlo"><div class="cc-1pql"><div class="cc-16yo"><form action="#" method="post" class="cc-1ipv">');var n=t("spotlight","search_form_field");s.push('<span class="cc-1282 cc-1ada"><span class="cc-12t6 cc-1eqr"></span></span><input type="text" name="spotlight_query"'+g.Library.jade.runtime.attr("placeholder",""+n,!0,!1)+' autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" maxlength="100" class="cc-tdrg cc-clw4 cc-1lut cc-kgeu"/><span class="cc-4wnb cc-kgeu"></span><span class="cc-16kz cc-kgeu"></span></form><div class="cc-16io">'),i&&s.push('<ul class="cc-1fvn"><li data-type="close" class="cc-mn2r"><a role="button" class="cc-4obg cc-1o4r cc-151q">'+g.Library.jade.runtime.escape(null==(e=t("spotlight","action_close"))?"":e)+'</a></li><li data-type="open" class="cc-mn2r cc-jq4y"><a'+g.Library.jade.runtime.attr("href",""+i,!0,!1)+' target="_blank" rel="noopener noreferrer" class="cc-4obg cc-151q">'+g.Library.jade.runtime.escape(null==(e=t("spotlight","action_open"))?"":e)+"</a></li></ul>"),s.push("</div></div></div></div>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"url"in t?t.url:"undefined"!=typeof url?url:void 0),s.join("")},spotlight_results:function(t){var o,h=[],t=t||{};return function(s,c,a,r,t){h.push('<div class="cc-1u0c">'),0<r.length?(h.push('<ul class="cc-6716">'),function(){var t=r;if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++){var e=t[i];h.push("<li"+g.Library.jade.runtime.attr("data-locale",""+e.locale,!0,!1)+g.Library.jade.runtime.attr("data-slug",""+e.slug,!0,!1)+' class="cc-7rhc"><a'+g.Library.jade.runtime.attr("href",""+c+e.locale+"/article/"+e.slug+"/",!0,!1)+' target="_blank" rel="noopener noreferrer"'+g.Library.jade.runtime.attr("data-active",!0===a&&0===i?"true":"false",!0,!1)+' class="cc-1h5e cc-7rgf"><span class="cc-bdl5 cc-151q">'+g.Library.jade.runtime.escape(null==(o=e.title)?"":o)+'</span><span class="cc-1kt8 cc-kgeu">'+g.Library.jade.runtime.escape(null==(o=s("spotlight","result_view"))?"":o)+"</span></a></li>")}else for(i in n=0,t)n++,e=t[i],h.push("<li"+g.Library.jade.runtime.attr("data-locale",""+e.locale,!0,!1)+g.Library.jade.runtime.attr("data-slug",""+e.slug,!0,!1)+' class="cc-7rhc"><a'+g.Library.jade.runtime.attr("href",""+c+e.locale+"/article/"+e.slug+"/",!0,!1)+' target="_blank" rel="noopener noreferrer"'+g.Library.jade.runtime.attr("data-active",!0===a&&0===i?"true":"false",!0,!1)+' class="cc-1h5e cc-7rgf"><span class="cc-bdl5 cc-151q">'+g.Library.jade.runtime.escape(null==(o=e.title)?"":o)+'</span><span class="cc-1kt8 cc-kgeu">'+g.Library.jade.runtime.escape(null==(o=s("spotlight","result_view"))?"":o)+"</span></a></li>")}.call(this),h.push("</ul>")):h.push('<span class="cc-8qof cc-151q">'+g.Library.jade.runtime.escape(null==(o=s("spotlight","result_empty"))?"":o)+"</span>"),h.push("</div>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"base_url"in t?t.base_url:"undefined"!=typeof base_url?base_url:void 0,"has_active"in t?t.has_active:"undefined"!=typeof has_active?has_active:void 0,"results"in t?t.results:"undefined"!=typeof results?results:void 0,"undefined"in t?t.undefined:void 0),h.join("")},date_now:function(t){var i,n=[],t=t||{};return function(t){n.push('<span data-type="now" class="cc-1ho2">'+g.Library.jade.runtime.escape(null==(i=t("date","now"))?"":i)+"</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0),n.join("")},date_seconds:function(t){var i,n=[],t=t||{};return function(t){n.push('<span data-type="seconds" class="cc-1ho2">'+g.Library.jade.runtime.escape(null==(i=t("date","second"))?"":i)+"</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0),n.join("")},date_minutes:function(t){var n,e=[],t=t||{};return function(t,i){e.push('<span data-type="minutes" class="cc-1ho2">'),1===i?e.push(g.Library.jade.runtime.escape(null==(n=t("date","minute_singular"))?"":n)):e.push(g.Library.jade.runtime.escape(null==(n=t("date","minute_plural",[i]))?"":n)),e.push("</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"minutes"in t?t.minutes:"undefined"!=typeof minutes?minutes:void 0),e.join("")},date_hours:function(t){var n,e=[],t=t||{};return function(t,i){e.push('<span data-type="hours" class="cc-1ho2">'),1===i?e.push(g.Library.jade.runtime.escape(null==(n=t("date","hour_singular"))?"":n)):e.push(g.Library.jade.runtime.escape(null==(n=t("date","hour_plural",[i]))?"":n)),e.push("</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"hours"in t?t.hours:"undefined"!=typeof hours?hours:void 0),e.join("")},date_far_away:function(t){var i,n=[],t=t||{};return function(t){n.push('<span data-type="far_away" class="cc-1ho2">'+g.Library.jade.runtime.escape(null==(i=t)?"":i)+"</span>")}.call(this,"date_full"in t?t.date_full:"undefined"!=typeof date_full?date_full:void 0),n.join("")},duration_now:function(t){var i,n=[],t=t||{};return function(t){n.push('<span data-type="now" class="cc-blao">'+g.Library.jade.runtime.escape(null==(i=t("duration","now"))?"":i)+"</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0),n.join("")},duration_seconds:function(t){var i,n=[],t=t||{};return function(t){n.push('<span data-type="seconds" class="cc-blao">'+g.Library.jade.runtime.escape(null==(i=t("duration","second"))?"":i)+"</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0),n.join("")},duration_minutes:function(t){var n,e=[],t=t||{};return function(t,i){e.push('<span data-type="minutes" class="cc-blao">'),1===i?e.push(g.Library.jade.runtime.escape(null==(n=t("duration","minute_singular"))?"":n)):e.push(g.Library.jade.runtime.escape(null==(n=t("duration","minute_plural",[i]))?"":n)),e.push("</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"minutes"in t?t.minutes:"undefined"!=typeof minutes?minutes:void 0),e.join("")},duration_hours:function(t){var n,e=[],t=t||{};return function(t,i){e.push('<span data-type="hours" class="cc-blao">'),1===i?e.push(g.Library.jade.runtime.escape(null==(n=t("duration","hour_singular"))?"":n)):e.push(g.Library.jade.runtime.escape(null==(n=t("duration","hour_plural",[i]))?"":n)),e.push("</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"hours"in t?t.hours:"undefined"!=typeof hours?hours:void 0),e.join("")},duration_days:function(t){var i,n=[],t=t||{};return function(t){n.push('<span data-type="days" class="cc-blao">'+g.Library.jade.runtime.escape(null==(i=t("duration","days"))?"":i)+"</span>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0),n.join("")},chat:function(t){var y,m=[],_={},t=t||{};return function(t,c,a,i,n,e,s,r,o,h,u,l){m.push(""),m.push(""),_["text-space"]=y=function(){this&&this.block,this&&this.attributes,m.push("<span> </span>")},m.push('<div class="cc-1xry cc-1gmp"><div data-visible="true" data-chat-status="none" class="cc-ge4v"><div class="cc-bdff">');var f=e.chat.tile&&"default"!==e.chat.tile&&!0;m.push("<div"+g.Library.jade.runtime.attr("data-tile",e.chat.tile||null,!0,!1)+' data-with-website-name="true"'+g.Library.jade.runtime.cls(["cc-x32x","cc-1ada",!0===f?"cc-1c1d cc-1ybb":"cc-g73w"],[null,null,!0])+'><span class="cc-1j74">');var d=o.active_operators(l.id,e),p=o.count_other_operators(e);(function(){var t=d;if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++){var e=t[i],s=c(240,e.type,e.identifier,e.avatar);m.push('<span class="cc-furf cc-he6y cc-1xll"><span'+g.Library.jade.runtime.attr("style","background-image: url('"+s+"') !important;",!0,!1)+' class="cc-1do6 cc-wsm4"></span><span'+g.Library.jade.runtime.attr("data-has-name",e.name?"true":"false",!0,!1)+' class="cc-1wwd cc-1tzl cc-1ntm cc-1wsx"><span class="cc-1ybw cc-h1yx cc-kgeu">'+g.Library.jade.runtime.escape(null==(y=e.name)?"":y)+"</span></span></span>")}else for(i in n=0,t)n++,e=t[i],s=c(240,e.type,e.identifier,e.avatar),m.push('<span class="cc-furf cc-he6y cc-1xll"><span'+g.Library.jade.runtime.attr("style","background-image: url('"+s+"') !important;",!0,!1)+' class="cc-1do6 cc-wsm4"></span><span'+g.Library.jade.runtime.attr("data-has-name",e.name?"true":"false",!0,!1)+' class="cc-1wwd cc-1tzl cc-1ntm cc-1wsx"><span class="cc-1ybw cc-h1yx cc-kgeu">'+g.Library.jade.runtime.escape(null==(y=e.name)?"":y)+"</span></span></span>")}).call(this),0<p&&m.push("<span"+g.Library.jade.runtime.cls(["cc-ujtk","cc-151q",!0===f?"cc-5ekd":"cc-16jc"],[null,null,!0])+">"+g.Library.jade.runtime.escape(null==(y=p)?"":y)+"+</span>"),m.push('<span class="cc-iuse"></span></span><span class="cc-1k9z"><span class="cc-2dnw cc-6zjc cc-151q">'+g.Library.jade.runtime.escape(null==(y=a("theme_text",["default_chat",e.chat.theme_text+"_chat"]))?"":y)+'</span><span class="cc-1wea cc-6zjc cc-151q"><span data-type="operator_name" class="cc-155a cc-txwe cc-6zjc"></span><span data-type="website_from" class="cc-155a cc-6zjc">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_header_ongoing_from"))?"":y)+'</span><span data-type="website_name" class="cc-155a cc-6zjc">'+g.Library.jade.runtime.escape(null==(y=e.website.name)?"":y)+'</span><span class="cc-iuse"></span></span><span class="cc-h139"><span data-id="online" class="cc-1k4b cc-6zjc">'),p=!0===e.chat.activity_metrics&&i.metrics&&!0,m.push('<span data-type="default"'+g.Library.jade.runtime.attr("data-duration",!0===p?i.metrics.raw:null,!0,!1)+' class="cc-2r1p cc-6zjc cc-kgeu">'),!0===p?m.push(g.Library.jade.runtime.escape(null==(y=a("chat","chat_header_ongoing_status_metrics",[i.metrics.format]))?"":y)):m.push(g.Library.jade.runtime.escape(null==(y=a("chat","chat_header_ongoing_status_online"))?"":y)),m.push('</span><span data-type="ongoing" class="cc-2r1p cc-6zjc cc-kgeu">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_header_ongoing_status_online"))?"":y)+'</span></span><span data-id="away" class="cc-1k4b cc-6zjc">'),p=!0===e.chat.activity_metrics&&i.last&&!0,m.push('<span data-type="default"'+g.Library.jade.runtime.attr("data-date-iso",!0===p?i.last.raw:null,!0,!1)+g.Library.jade.runtime.attr("data-date-format",!0===p?a("chat","chat_header_ongoing_status_last"):null,!0,!1)+g.Library.jade.runtime.attr("data-date-watch",!0===p?"true":null,!0,!1)+' class="cc-2r1p cc-12fb cc-6zjc cc-kgeu">'),!0===p?m.push(g.Library.jade.runtime.escape(null==(y=a("chat","chat_header_ongoing_status_last",[i.last.format]))?"":y)):m.push(g.Library.jade.runtime.escape(null==(y=a("chat","chat_header_ongoing_status_away"))?"":y)),m.push('</span><span data-type="ongoing" class="cc-2r1p cc-6zjc cc-kgeu">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_header_ongoing_status_away"))?"":y)+'</span></span><span class="cc-iuse"></span></span><span class="cc-cqnw">');var v=[["email",a("chat","chat_header_ongoing_channel_continue_email")],["phone",a("chat","chat_header_ongoing_channel_continue_phone")],["messenger","Messenger"],["telegram","Telegram"],["twitter","Twitter"]];!0===n.helpdesk.search&&m.push('<a data-channel="spotlight" role="button" class="cc-1qlt cc-3x4f cc-1xll"><span class="cc-1tzl cc-68z9 cc-sc6q"><span class="cc-h1yx cc-kgeu">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_welcome_helpdesk"))?"":y)+"</span></span></a>"),function(){var t=v;if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++){var e=t[i],s=o.generate_channel_link(e[0]),c=-1!==["email","phone"].indexOf(e[0])?"_parent":"_blank";s&&c&&m.push("<a"+g.Library.jade.runtime.attr("data-channel",""+e[0],!0,!1)+g.Library.jade.runtime.attr("href",""+s,!0,!1)+g.Library.jade.runtime.attr("target",""+c,!0,!1)+' rel="noopener noreferrer"'+g.Library.jade.runtime.cls(["cc-1qlt","cc-1xll",!0===f?"cc-3x4f":"cc-4xbu"],[null,null,!0])+'><span class="cc-1tzl cc-68z9 cc-sc6q"><span class="cc-h1yx cc-kgeu">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_header_ongoing_channel_continue",[e[1]]))?"":y)+"</span></span></a>")}else for(i in n=0,t)n++,s=o.generate_channel_link((e=t[i])[0]),c=-1!==["email","phone"].indexOf(e[0])?"_parent":"_blank",s&&c&&m.push("<a"+g.Library.jade.runtime.attr("data-channel",""+e[0],!0,!1)+g.Library.jade.runtime.attr("href",""+s,!0,!1)+g.Library.jade.runtime.attr("target",""+c,!0,!1)+' rel="noopener noreferrer"'+g.Library.jade.runtime.cls(["cc-1qlt","cc-1xll",!0===f?"cc-3x4f":"cc-4xbu"],[null,null,!0])+'><span class="cc-1tzl cc-68z9 cc-sc6q"><span class="cc-h1yx cc-kgeu">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_header_ongoing_channel_continue",[e[1]]))?"":y)+"</span></span></a>")}.call(this),m.push('<span class="cc-iuse"></span></span></span><span'+g.Library.jade.runtime.cls(["cc-wdhl",!0===f?"cc-1f87":"cc-199t"],[null,!0])+'><span class="cc-1asz"></span></span></div><span class="cc-uryd"></span></div><div'+g.Library.jade.runtime.attr("data-has-health",h.url&&!0===e.chat.status_health_dead&&e.website.status&&"dead"===e.website.status.health&&18e4<=t.now()-e.website.status.since?"true":"false",!0,!1)+' data-has-offline="false" class="cc-qqzz"><div'+g.Library.jade.runtime.attr("data-refer-hide-space","urn:crisp.im:debranding:0"in e.plugins&&!0!==e.website.trial?"true":"false",!0,!1)+' class="cc-5b24">'),t=!0!==n.runtime.lock_maximized&&(!0===e.chat.hide_vacation||!0===n.blocked),m.push('<div class="cc-41gl cc-1vnk cc-2ydi"><div class="cc-15u8"><span class="cc-18rr cc-ic7l"></span><span class="cc-1mjm"><span class="cc-qn0f cc-151q">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_offline_main"))?"":y)+'</span><span class="cc-vks0 cc-151q">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_offline_inactive"))?"":y)+'</span><span class="cc-10sl cc-151q">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_offline_fail"))?"":y)+'</span><span class="cc-1ji5 cc-kgeu">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_offline_label_frozen"))?"":y)+'</span><span class="cc-1eac cc-kgeu">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_offline_label_resume"))?"":y)+"</span></span></div></div>"),h.url&&(m.push('<div class="cc-1c6m cc-1vnk cc-2ydi"><div class="cc-138l"><span class="cc-7s5d cc-151q">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_health_main"))?"":y)+'</span><span class="cc-s6qy cc-kgeu"><a'+g.Library.jade.runtime.attr("href",""+h.url,!0,!1)+' target="_blank" rel="noopener noreferrer" class="cc-1qlv cc-151q">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_health_label_link"))?"":y)+"</a>"),_["text-space"](),m.push(g.Library.jade.runtime.escape(null==(y=a("chat","chat_health_label_updates"))?"":y)+"</span></div></div>")),m.push('<div class="cc-1pvj cc-y6ot"><div class="cc-1v5j"><div class="cc-3lvj"></div><div class="cc-192e"></div></div></div>'),!0===e.chat.file_transfer&&m.push('<div class="cc-2uua"><div class="cc-1hl5"></div><div class="cc-1b7n cc-1aev"><div class="cc-16re"><div class="cc-1toe cc-1ada"></div><div class="cc-1ehq cc-151q">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_form_attach_tooltip"))?"":y)+"</div></div></div></div>"),m.push('<div data-has-animation="true" class="cc-1tha"><div class="cc-batn cc-ve3u"><div class="cc-h39l"><a role="button" data-type="smiley" class="cc-mxq4 cc-183m cc-151q">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_pickers_selector_smileys"))?"":y)+'</a><a role="button" data-type="gif" class="cc-mxq4 cc-183m cc-151q">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_pickers_selector_gifs"))?"":y)+'</a></div><div class="cc-vcjp"><div data-type="smiley" class="cc-5ftt"><span class="cc-yb0h">'),function(){var t=r.smileys;if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++){var e=t[i];m.push('<span data-size="large"'+g.Library.jade.runtime.attr("data-name",i,!0,!1)+g.Library.jade.runtime.attr("data-value",e,!0,!1)+' class="cc-dnqb cc-tkf1"></span>')}else for(i in n=0,t)n++,e=t[i],m.push('<span data-size="large"'+g.Library.jade.runtime.attr("data-name",i,!0,!1)+g.Library.jade.runtime.attr("data-value",e,!0,!1)+' class="cc-dnqb cc-tkf1"></span>')}.call(this),m.push('</span></div><div data-type="gif" data-has-search="false" class="cc-5ftt"><span class="cc-r00v"><span data-action="search" class="cc-z5zp">'),n=a("chat","chat_pickers_gif_search"),m.push('<a role="button" class="cc-1k8e"></a><input type="text" name="gif_search"'+g.Library.jade.runtime.attr("placeholder",""+n,!0,!1)+' maxlength="25" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" class="cc-19m8 cc-1lut cc-kgeu"/></span></span><span class="cc-yb0h"></span><span class="cc-1ydc"><span data-notice="no_results" class="cc-bj9g cc-151q">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_pickers_gif_no_results"))?"":y)+'</span></span></div></div></div></div><div class="cc-14ou"><a role="button" data-type="new_messages" class="cc-sel9"><span class="cc-1mtf"><span class="cc-tez9"></span><span class="cc-1691 cc-151q">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_alerts_new_messages"))?"":y)+'</span></span></a><a role="button" data-type="warn_reply" class="cc-sel9"><div class="cc-1mtf"><span class="cc-1691 cc-151q">'),h="email_default",!0===e.chat.phone_visitors&&!0!==e.chat.email_visitors?h=!0===e.chat.force_identify?"phone_force":"phone_default":!0===e.chat.force_identify&&(h="email_force"),m.push(g.Library.jade.runtime.escape(null==(y=a("chat","chat_alerts_warn_reply_"+h))?"":y)+'</span></div></a><a role="button" data-type="email_invalid" class="cc-sel9"><div class="cc-1mtf"><span class="cc-1691 cc-151q">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_alerts_email_invalid"))?"":y)+'</span></div></a><div data-type="wait_reply" class="cc-sel9"><div class="cc-1mtf"><span class="cc-1691 cc-151q"><span data-id="online" class="cc-ripp">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_alerts_wait_reply_online"))?"":y)+'</span><span data-id="away" class="cc-ripp">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_alerts_wait_reply_away"))?"":y)+'</span></span></div></div></div><div data-has-value="false"'+g.Library.jade.runtime.attr("data-is-locked",1==t?"true":"false",!0,!1)+g.Library.jade.runtime.attr("data-retain-lock",1==t?"true":"false",!0,!1)+' class="cc-g7iw cc-2ydi"><form name="form_message" action="#" method="post" class="cc-1uz4">'),n=a("chat","chat_form_field_message"),h=a("chat","chat_form_field_disabled"),m.push('<textarea name="message"'+g.Library.jade.runtime.attr("placeholder",""+(1==t?h:n),!0,!1)+' cols="20" rows="1" dir="auto" autocapitalize="off" autocomplete="off"'+g.Library.jade.runtime.attr("disabled",1==t?"":null,!0,!1)+' data-has-selection-range="data-has-selection-range" class="cc-pjpe cc-1lut cc-2n8m cc-kgeu"></textarea></form><div class="cc-1cxr"><div class="cc-t0eq"><div data-type="smiley" data-state="none" class="cc-1y2e"><span class="cc-1926 cc-1xll"><span class="cc-1tzl cc-68z9 cc-1wsx"><span class="cc-h1yx cc-kgeu">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_form_smiley_tooltip"))?"":y)+'</span></span><span data-variant="inactive" class="cc-1oxy cc-11vl cc-1aev"><span class="cc-7ebe"><span class="cc-nqfv cc-8kb8 cc-ew5j"></span><span class="cc-kpmf cc-8kb8 cc-18sf"></span></span></span><span data-variant="active" class="cc-1oxy cc-11vl cc-1ada cc-1aev"><span class="cc-7ebe"><span class="cc-nqfv cc-8kb8 cc-1ada"></span><span class="cc-kpmf cc-8kb8 cc-ew5j"></span></span></span></span></div>'),!0===e.chat.file_transfer&&m.push('<div data-type="file" data-state="none" class="cc-1y2e"><span class="cc-1926 cc-1xll"><span class="cc-1tzl cc-68z9 cc-1wsx"><span class="cc-h1yx cc-kgeu">'+g.Library.jade.runtime.escape(null==(y=a("chat","chat_form_attach_tooltip"))?"":y)+'</span></span><input type="file" name="attach_file" title="" multiple="multiple" class="cc-do6v"/><span class="cc-1oxy cc-1e7d cc-1aev cc-8kb8 cc-ew5j"></span><span class="cc-1wj3"><span class="cc-1uc7 cc-1nph cc-1o96"></span></span></span></div>'),m.push('<span class="cc-13gu"><span class="cc-br7s cc-vuur"><span class="cc-hf7r"></span></span></span><span class="cc-iuse"></span></div><span class="cc-iuse"></span></div></div>'),"urn:crisp.im:debranding:0"in e.plugins&&!0!==e.website.trial||(m.push('<div class="cc-19cg cc-ve3u"><div class="cc-z2iy">'),t=s(l.domain),l=s(l.name),m.push("<a"+g.Library.jade.runtime.attr("href",r.url.crisp_web+"/livechat/?ref=chatbox&domain="+t+"&name="+l,!0,!1)+' target="_blank" rel="noopener noreferrer" class="cc-13dp"><span class="cc-3f6y cc-kgeu">We run on</span><span class="cc-1204"></span><span class="cc-3f6y cc-37qh cc-151q">Crisp</span><span class="cc-iuse"></span></a><span class="cc-iuse"></span></div><span class="cc-iuse"></span></div>')),m.push('</div></div></div><a data-visible="false" data-is-failure="false" role="button" class="cc-unoo"><span class="cc-1c9v"><span data-id="new_messages" class="cc-1bue"><span class="cc-t81c"><span class="cc-86w0"><span class="cc-6uue cc-hy0f"></span></span><span class="cc-2zuy"></span></span><span class="cc-1bcp"><span class="cc-1s28"><span data-for-id="new_messages" class="cc-1div cc-kgeu">'+g.Library.jade.runtime.escape(null==(y=a("chat","minimized_tooltip_message_compose"))?"":y)+'<span class="cc-1hs9"><span class="cc-1q5i"><span data-variant="inactive" class="cc-1oxy cc-11vl"><span class="cc-7ebe"><span class="cc-nqfv"></span><span class="cc-kpmf"></span></span></span><span class="cc-1oxy cc-1e7d"></span></span></span></span><span class="cc-iuse"></span></span></span></span></span><span class="cc-7doi cc-1ada"><span data-id="chat_opened" class="cc-1iv2"><span data-is-ongoing="false" class="cc-15mo">'),!0===e.chat.last_operator_face&&0<e.website.active_operators.length?(e=e.website.active_operators[0],e=c(240,"operator",e.user_id,e.avatar),m.push('<span class="cc-10ml cc-he6y"><span'+g.Library.jade.runtime.attr("style","background-image: url('"+e+"') !important;",!0,!1)+' class="cc-1dx3 cc-wsm4"></span></span>')):m.push('<span class="cc-10ml cc-he6y"><span class="cc-1dx3 cc-wsm4"></span></span>'),m.push('<span class="cc-1j7n"></span><span class="cc-12u5 cc-151q">0</span></span></span></span></a><span data-visible="false" data-visible-subtle="false" class="cc-yqwh"><span class="cc-je17"></span></span></div>')}.call(this,"Date"in t?t.Date:"undefined"!=typeof Date?Date:void 0,"_a"in t?t._a:"undefined"!=typeof _a?_a:void 0,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"activity"in t?t.activity:"undefined"!=typeof activity?activity:void 0,"chatbox"in t?t.chatbox:"undefined"!=typeof chatbox?chatbox:void 0,"configuration"in t?t.configuration:"undefined"!=typeof configuration?configuration:void 0,"encodeURIComponent"in t?t.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"environment"in t?t.environment:"undefined"!=typeof environment?environment:void 0,"methods"in t?t.methods:"undefined"!=typeof methods?methods:void 0,"status"in t?t.status:"undefined"!=typeof status?status:void 0,"undefined"in t?t.undefined:void 0,"website"in t?t.website:"undefined"!=typeof website?website:void 0),m.join("")},minimized_authorized:function(t){var h,u=[],t=t||{};return function(t,s,i,c,a,n,e,r){u.push(""),u.push('<div class="cc-1xry cc-1gmp"><a data-maximized="false"'+g.Library.jade.runtime.attr("data-is-failure","false",!0,!1)+' role="button" class="cc-unoo"><span class="cc-1c9v">'),u.push('<span data-id="general_entice"'+g.Library.jade.runtime.attr("data-with-helpdesk",a&&a.url?"true":"false",!0,!1)+g.Library.jade.runtime.attr("data-is-concealed",!0===i?"true":"false",!0,!1)+' class="cc-1bue"><span class="cc-1bcp"><span class="cc-1s28 cc-kgeu">');var o,r=n.active_operators(r.id,c);u.push('<span class="cc-tkyh"><span class="cc-1t9t"><span class="cc-g0ak cc-hy0f"></span><span'+g.Library.jade.runtime.attr("data-has-avatar",0<r.length?"true":"false",!0,!1)+' class="cc-xc93"><span class="cc-17df"><span class="cc-od26 cc-151q">'+g.Library.jade.runtime.escape(null==(h=s("theme_text",["default_chat",c.chat.theme_text+"_chat"]))?"":h)+'</span><span data-id="online" class="cc-1rau cc-kgeu">'+g.Library.jade.runtime.escape(null==(h=s("minimized","tooltip_entice_status_online"))?"":h)+'</span><span data-id="away" class="cc-1rau cc-kgeu">'+g.Library.jade.runtime.escape(null==(h=s("minimized","tooltip_entice_status_away"))?"":h)+"</span></span>"),0<r.length&&(o=t(240,(o=r[0]).type,o.identifier,o.avatar),u.push('<span class="cc-56dg"><span class="cc-8exe cc-he6y"><span'+g.Library.jade.runtime.attr("style","background-image: url('"+o+"') !important;",!0,!1)+' class="cc-1h5w cc-wsm4"></span></span></span>')),u.push("</span></span></span>"),function(){var t=["online","away"];if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++){var e=t[i];u.push("<span"+g.Library.jade.runtime.attr("data-when",""+e,!0,!1)+' class="cc-rzi5">'),"away"===e&&a&&a.url?u.push('<span data-pop="spotlight" class="cc-1yk0 cc-183m"><span class="cc-1viy"><span class="cc-16up cc-jq4y cc-151q">'+g.Library.jade.runtime.escape(null==(h=s("minimized","tooltip_entice_split_helpdesk"))?"":h)+'</span></span></span><span class="cc-1yk0 cc-183m"><span class="cc-1viy"><span class="cc-16up cc-151q">'+g.Library.jade.runtime.escape(null==(h=s("minimized","tooltip_entice_split_chat"))?"":h)+"</span></span></span>"):u.push('<span class="cc-1yk0 cc-183m"><span class="cc-1viy"><span class="cc-16up cc-jq4y cc-151q">'+g.Library.jade.runtime.escape(null==(h=s("minimized","tooltip_entice_full_chat",[c.website.name]))?"":h)+"</span></span></span>"),u.push("</span>")}else for(i in n=0,t)n++,u.push("<span"+g.Library.jade.runtime.attr("data-when",""+(e=t[i]),!0,!1)+' class="cc-rzi5">'),"away"===e&&a&&a.url?u.push('<span data-pop="spotlight" class="cc-1yk0 cc-183m"><span class="cc-1viy"><span class="cc-16up cc-jq4y cc-151q">'+g.Library.jade.runtime.escape(null==(h=s("minimized","tooltip_entice_split_helpdesk"))?"":h)+'</span></span></span><span class="cc-1yk0 cc-183m"><span class="cc-1viy"><span class="cc-16up cc-151q">'+g.Library.jade.runtime.escape(null==(h=s("minimized","tooltip_entice_split_chat"))?"":h)+"</span></span></span>"):u.push('<span class="cc-1yk0 cc-183m"><span class="cc-1viy"><span class="cc-16up cc-jq4y cc-151q">'+g.Library.jade.runtime.escape(null==(h=s("minimized","tooltip_entice_full_chat",[c.website.name]))?"":h)+"</span></span></span>"),u.push("</span>")}.call(this),u.push("</span></span></span>"),u.push("</span>"),u.push('<span class="cc-7doi cc-1ada"><span data-id="chat_closed" class="cc-1iv2"><span class="cc-1yxw"><span class="cc-16qx cc-1eqr"></span></span><span data-is-ongoing="false" class="cc-15mo">'),!0===c.chat.last_operator_face&&0<c.website.active_operators.length&&(o=t(240,"operator",(t=c.website.active_operators[0]).user_id,t.avatar),u.push('<span class="cc-10ml cc-he6y"><span'+g.Library.jade.runtime.attr("style","background-image: url('"+o+"') !important;",!0,!1)+' class="cc-1dx3 cc-wsm4"></span></span>')),u.push("</span></span></span>"),u.push("</a></div>")}.call(this,"_a"in t?t._a:"undefined"!=typeof _a?_a:void 0,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"conceal_general_entice"in t?t.conceal_general_entice:"undefined"!=typeof conceal_general_entice?conceal_general_entice:void 0,"configuration"in t?t.configuration:"undefined"!=typeof configuration?configuration:void 0,"helpdesk"in t?t.helpdesk:"undefined"!=typeof helpdesk?helpdesk:void 0,"methods"in t?t.methods:"undefined"!=typeof methods?methods:void 0,"undefined"in t?t.undefined:void 0,"website"in t?t.website:"undefined"!=typeof website?website:void 0),u.join("")},minimized_unauthorized:function(t){var c,a=[],t=t||{};return function(t,i,n,e,s){a.push(""),a.push('<div class="cc-1xry cc-1gmp"><a data-maximized="false"'+g.Library.jade.runtime.attr("data-is-failure","true",!0,!1)+' role="button" class="cc-unoo"><span class="cc-1c9v">'),a.push('<span data-id="failure_notice" class="cc-1bue"><span class="cc-1bcp"><span class="cc-1s28 cc-151q">'+g.Library.jade.runtime.escape(null==(c=i("minimized","unauthorized_pane"))?"":c)+"</span></span></span>"),a.push("</span>"),a.push('<span class="cc-7doi cc-1uwh"><span data-id="in_failure" class="cc-1iv2"><span data-is-ongoing="false" class="cc-15mo"></span></span></span>'),a.push("</a></div>")}.call(this,"_a"in t?t._a:"undefined"!=typeof _a?_a:void 0,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"conceal_general_entice"in t?t.conceal_general_entice:"undefined"!=typeof conceal_general_entice?conceal_general_entice:void 0,"configuration"in t?t.configuration:"undefined"!=typeof configuration?configuration:void 0,"helpdesk"in t?t.helpdesk:"undefined"!=typeof helpdesk?helpdesk:void 0),a.join("")},chat_preview_message:function(t){var f,d=[],t=t||{};return function(t,i,n,e,s,c,a,r,o,h,u){if(d.push(""),"text"===h||"file"===h||"animation"===h||"audio"===h||"picker"===h||"field"===h){switch(d.push('<span class="cc-1mdn"><span class="cc-2244">'),o=t(240,u.type||o,u.user_id,u.avatar),d.push('<span class="cc-j5l1 cc-he6y"><span'+g.Library.jade.runtime.attr("style","background-image: url('"+o+"') !important;",!0,!1)+' class="cc-1nza cc-wsm4"></span></span><span class="cc-1oup"><span class="cc-12sh"></span><span class="cc-1f2m"><span class="cc-7pex cc-kgeu">'+g.Library.jade.runtime.escape(null==(f=i("chat","minimized_tooltip_message_from"))?"":f)+'</span><span class="cc-14a1 cc-151q">'),"website"===u.type?d.push(""+g.Library.jade.runtime.escape(null==(f=u.nickname)?"":f)):d.push(""+g.Library.jade.runtime.escape(null==(f=e(u.nickname))?"":f)),d.push('</span><span class="cc-iuse"></span></span><span class="cc-raz0 cc-kgeu">'),h){case"text":d.push(null==(f=n(s,r))?"":f);break;case"file":case"animation":switch(s.type){case"image/jpg":case"image/jpeg":case"image/png":case"image/gif":var l=c(s.url);"animation"===h||"image/gif"===s.type?d.push("<span"+g.Library.jade.runtime.attr("style","background-image: url('"+a.url.crisp_image+"/process/original/?url="+l+"') !important;",!0,!1)+' class="cc-14ob"></span>'):d.push("<span"+g.Library.jade.runtime.attr("style","background-image: url('"+a.url.crisp_image+"/process/resize/?url="+l+"&width=180&height=180') !important;",!0,!1)+' class="cc-14ob"></span>');break;default:"animation"===h?d.push(""):(d.push(""),s.name&&d.push(" "+g.Library.jade.runtime.escape(null==(f=s.name)?"":f)))}break;case"audio":d.push("");break;case"picker":case"field":d.push(null==(f=n(s.text,r))?"":f)}d.push('</span></span></span><span class="cc-iuse"></span></span>')}}.call(this,"_a"in t?t._a:"undefined"!=typeof _a?_a:void 0,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"_f"in t?t._f:"undefined"!=typeof _f?_f:void 0,"_n"in t?t._n:"undefined"!=typeof _n?_n:void 0,"content"in t?t.content:"undefined"!=typeof content?content:void 0,"encodeURIComponent"in t?t.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"environment"in t?t.environment:"undefined"!=typeof environment?environment:void 0,"format_context"in t?t.format_context:"undefined"!=typeof format_context?format_context:void 0,"from"in t?t.from:"undefined"!=typeof from?from:void 0,"type"in t?t.type:"undefined"!=typeof type?type:void 0,"user"in t?t.user:"undefined"!=typeof user?user:void 0),d.join("")},chat_message_text:function(t){var p,v=[],y={},t=t||{};return function(t,i,n,e,s,c,a,r,o,h,u,l,f,d){v.push(""),v.push(""),y["text-space"]=p=function(){this&&this.block,this&&this.attributes,v.push("<span> </span>")},v.push("<div"+g.Library.jade.runtime.attr("data-from",""+h,!0,!1)+g.Library.jade.runtime.attr("data-date-iso",""+a,!0,!1)+g.Library.jade.runtime.attr("data-fingerprint",""+r,!0,!1)+g.Library.jade.runtime.attr("data-type","text",!0,!1)+g.Library.jade.runtime.attr("data-is-preview",""+!1,!0,!1)+' class="cc-b3wa">'),"operator"===h&&(t=t(240,d.type||h,d.user_id,d.avatar),v.push('<span class="cc-1s5n cc-he6y cc-1xll"><span'+g.Library.jade.runtime.attr("style","background-image: url('"+t+"') !important;",!0,!1)+' class="cc-1jl7 cc-wsm4"></span>'),d.nickname&&(v.push('<span class="cc-1tzl cc-1ntm cc-1wsx"><span class="cc-h1yx cc-kgeu">'),"website"===d.type?v.push(""+g.Library.jade.runtime.escape(null==(p=d.nickname)?"":p)):v.push(""+g.Library.jade.runtime.escape(null==(p=e(d.nickname))?"":p)),v.push("</span></span>")),v.push("</span>")),v.push('<span class="cc-xfpr cc-1xll"><span'+g.Library.jade.runtime.cls(["cc-1yfu","cc-1lut","operator"===h?"cc-1ada":""],[null,null,!0])+"><span"+g.Library.jade.runtime.cls(["cc-xtol","cc-kgeu","operator"===h?"cc-6zjc":""],[null,null,!0])+">"+(null==(p=n(s,o))?"":p)),u.preview&&function(){var t,i,n=u.preview;if("number"==typeof n.length)for(var e=0,s=n.length;e<s;e++){var c=n[e];v.push("<span"+g.Library.jade.runtime.attr("data-variant",""+(c.variant||"none"),!0,!1)+' class="cc-1kz7">'),c.preview&&c.preview.embed&&c.preview.image?(t=l.image_url_resize(c.preview.image),v.push("<a"+g.Library.jade.runtime.attr("href",""+c.preview.embed,!0,!1)+' rel="noopener noreferrer" target="_blank" data-type="embed"'+g.Library.jade.runtime.attr("style","background-image: url('"+t+"') !important;",!0,!1)+' class="cc-djxv cc-94yb cc-1c2b"><span class="cc-18zh"></span></a>')):(c.preview&&c.preview.image&&(t=l.image_url_resize(c.preview.image),v.push("<a"+g.Library.jade.runtime.attr("href",""+c.url,!0,!1)+' rel="noopener noreferrer" target="_blank" data-type="image"'+g.Library.jade.runtime.attr("data-target",""+(c.variant||"none"),!0,!1)+g.Library.jade.runtime.attr("style","background-image: url('"+t+"') !important;",!0,!1)+' class="cc-djxv"></a>')),v.push("<a"+g.Library.jade.runtime.attr("href",""+c.url,!0,!1)+' rel="noopener noreferrer" target="_blank" data-type="link"'+g.Library.jade.runtime.attr("data-target",""+(c.variant||"none"),!0,!1)+g.Library.jade.runtime.cls(["cc-djxv","cc-151q","operator"===h?"cc-k5w4":""],[null,null,!0])+">"),i=c.title||c.website||c.url,v.push(g.Library.jade.runtime.escape(null==(p=i)?"":p)+"</a>")),v.push("</span>")}else for(e in s=0,n)s++,c=n[e],v.push("<span"+g.Library.jade.runtime.attr("data-variant",""+(c.variant||"none"),!0,!1)+' class="cc-1kz7">'),c.preview&&c.preview.embed&&c.preview.image?(t=l.image_url_resize(c.preview.image),v.push("<a"+g.Library.jade.runtime.attr("href",""+c.preview.embed,!0,!1)+' rel="noopener noreferrer" target="_blank" data-type="embed"'+g.Library.jade.runtime.attr("style","background-image: url('"+t+"') !important;",!0,!1)+' class="cc-djxv cc-94yb cc-1c2b"><span class="cc-18zh"></span></a>')):(c.preview&&c.preview.image&&(t=l.image_url_resize(c.preview.image),v.push("<a"+g.Library.jade.runtime.attr("href",""+c.url,!0,!1)+' rel="noopener noreferrer" target="_blank" data-type="image"'+g.Library.jade.runtime.attr("data-target",""+(c.variant||"none"),!0,!1)+g.Library.jade.runtime.attr("style","background-image: url('"+t+"') !important;",!0,!1)+' class="cc-djxv"></a>')),v.push("<a"+g.Library.jade.runtime.attr("href",""+c.url,!0,!1)+' rel="noopener noreferrer" target="_blank" data-type="link"'+g.Library.jade.runtime.attr("data-target",""+(c.variant||"none"),!0,!1)+g.Library.jade.runtime.cls(["cc-djxv","cc-151q","operator"===h?"cc-k5w4":""],[null,null,!0])+">"),i=c.title||c.website||c.url,v.push(g.Library.jade.runtime.escape(null==(p=i)?"":p)+"</a>")),v.push("</span>")}.call(this),v.push('</span><span class="cc-iuse"></span></span>'),c&&(v.push('<span class="cc-iqjx cc-1tzl cc-68z9 cc-sc6q"><span class="cc-h1yx cc-kgeu"><span'+g.Library.jade.runtime.attr("data-date-iso",""+a,!0,!1)+' data-date-watch="true" class="cc-1k3j">'+g.Library.jade.runtime.escape(null==(p=c)?"":p)+'</span><span class="cc-1kje">'),!0!==u.participant&&!0!==u.edited&&!0!==u.translated||(v.push('<span class="cc-66kp">('),!0===u.participant&&(v.push(g.Library.jade.runtime.escape(null==(p=i("chat","chat_message_tag_participant"))?"":p)),!0!==u.edited&&!0!==u.translated||(v.push(","),y["text-space"]())),!0===u.edited&&(v.push(g.Library.jade.runtime.escape(null==(p=i("chat","chat_message_tag_edited"))?"":p)),!0===u.translated&&(v.push(","),y["text-space"]())),!0===u.translated&&v.push(g.Library.jade.runtime.escape(null==(p=i("chat","chat_message_tag_translated"))?"":p)),v.push(")</span>")),v.push("</span></span></span>")),v.push('<span class="cc-iuse"></span></span><span class="cc-iuse"></span>'),"visitor"===h&&v.push('<span class="cc-1did"><span class="cc-k5zk"><span class="cc-crgu"></span><span class="cc-1u5t cc-kgeu">'+g.Library.jade.runtime.escape(null==(p=i("chat","chat_message_info_read"))?"":p)+'</span><span class="cc-iuse"></span></span><span class="cc-iuse"></span></span><a role="button" class="cc-pus6"><span class="cc-fnu6 cc-151q">'+g.Library.jade.runtime.escape(null==(p=i("chat","chat_message_error_retry"))?"":p)+'</span><span class="cc-1pp5 cc-ic7l"></span><span class="cc-iuse"></span></a><span class="cc-iuse"></span>'),v.push("</div>")}.call(this,"_a"in t?t._a:"undefined"!=typeof _a?_a:void 0,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"_f"in t?t._f:"undefined"!=typeof _f?_f:void 0,"_n"in t?t._n:"undefined"!=typeof _n?_n:void 0,"content"in t?t.content:"undefined"!=typeof content?content:void 0,"date_formatted"in t?t.date_formatted:"undefined"!=typeof date_formatted?date_formatted:void 0,"date_iso"in t?t.date_iso:"undefined"!=typeof date_iso?date_iso:void 0,"fingerprint"in t?t.fingerprint:"undefined"!=typeof fingerprint?fingerprint:void 0,"format_context"in t?t.format_context:"undefined"!=typeof format_context?format_context:void 0,"from"in t?t.from:"undefined"!=typeof from?from:void 0,"metas"in t?t.metas:"undefined"!=typeof metas?metas:void 0,"methods"in t?t.methods:"undefined"!=typeof methods?methods:void 0,"undefined"in t?t.undefined:void 0,"user"in t?t.user:"undefined"!=typeof user?user:void 0),v.join("")},chat_message_file:function(t){var d,p=[],v={},t=t||{};return function(t,i,n,e,s,c,a,r,o,h,u,l,f){p.push(""),p.push(""),v["text-space"]=d=function(){this&&this.block,this&&this.attributes,p.push("<span> </span>")},p.push("<div"+g.Library.jade.runtime.attr("data-from",""+h,!0,!1)+g.Library.jade.runtime.attr("data-date-iso",""+c,!0,!1)+g.Library.jade.runtime.attr("data-fingerprint",""+o,!0,!1)+g.Library.jade.runtime.attr("data-type","file",!0,!1)+g.Library.jade.runtime.attr("data-is-preview",""+u,!0,!1)+' class="cc-b3wa">'),"operator"===h&&(t=t(240,f.type||h,f.user_id,f.avatar),p.push('<span class="cc-1s5n cc-he6y cc-1xll"><span'+g.Library.jade.runtime.attr("style","background-image: url('"+t+"') !important;",!0,!1)+' class="cc-1jl7 cc-wsm4"></span>'),f.nickname&&(p.push('<span class="cc-1tzl cc-1ntm cc-1wsx"><span class="cc-h1yx cc-kgeu">'),"website"===f.type?p.push(""+g.Library.jade.runtime.escape(null==(d=f.nickname)?"":d)):p.push(""+g.Library.jade.runtime.escape(null==(d=n(f.nickname))?"":d)),p.push("</span></span>")),p.push("</span>")),p.push('<span class="cc-xfpr cc-1xll"><span'+g.Library.jade.runtime.cls(["cc-1yfu","cc-1lut","operator"===h?"cc-1ada":""],[null,null,!0])+"><span"+g.Library.jade.runtime.cls(["cc-xtol","cc-kgeu","operator"===h?"cc-6zjc":""],[null,null,!0])+'><span class="cc-1epp"><span class="cc-q81n cc-kgeu">'),e.name?p.push(""+g.Library.jade.runtime.escape(null==(d=e.name)?"":d)):p.push(g.Library.jade.runtime.escape(null==(d=i("chat","chat_message_file_name"))?"":d)),p.push("</span>"),-1!==r.types.file_preview.image.indexOf(e.type)?(p.push("<a"+g.Library.jade.runtime.attr("href",""+e.url,!0,!1)+' data-action="image"'+g.Library.jade.runtime.attr("data-name",""+e.name,!0,!1)+' rel="noopener noreferrer" class="cc-nn4g cc-17m8">'),a=a(e.url),"image/gif"===e.type?p.push("<span"+g.Library.jade.runtime.attr("style","background-image: url('"+r.url.crisp_image+"/process/original/?url="+a+"') !important;",!0,!1)+' class="cc-fqnb"></span>'):p.push("<span"+g.Library.jade.runtime.attr("style","background-image: url('"+r.url.crisp_image+"/process/resize/?url="+a+"&width=600&height=600') !important;",!0,!1)+' class="cc-fqnb"></span>'),p.push("</a>")):-1!==r.types.file_preview.video.indexOf(e.type)?p.push("<a"+g.Library.jade.runtime.attr("href",""+e.url,!0,!1)+' data-action="video"'+g.Library.jade.runtime.attr("data-name",""+e.name,!0,!1)+' rel="noopener noreferrer"'+g.Library.jade.runtime.cls(["cc-1mhl","cc-17m8","operator"===h?"cc-k5w4":""],[null,null,!0])+'><span class="cc-32av cc-151q">'+g.Library.jade.runtime.escape(null==(d=i("chat","chat_message_file_video"))?"":d)+"</span></a>"):p.push("<a"+g.Library.jade.runtime.attr("href",""+e.url,!0,!1)+g.Library.jade.runtime.attr("download","text/html"===e.type?null:""+(e.name||e.url),!0,!1)+' data-action="download" rel="noopener noreferrer" target="_blank"'+g.Library.jade.runtime.cls(["cc-1mhl","operator"===h?"cc-k5w4":""],[null,!0])+'><span class="cc-32av cc-151q">'+g.Library.jade.runtime.escape(null==(d=i("chat","chat_message_file_download"))?"":d)+"</span></a>"),p.push('</span></span><span class="cc-iuse"></span></span>'),s&&(p.push('<span class="cc-iqjx cc-1tzl cc-68z9 cc-sc6q"><span class="cc-h1yx cc-kgeu"><span'+g.Library.jade.runtime.attr("data-date-iso",""+c,!0,!1)+' data-date-watch="true" class="cc-1k3j">'+g.Library.jade.runtime.escape(null==(d=s)?"":d)+'</span><span class="cc-1kje">'),!0!==l.participant&&!0!==l.edited&&!0!==l.translated||(p.push('<span class="cc-66kp">('),!0===l.participant&&(p.push(g.Library.jade.runtime.escape(null==(d=i("chat","chat_message_tag_participant"))?"":d)),!0!==l.edited&&!0!==l.translated||(p.push(","),v["text-space"]())),!0===l.edited&&(p.push(g.Library.jade.runtime.escape(null==(d=i("chat","chat_message_tag_edited"))?"":d)),!0===l.translated&&(p.push(","),v["text-space"]())),!0===l.translated&&p.push(g.Library.jade.runtime.escape(null==(d=i("chat","chat_message_tag_translated"))?"":d)),p.push(")</span>")),p.push("</span></span></span>")),p.push('<span class="cc-iuse"></span></span><span class="cc-iuse"></span>'),"visitor"===h&&p.push('<span class="cc-1did"><span class="cc-k5zk"><span class="cc-crgu"></span><span class="cc-1u5t cc-kgeu">'+g.Library.jade.runtime.escape(null==(d=i("chat","chat_message_info_read"))?"":d)+'</span><span class="cc-iuse"></span></span><span class="cc-iuse"></span></span><a role="button" class="cc-pus6"><span class="cc-fnu6 cc-151q">'+g.Library.jade.runtime.escape(null==(d=i("chat","chat_message_error_retry"))?"":d)+'</span><span class="cc-1pp5 cc-ic7l"></span><span class="cc-iuse"></span></a><span class="cc-iuse"></span>'),p.push("</div>")}.call(this,"_a"in t?t._a:"undefined"!=typeof _a?_a:void 0,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"_n"in t?t._n:"undefined"!=typeof _n?_n:void 0,"content"in t?t.content:"undefined"!=typeof content?content:void 0,"date_formatted"in t?t.date_formatted:"undefined"!=typeof date_formatted?date_formatted:void 0,"date_iso"in t?t.date_iso:"undefined"!=typeof date_iso?date_iso:void 0,"encodeURIComponent"in t?t.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"environment"in t?t.environment:"undefined"!=typeof environment?environment:void 0,"fingerprint"in t?t.fingerprint:"undefined"!=typeof fingerprint?fingerprint:void 0,"from"in t?t.from:"undefined"!=typeof from?from:void 0,"message_is_preview"in t?t.message_is_preview:"undefined"!=typeof message_is_preview?message_is_preview:void 0,"metas"in t?t.metas:"undefined"!=typeof metas?metas:void 0,"user"in t?t.user:"undefined"!=typeof user?user:void 0),p.join("")},chat_message_animation:function(t){var f,d=[],p={},t=t||{};return function(t,i,n,e,s,c,a,r,o,h,u,l){d.push(""),d.push(""),p["text-space"]=f=function(){this&&this.block,this&&this.attributes,d.push("<span> </span>")},d.push("<div"+g.Library.jade.runtime.attr("data-from",""+h,!0,!1)+g.Library.jade.runtime.attr("data-date-iso",""+c,!0,!1)+g.Library.jade.runtime.attr("data-fingerprint",""+o,!0,!1)+g.Library.jade.runtime.attr("data-type","animation",!0,!1)+g.Library.jade.runtime.attr("data-is-preview",""+!0,!0,!1)+' class="cc-b3wa">'),"operator"===h&&(t=t(240,l.type||h,l.user_id,l.avatar),d.push('<span class="cc-1s5n cc-he6y cc-1xll"><span'+g.Library.jade.runtime.attr("style","background-image: url('"+t+"') !important;",!0,!1)+' class="cc-1jl7 cc-wsm4"></span>'),l.nickname&&(d.push('<span class="cc-1tzl cc-1ntm cc-1wsx"><span class="cc-h1yx cc-kgeu">'),"website"===l.type?d.push(""+g.Library.jade.runtime.escape(null==(f=l.nickname)?"":f)):d.push(""+g.Library.jade.runtime.escape(null==(f=n(l.nickname))?"":f)),d.push("</span></span>")),d.push("</span>")),d.push('<span class="cc-xfpr cc-1xll"><span'+g.Library.jade.runtime.cls(["cc-1yfu","cc-1lut","operator"===h?"cc-1ada":""],[null,null,!0])+"><span"+g.Library.jade.runtime.cls(["cc-xtol","cc-kgeu","operator"===h?"cc-6zjc":""],[null,null,!0])+">"),l=e.url.match(/^(?:https?:)?(?:\/\/)?([^\/\?]+)/)[1],e=a(e.url),d.push("<span"+g.Library.jade.runtime.attr("data-source",l||null,!0,!1)+' class="cc-wrpn"><span'+g.Library.jade.runtime.attr("style","background-image: url('"+r.url.crisp_image+"/process/original/?url="+e+"') !important;",!0,!1)+' class="cc-1rh5"><span class="cc-nl2z"><span class="cc-1pbj"></span></span></span></span></span><span class="cc-iuse"></span></span>'),s&&(d.push('<span class="cc-iqjx cc-1tzl cc-68z9 cc-sc6q"><span class="cc-h1yx cc-kgeu"><span'+g.Library.jade.runtime.attr("data-date-iso",""+c,!0,!1)+' data-date-watch="true" class="cc-1k3j">'+g.Library.jade.runtime.escape(null==(f=s)?"":f)+'</span><span class="cc-1kje">'),!0!==u.participant&&!0!==u.edited&&!0!==u.translated||(d.push('<span class="cc-66kp">('),!0===u.participant&&(d.push(g.Library.jade.runtime.escape(null==(f=i("chat","chat_message_tag_participant"))?"":f)),!0!==u.edited&&!0!==u.translated||(d.push(","),p["text-space"]())),!0===u.edited&&(d.push(g.Library.jade.runtime.escape(null==(f=i("chat","chat_message_tag_edited"))?"":f)),!0===u.translated&&(d.push(","),p["text-space"]())),!0===u.translated&&d.push(g.Library.jade.runtime.escape(null==(f=i("chat","chat_message_tag_translated"))?"":f)),d.push(")</span>")),d.push("</span></span></span>")),d.push('<span class="cc-iuse"></span></span><span class="cc-iuse"></span>'),"visitor"===h&&d.push('<span class="cc-1did"><span class="cc-k5zk"><span class="cc-crgu"></span><span class="cc-1u5t cc-kgeu">'+g.Library.jade.runtime.escape(null==(f=i("chat","chat_message_info_read"))?"":f)+'</span><span class="cc-iuse"></span></span><span class="cc-iuse"></span></span><a role="button" class="cc-pus6"><span class="cc-fnu6 cc-151q">'+g.Library.jade.runtime.escape(null==(f=i("chat","chat_message_error_retry"))?"":f)+'</span><span class="cc-1pp5 cc-ic7l"></span><span class="cc-iuse"></span></a><span class="cc-iuse"></span>'),d.push("</div>")}.call(this,"_a"in t?t._a:"undefined"!=typeof _a?_a:void 0,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"_n"in t?t._n:"undefined"!=typeof _n?_n:void 0,"content"in t?t.content:"undefined"!=typeof content?content:void 0,"date_formatted"in t?t.date_formatted:"undefined"!=typeof date_formatted?date_formatted:void 0,"date_iso"in t?t.date_iso:"undefined"!=typeof date_iso?date_iso:void 0,"encodeURIComponent"in t?t.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"environment"in t?t.environment:"undefined"!=typeof environment?environment:void 0,"fingerprint"in t?t.fingerprint:"undefined"!=typeof fingerprint?fingerprint:void 0,"from"in t?t.from:"undefined"!=typeof from?from:void 0,"metas"in t?t.metas:"undefined"!=typeof metas?metas:void 0,"user"in t?t.user:"undefined"!=typeof user?user:void 0),d.join("")},chat_message_audio:function(t){var u,l=[],f={},t=t||{};return function(t,i,n,e,s,c,a,r,o,h){l.push(""),l.push(""),f["text-space"]=u=function(){this&&this.block,this&&this.attributes,l.push("<span> </span>")},l.push("<div"+g.Library.jade.runtime.attr("data-from",""+r,!0,!1)+g.Library.jade.runtime.attr("data-date-iso",""+c,!0,!1)+g.Library.jade.runtime.attr("data-fingerprint",""+a,!0,!1)+g.Library.jade.runtime.attr("data-type","audio",!0,!1)+g.Library.jade.runtime.attr("data-is-preview",""+!1,!0,!1)+' class="cc-b3wa">'),"operator"===r&&(t=t(240,h.type||r,h.user_id,h.avatar),l.push('<span class="cc-1s5n cc-he6y cc-1xll"><span'+g.Library.jade.runtime.attr("style","background-image: url('"+t+"') !important;",!0,!1)+' class="cc-1jl7 cc-wsm4"></span>'),h.nickname&&(l.push('<span class="cc-1tzl cc-1ntm cc-1wsx"><span class="cc-h1yx cc-kgeu">'),"website"===h.type?l.push(""+g.Library.jade.runtime.escape(null==(u=h.nickname)?"":u)):l.push(""+g.Library.jade.runtime.escape(null==(u=n(h.nickname))?"":u)),l.push("</span></span>")),l.push("</span>")),l.push('<span class="cc-xfpr cc-1xll"><span'+g.Library.jade.runtime.cls(["cc-1yfu","cc-1lut","operator"===r?"cc-1ada":""],[null,null,!0])+"><span"+g.Library.jade.runtime.cls(["cc-xtol","cc-kgeu","operator"===r?"cc-6zjc":""],[null,null,!0])+'><span data-state="none" class="cc-1qf4"><span class="cc-uxhm"><a role="button"'+g.Library.jade.runtime.cls(["cc-784v","operator"===r?"cc-caj5":""],[null,!0])+'></a><span class="cc-8dhr"></span><span class="cc-u2t4 cc-kgeu">'+g.Library.jade.runtime.escape(null==(u=o.duration)?"":u)+'</span><span class="cc-iuse"></span></span><span'+g.Library.jade.runtime.cls(["cc-1ep3","operator"===r?"cc-16jc":""],[null,!0])+'></span><audio preload="none" class="cc-cccw"><source'+g.Library.jade.runtime.attr("src",""+e.url,!0,!1)+g.Library.jade.runtime.attr("type",""+e.type,!0,!1)+'/></audio></span></span><span class="cc-iuse"></span></span>'),s&&(l.push('<span class="cc-iqjx cc-1tzl cc-68z9 cc-sc6q"><span class="cc-h1yx cc-kgeu"><span'+g.Library.jade.runtime.attr("data-date-iso",""+c,!0,!1)+' data-date-watch="true" class="cc-1k3j">'+g.Library.jade.runtime.escape(null==(u=s)?"":u)+'</span><span class="cc-1kje">'),!0!==o.participant&&!0!==o.edited&&!0!==o.translated||(l.push('<span class="cc-66kp">('),!0===o.participant&&(l.push(g.Library.jade.runtime.escape(null==(u=i("chat","chat_message_tag_participant"))?"":u)),!0!==o.edited&&!0!==o.translated||(l.push(","),f["text-space"]())),!0===o.edited&&(l.push(g.Library.jade.runtime.escape(null==(u=i("chat","chat_message_tag_edited"))?"":u)),!0===o.translated&&(l.push(","),f["text-space"]())),!0===o.translated&&l.push(g.Library.jade.runtime.escape(null==(u=i("chat","chat_message_tag_translated"))?"":u)),l.push(")</span>")),l.push("</span></span></span>")),l.push('<span class="cc-iuse"></span></span><span class="cc-iuse"></span>'),"visitor"===r&&l.push('<span class="cc-1did"><span class="cc-k5zk"><span class="cc-crgu"></span><span class="cc-1u5t cc-kgeu">'+g.Library.jade.runtime.escape(null==(u=i("chat","chat_message_info_read"))?"":u)+'</span><span class="cc-iuse"></span></span><span class="cc-iuse"></span></span><a role="button" class="cc-pus6"><span class="cc-fnu6 cc-151q">'+g.Library.jade.runtime.escape(null==(u=i("chat","chat_message_error_retry"))?"":u)+'</span><span class="cc-1pp5 cc-ic7l"></span><span class="cc-iuse"></span></a><span class="cc-iuse"></span>'),l.push("</div>")}.call(this,"_a"in t?t._a:"undefined"!=typeof _a?_a:void 0,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"_n"in t?t._n:"undefined"!=typeof _n?_n:void 0,"content"in t?t.content:"undefined"!=typeof content?content:void 0,"date_formatted"in t?t.date_formatted:"undefined"!=typeof date_formatted?date_formatted:void 0,"date_iso"in t?t.date_iso:"undefined"!=typeof date_iso?date_iso:void 0,"fingerprint"in t?t.fingerprint:"undefined"!=typeof fingerprint?fingerprint:void 0,"from"in t?t.from:"undefined"!=typeof from?from:void 0,"metas"in t?t.metas:"undefined"!=typeof metas?metas:void 0,"user"in t?t.user:"undefined"!=typeof user?user:void 0),l.join("")},chat_message_picker:function(t){var d,p=[],v={},t=t||{};return function(t,i,n,e,s,c,a,r,o,h,u,l,f){p.push(""),p.push(""),v["text-space"]=d=function(){this&&this.block,this&&this.attributes,p.push("<span> </span>")},p.push("<div"+g.Library.jade.runtime.attr("data-from",""+h,!0,!1)+g.Library.jade.runtime.attr("data-date-iso",""+a,!0,!1)+g.Library.jade.runtime.attr("data-fingerprint",""+r,!0,!1)+g.Library.jade.runtime.attr("data-type","picker",!0,!1)+g.Library.jade.runtime.attr("data-is-preview",""+!1,!0,!1)+' class="cc-b3wa">'),"operator"===h&&(t=t(240,f.type||h,f.user_id,f.avatar),p.push('<span class="cc-1s5n cc-he6y cc-1xll"><span'+g.Library.jade.runtime.attr("style","background-image: url('"+t+"') !important;",!0,!1)+' class="cc-1jl7 cc-wsm4"></span>'),f.nickname&&(p.push('<span class="cc-1tzl cc-1ntm cc-1wsx"><span class="cc-h1yx cc-kgeu">'),"website"===f.type?p.push(""+g.Library.jade.runtime.escape(null==(d=f.nickname)?"":d)):p.push(""+g.Library.jade.runtime.escape(null==(d=e(f.nickname))?"":d)),p.push("</span></span>")),p.push("</span>")),p.push('<span class="cc-xfpr cc-1xll"><span'+g.Library.jade.runtime.cls(["cc-1yfu","cc-1lut","operator"===h?"cc-1ada":""],[null,null,!0])+"><span"+g.Library.jade.runtime.cls(["cc-xtol","cc-kgeu","operator"===h?"cc-6zjc":""],[null,null,!0])+">"+(null==(d=n(s.text,o))?"":d)+"<span"+g.Library.jade.runtime.attr("data-has-selected",!0===u.has_selected?"true":"false",!0,!1)+g.Library.jade.runtime.attr("data-choices-count",""+s.choices.length,!0,!1)+' class="cc-1mx4">'),function(){var t=s.choices;if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++){var e=t[i];p.push('<a role="button"'+g.Library.jade.runtime.attr("data-value",""+e.value,!0,!1)+g.Library.jade.runtime.attr("data-selected",!0===e.selected?"true":"false",!0,!1)+g.Library.jade.runtime.cls(["cc-1u43",!0!==u.has_selected||!0===e.selected?"cc-151q":"cc-kgeu"],[null,!0])+">"+g.Library.jade.runtime.escape(null==(d=e.label)?"":d)+"</a>")}else for(i in n=0,t)n++,e=t[i],p.push('<a role="button"'+g.Library.jade.runtime.attr("data-value",""+e.value,!0,!1)+g.Library.jade.runtime.attr("data-selected",!0===e.selected?"true":"false",!0,!1)+g.Library.jade.runtime.cls(["cc-1u43",!0!==u.has_selected||!0===e.selected?"cc-151q":"cc-kgeu"],[null,!0])+">"+g.Library.jade.runtime.escape(null==(d=e.label)?"":d)+"</a>")}.call(this),p.push('</span></span><span class="cc-iuse"></span></span>'),c&&(p.push('<span class="cc-iqjx cc-1tzl cc-68z9 cc-sc6q"><span class="cc-h1yx cc-kgeu"><span'+g.Library.jade.runtime.attr("data-date-iso",""+a,!0,!1)+' data-date-watch="true" class="cc-1k3j">'+g.Library.jade.runtime.escape(null==(d=c)?"":d)+'</span><span class="cc-1kje">'),!0!==u.participant&&!0!==u.edited&&!0!==u.translated||(p.push('<span class="cc-66kp">('),!0===u.participant&&(p.push(g.Library.jade.runtime.escape(null==(d=i("chat","chat_message_tag_participant"))?"":d)),!0!==u.edited&&!0!==u.translated||(p.push(","),v["text-space"]())),!0===u.edited&&(p.push(g.Library.jade.runtime.escape(null==(d=i("chat","chat_message_tag_edited"))?"":d)),!0===u.translated&&(p.push(","),v["text-space"]())),!0===u.translated&&p.push(g.Library.jade.runtime.escape(null==(d=i("chat","chat_message_tag_translated"))?"":d)),p.push(")</span>")),p.push("</span></span></span>")),p.push('<span class="cc-iuse"></span></span><span class="cc-iuse"></span>'),"visitor"===h&&p.push('<span class="cc-1did"><span class="cc-k5zk"><span class="cc-crgu"></span><span class="cc-1u5t cc-kgeu">'+g.Library.jade.runtime.escape(null==(d=i("chat","chat_message_info_read"))?"":d)+'</span><span class="cc-iuse"></span></span><span class="cc-iuse"></span></span><a role="button" class="cc-pus6"><span class="cc-fnu6 cc-151q">'+g.Library.jade.runtime.escape(null==(d=i("chat","chat_message_error_retry"))?"":d)+'</span><span class="cc-1pp5 cc-ic7l"></span><span class="cc-iuse"></span></a><span class="cc-iuse"></span>'),p.push("</div>")}.call(this,"_a"in t?t._a:"undefined"!=typeof _a?_a:void 0,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"_f"in t?t._f:"undefined"!=typeof _f?_f:void 0,"_n"in t?t._n:"undefined"!=typeof _n?_n:void 0,"content"in t?t.content:"undefined"!=typeof content?content:void 0,"date_formatted"in t?t.date_formatted:"undefined"!=typeof date_formatted?date_formatted:void 0,"date_iso"in t?t.date_iso:"undefined"!=typeof date_iso?date_iso:void 0,"fingerprint"in t?t.fingerprint:"undefined"!=typeof fingerprint?fingerprint:void 0,"format_context"in t?t.format_context:"undefined"!=typeof format_context?format_context:void 0,"from"in t?t.from:"undefined"!=typeof from?from:void 0,"metas"in t?t.metas:"undefined"!=typeof metas?metas:void 0,"undefined"in t?t.undefined:void 0,"user"in t?t.user:"undefined"!=typeof user?user:void 0),p.join("")},chat_message_field:function(t){var f,d=[],p={},t=t||{};return function(t,i,n,e,s,c,a,r,o,h,u,l){d.push(""),d.push(""),p["text-space"]=f=function(){this&&this.block,this&&this.attributes,d.push("<span> </span>")},d.push("<div"+g.Library.jade.runtime.attr("data-from",""+h,!0,!1)+g.Library.jade.runtime.attr("data-date-iso",""+a,!0,!1)+g.Library.jade.runtime.attr("data-fingerprint",""+r,!0,!1)+g.Library.jade.runtime.attr("data-type","field",!0,!1)+g.Library.jade.runtime.attr("data-is-preview",""+!1,!0,!1)+' class="cc-b3wa">'),"operator"===h&&(t=t(240,l.type||h,l.user_id,l.avatar),d.push('<span class="cc-1s5n cc-he6y cc-1xll"><span'+g.Library.jade.runtime.attr("style","background-image: url('"+t+"') !important;",!0,!1)+' class="cc-1jl7 cc-wsm4"></span>'),l.nickname&&(d.push('<span class="cc-1tzl cc-1ntm cc-1wsx"><span class="cc-h1yx cc-kgeu">'),"website"===l.type?d.push(""+g.Library.jade.runtime.escape(null==(f=l.nickname)?"":f)):d.push(""+g.Library.jade.runtime.escape(null==(f=e(l.nickname))?"":f)),d.push("</span></span>")),d.push("</span>")),d.push('<span class="cc-xfpr cc-1xll"><span'+g.Library.jade.runtime.cls(["cc-1yfu","cc-1lut","operator"===h?"cc-1ada":""],[null,null,!0])+"><span"+g.Library.jade.runtime.cls(["cc-xtol","cc-kgeu","operator"===h?"cc-6zjc":""],[null,null,!0])+"><span"+g.Library.jade.runtime.attr("data-has-value",s.value?"true":"false",!0,!1)+' class="cc-1lj6 cc-143v">'),s.previous&&"operator"===h&&d.push('<a role="button" class="cc-2t7n cc-4xbu"></a>'),d.push(null==(f=n(s.text,o))?"":f),s.value||"operator"!==h?d.push("<span"+g.Library.jade.runtime.cls(["cc-vzs4",s.value?"cc-151q":"cc-kgeu"],[null,!0])+">"+g.Library.jade.runtime.escape(null==(f=s.value||s.explain)?"":f)+"</span>"):d.push('<form action="#" method="post" class="cc-hp1x"><input type="text"'+g.Library.jade.runtime.attr("name","message_field_"+s.id,!0,!1)+g.Library.jade.runtime.attr("placeholder",""+s.explain,!0,!1)+' autocapitalize="off" autocorrect="off" spellcheck="false" class="cc-1t9k cc-clw4 cc-kgeu"/><a role="button" class="cc-fosr cc-4xbu cc-151q">'+g.Library.jade.runtime.escape(null==(f=i("chat","chat_message_text_identity_ask_field_submit"))?"":f)+"</a></form>"),d.push('</span></span><span class="cc-iuse"></span></span>'),c&&(d.push('<span class="cc-iqjx cc-1tzl cc-68z9 cc-sc6q"><span class="cc-h1yx cc-kgeu"><span'+g.Library.jade.runtime.attr("data-date-iso",""+a,!0,!1)+' data-date-watch="true" class="cc-1k3j">'+g.Library.jade.runtime.escape(null==(f=c)?"":f)+'</span><span class="cc-1kje">'),!0!==u.participant&&!0!==u.edited&&!0!==u.translated||(d.push('<span class="cc-66kp">('),!0===u.participant&&(d.push(g.Library.jade.runtime.escape(null==(f=i("chat","chat_message_tag_participant"))?"":f)),!0!==u.edited&&!0!==u.translated||(d.push(","),p["text-space"]())),!0===u.edited&&(d.push(g.Library.jade.runtime.escape(null==(f=i("chat","chat_message_tag_edited"))?"":f)),!0===u.translated&&(d.push(","),p["text-space"]())),!0===u.translated&&d.push(g.Library.jade.runtime.escape(null==(f=i("chat","chat_message_tag_translated"))?"":f)),d.push(")</span>")),d.push("</span></span></span>")),d.push('<span class="cc-iuse"></span></span><span class="cc-iuse"></span>'),"visitor"===h&&d.push('<span class="cc-1did"><span class="cc-k5zk"><span class="cc-crgu"></span><span class="cc-1u5t cc-kgeu">'+g.Library.jade.runtime.escape(null==(f=i("chat","chat_message_info_read"))?"":f)+'</span><span class="cc-iuse"></span></span><span class="cc-iuse"></span></span><a role="button" class="cc-pus6"><span class="cc-fnu6 cc-151q">'+g.Library.jade.runtime.escape(null==(f=i("chat","chat_message_error_retry"))?"":f)+'</span><span class="cc-1pp5 cc-ic7l"></span><span class="cc-iuse"></span></a><span class="cc-iuse"></span>'),d.push("</div>")}.call(this,"_a"in t?t._a:"undefined"!=typeof _a?_a:void 0,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"_f"in t?t._f:"undefined"!=typeof _f?_f:void 0,"_n"in t?t._n:"undefined"!=typeof _n?_n:void 0,"content"in t?t.content:"undefined"!=typeof content?content:void 0,"date_formatted"in t?t.date_formatted:"undefined"!=typeof date_formatted?date_formatted:void 0,"date_iso"in t?t.date_iso:"undefined"!=typeof date_iso?date_iso:void 0,"fingerprint"in t?t.fingerprint:"undefined"!=typeof fingerprint?fingerprint:void 0,"format_context"in t?t.format_context:"undefined"!=typeof format_context?format_context:void 0,"from"in t?t.from:"undefined"!=typeof from?from:void 0,"metas"in t?t.metas:"undefined"!=typeof metas?metas:void 0,"user"in t?t.user:"undefined"!=typeof user?user:void 0),d.join("")},chat_bubble_composing:function(t){var e=[],t=t||{};return function(t){e.push('<div class="cc-1deq"><span class="cc-1ro5 cc-1ada">'),function(){var t=[1,2,3];if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++)e.push('<span class="cc-1ssv cc-k5w4"></span>');else for(i in n=0,t)n++,e.push('<span class="cc-1ssv cc-k5w4"></span>')}.call(this),e.push('</span><span class="cc-iuse"></span></div>')}.call(this,"undefined"in t?t.undefined:void 0),e.join("")},chat_bubble_thread:function(t){var s,c=[],t=t||{};return function(t,i,n,e){c.push("<div"+g.Library.jade.runtime.attr("data-day",""+t,!0,!1)+g.Library.jade.runtime.attr("data-month",""+i,!0,!1)+g.Library.jade.runtime.attr("data-year",""+e,!0,!1)+' class="cc-7bf0">'),n&&c.push('<div class="cc-1pll"><span class="cc-1p79 cc-151q">'+g.Library.jade.runtime.escape(null==(s=n)?"":s)+"</span></div>"),c.push('<div class="cc-12zj"></div></div>')}.call(this,"day"in t?t.day:"undefined"!=typeof day?day:void 0,"month"in t?t.month:"undefined"!=typeof month?month:void 0,"title"in t?t.title:"undefined"!=typeof title?title:void 0,"year"in t?t.year:"undefined"!=typeof year?year:void 0),c.join("")},chat_bubble_group:function(t){var n=[],t=t||{};return function(t,i){n.push("<div"+g.Library.jade.runtime.attr("data-from",""+t,!0,!1)+g.Library.jade.runtime.attr("data-user-marker",""+i,!0,!1)+' class="cc-w6n9 wp-exclude-emoji"></div>')}.call(this,"from"in t?t.from:"undefined"!=typeof from?from:void 0,"user_marker"in t?t.user_marker:"undefined"!=typeof user_marker?user_marker:void 0),n.join("")},chat_picker_gif_item:function(t){var i=[];return i.push('<span data-removable="true" data-loading="true" class="cc-dnqb cc-ofgq cc-2hzo"></span>'),i.join("")},chat_game:function(t){var n,e=[],t=t||{};return function(t,i){e.push('<div data-loaded="false" class="cc-6mrt"><span class="cc-w0in"><a role="button" class="cc-1shm cc-151q">'+g.Library.jade.runtime.escape(null==(n=t("chat","chat_game_controls_stop"))?"":n)+'</a></span><iframe type="text/html"'+g.Library.jade.runtime.attr("src",i.url.crisp_game+"/",!0,!1)+' frameborder="0" class="cc-1h0y"></iframe><span class="cc-8f7k cc-1ada"><span class="cc-104h cc-1eqr"></span></span></div>')}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"environment"in t?t.environment:"undefined"!=typeof environment?environment:void 0),e.join("")},browsing_assist:function(t){var n,e=[],t=t||{};return function(t,i){e.push('<div class="cc-9f6h"><div class="cc-r0ql"><span class="cc-lvhc cc-1xll cc-y69k"><span class="cc-lr8p"></span><span class="cc-1fiq"></span><span class="cc-1tzl cc-t8b6 cc-sc6q"><span class="cc-h1yx cc-kgeu">'+g.Library.jade.runtime.escape(null==(n=t("browsing","assist_mouse_tooltip",[i.website.name]))?"":n)+"</span></span></span></div></div>")}.call(this,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"configuration"in t?t.configuration:"undefined"!=typeof configuration?configuration:void 0),e.join("")},call_ring:function(t){var r,o=[],t=t||{};return function(t,i,n,e,s,c){o.push('<div data-browsing-ignore="true" class="cc-1iv0"><div class="cc-1j7a"><div class="cc-ll62 cc-he6y">'),t=t(240,c.type,c.user_id),o.push("<span"+g.Library.jade.runtime.attr("style","background-image: url('"+t+"') !important;",!0,!1)+' class="cc-1smo cc-wsm4"></span></div><div class="cc-1ba8"><div class="cc-1o9s cc-kgeu">'+g.Library.jade.runtime.escape(null==(r=i("call","ring_title_website",[n.website.name]))?"":r)+'</div><div class="cc-1wln cc-151q">'+g.Library.jade.runtime.escape(null==(r=i("call","ring_title_label",[c.nickname]))?"":r)+'</div></div><ul class="cc-15jz">');var a=[["decline",i("call","ring_actions_decline"),null],["accept",i("call","ring_actions_accept"),e]];(function(){var t=a;if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++){var e=t[i];o.push("<li"+g.Library.jade.runtime.attr("data-action",""+e[0],!0,!1)+g.Library.jade.runtime.attr("data-mode",e[2]||null,!0,!1)+' class="cc-ui2y"><a role="button" class="cc-ekfv"></a><span class="cc-1ans cc-151q">'+g.Library.jade.runtime.escape(null==(r=e[1])?"":r)+"</span></li>")}else for(i in n=0,t)n++,o.push("<li"+g.Library.jade.runtime.attr("data-action",""+(e=t[i])[0],!0,!1)+g.Library.jade.runtime.attr("data-mode",e[2]||null,!0,!1)+' class="cc-ui2y"><a role="button" class="cc-ekfv"></a><span class="cc-1ans cc-151q">'+g.Library.jade.runtime.escape(null==(r=e[1])?"":r)+"</span></li>")}).call(this),o.push("</ul></div></div>")}.call(this,"_a"in t?t._a:"undefined"!=typeof _a?_a:void 0,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"configuration"in t?t.configuration:"undefined"!=typeof configuration?configuration:void 0,"mode"in t?t.mode:"undefined"!=typeof mode?mode:void 0,"undefined"in t?t.undefined:void 0,"user"in t?t.user:"undefined"!=typeof user?user:void 0),o.join("")},call_screen:function(t){var h,u=[],t=t||{};return function(t,s,i,n,e,c){u.push('<div data-browsing-ignore="true" class="cc-1iv0"><div tabindex="0" data-mode="maximized" class="cc-1j41">'),t=t(240,c.type,c.user_id),u.push('<div class="cc-3jjj"><div data-type="remote" class="cc-r1gp">'),"audio"===n&&u.push('<span class="cc-1tpr cc-he6y"><span'+g.Library.jade.runtime.attr("style","background-image: url('"+t+"') !important;",!0,!1)+' class="cc-1wt9 cc-wsm4"></span></span>'),u.push('<video alt="" autoplay="autoplay" playsinline="playsinline" class="cc-19cv"></video></div><ul class="cc-jtwe">');var a=["audio"];"video"===n&&a.push("video"),function(){var t=a;if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++){var e=t[i];u.push("<li"+g.Library.jade.runtime.attr("data-type",""+e,!0,!1)+' class="cc-10o9 cc-kgeu">'+g.Library.jade.runtime.escape(null==(h=s("call","screen_label_"+e+"_muted"))?"":h)+"</li>")}else for(i in n=0,t)n++,e=t[i],u.push("<li"+g.Library.jade.runtime.attr("data-type",""+e,!0,!1)+' class="cc-10o9 cc-kgeu">'+g.Library.jade.runtime.escape(null==(h=s("call","screen_label_"+e+"_muted"))?"":h)+"</li>")}.call(this),u.push('</ul><div class="cc-hin6"><div class="cc-1s4f"><span class="cc-1nrx cc-he6y"><span'+g.Library.jade.runtime.attr("style","background-image: url('"+t+"') !important;",!0,!1)+' class="cc-bg8a cc-wsm4"></span></span><div class="cc-117p"><span class="cc-1vsh"><span class="cc-yaq8 cc-151q">'+g.Library.jade.runtime.escape(null==(h=c.nickname)?"":h)+'</span></span><span class="cc-gu0k">');var r=["connecting","ongoing"];(function(){var t=r;if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++){var e=t[i];u.push("<span"+g.Library.jade.runtime.attr("data-state",""+e,!0,!1)+' class="cc-ulj3 cc-kgeu">'+g.Library.jade.runtime.escape(null==(h=s("call","screen_status_"+e))?"":h)+"</span>")}else for(i in n=0,t)n++,u.push("<span"+g.Library.jade.runtime.attr("data-state",""+(e=t[i]),!0,!1)+' class="cc-ulj3 cc-kgeu">'+g.Library.jade.runtime.escape(null==(h=s("call","screen_status_"+e))?"":h)+"</span>")}).call(this),u.push('<span class="cc-j34c"></span><span class="cc-x7ly cc-kgeu">0:00:00</span></span></div></div><div class="cc-uefb">');var o=[["audio",!0,!1,!0],["hangup",!1,!0,!0],["toggle",!1,!0,!0],["screensharing",!1,!0,i.screensharing]];"video"===n&&o.unshift(["video",!0,!1,!0]),function(){var t=o;if("number"==typeof t.length)for(var i=0,n=t.length;i<n;i++){var e=t[i];u.push('<a role="button"'+g.Library.jade.runtime.attr("data-type",""+e[0],!0,!1)+g.Library.jade.runtime.attr("data-state",!0===e[1]?"true":null,!0,!1)+g.Library.jade.runtime.attr("data-visible",!0===e[2]?"true":"false",!0,!1)+g.Library.jade.runtime.attr("data-unsupported",!1===e[3]?"true":null,!0,!1)+' class="cc-1qzq"></a>')}else for(i in n=0,t)n++,e=t[i],u.push('<a role="button"'+g.Library.jade.runtime.attr("data-type",""+e[0],!0,!1)+g.Library.jade.runtime.attr("data-state",!0===e[1]?"true":null,!0,!1)+g.Library.jade.runtime.attr("data-visible",!0===e[2]?"true":"false",!0,!1)+g.Library.jade.runtime.attr("data-unsupported",!1===e[3]?"true":null,!0,!1)+' class="cc-1qzq"></a>')}.call(this),u.push("</div></div>"),"video"===n&&u.push('<div data-type="local" class="cc-r1gp"><video alt="" autoplay="autoplay" playsinline="playsinline" muted="muted"></video><span class="cc-fi91"><span class="cc-qely"></span></span></div>'),u.push("</div></div></div>")}.call(this,"_a"in t?t._a:"undefined"!=typeof _a?_a:void 0,"_e"in t?t._e:"undefined"!=typeof _e?_e:void 0,"features"in t?t.features:"undefined"!=typeof features?features:void 0,"mode"in t?t.mode:"undefined"!=typeof mode?mode:void 0,"undefined"in t?t.undefined:void 0,"user"in t?t.user:"undefined"!=typeof user?user:void 0),u.join("")}};this.logger=a.Console,this.dom=a.cash,this.crisp={web:a.CrispLibraryWeb,client:a.CrispLibraryClient},this.jade={runtime:a.jade,client:h},this.t()}catch(t){}function u(){}function l(){}}})();